<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Basic Data Manipulation | Introduction to R</title>
  <meta name="description" content="This is the course handbook for the Glasgow University Open Studies course Introduction to R, academic session 2022/2023." />
  <meta name="generator" content="bookdown 0.35 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Basic Data Manipulation | Introduction to R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is the course handbook for the Glasgow University Open Studies course Introduction to R, academic session 2022/2023." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Basic Data Manipulation | Introduction to R" />
  
  <meta name="twitter:description" content="This is the course handbook for the Glasgow University Open Studies course Introduction to R, academic session 2022/2023." />
  

<meta name="author" content="Gaby Mahrholz, Greta Todorova, Wilhelmiina Toivo, and Jaimie Torrance, updated by Johanna Werner in 2022 and Sean Westwood in 2023" />


<meta name="date" content="2023-11-22" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introduction-to-data.html"/>
<link rel="next" href="tidy-data-1-principles-and-pivot-functions.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introduction to R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About this course</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#intended-learning-outcomes"><i class="fa fa-check"></i>Intended Learning Outcomes</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#what-will-i-need-to-complete-this-course"><i class="fa fa-check"></i>What will I need to complete this course?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about-the-assessments"><i class="fa fa-check"></i>About the Assessments</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#formative-assessments"><i class="fa fa-check"></i>Formative Assessments</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#summative-assessments"><i class="fa fa-check"></i>Summative Assessments</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#late-submissions-extensions"><i class="fa fa-check"></i>Late submissions &amp; extensions</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#how-to-submit-your-assessments"><i class="fa fa-check"></i>How to Submit Your Assessments</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#assistance"><i class="fa fa-check"></i>Assistance</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#why-are-these-materials-open"><i class="fa fa-check"></i>Why are these materials open?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgement"><i class="fa fa-check"></i>Acknowledgement</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="before2.html"><a href="before2.html"><i class="fa fa-check"></i>Assignment before starting the course</a>
<ul>
<li class="chapter" data-level="0.1" data-path="before2.html"><a href="before2.html#accessing2"><i class="fa fa-check"></i><b>0.1</b> Access to RStudio</a>
<ul>
<li class="chapter" data-level="0.1.1" data-path="before2.html"><a href="before2.html#install2"><i class="fa fa-check"></i><b>0.1.1</b> Installing R and RStudio on Your Own Machine</a></li>
<li class="chapter" data-level="0.1.2" data-path="before2.html"><a href="before2.html#accessing-rstudio-on-university-computers"><i class="fa fa-check"></i><b>0.1.2</b> Accessing RStudio on University Computers</a></li>
<li class="chapter" data-level="0.1.3" data-path="before2.html"><a href="before2.html#using-rstudio-cloud"><i class="fa fa-check"></i><b>0.1.3</b> Using RStudio Cloud</a></li>
</ul></li>
<li class="chapter" data-level="0.2" data-path="before2.html"><a href="before2.html#maximising-reproducibility-and-visibility"><i class="fa fa-check"></i><b>0.2</b> Maximising Reproducibility and Visibility</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#intended-learning-outcomes-1"><i class="fa fa-check"></i>Intended Learning Outcomes</a></li>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#computer-literacy-basics"><i class="fa fa-check"></i><b>1.1</b> Computer Literacy Basics</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#r-and-r-studio"><i class="fa fa-check"></i><b>1.2</b> R and R Studio</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="introduction.html"><a href="introduction.html#r"><i class="fa fa-check"></i><b>1.2.1</b> R</a></li>
<li class="chapter" data-level="1.2.2" data-path="introduction.html"><a href="introduction.html#rstudio-ide"><i class="fa fa-check"></i><b>1.2.2</b> RStudio IDE</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#r-r-studio-and-associated-file-types"><i class="fa fa-check"></i><b>1.3</b> R, R Studio and Associated File Types</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="introduction.html"><a href="introduction.html#file-structuredirectories"><i class="fa fa-check"></i><b>1.3.1</b> File Structure/Directories</a></li>
<li class="chapter" data-level="1.3.2" data-path="introduction.html"><a href="introduction.html#file-extensions"><i class="fa fa-check"></i><b>1.3.2</b> File Extensions</a></li>
<li class="chapter" data-level="1.3.3" data-path="introduction.html"><a href="introduction.html#zip-files"><i class="fa fa-check"></i><b>1.3.3</b> .zip Files</a></li>
<li class="chapter" data-level="1.3.4" data-path="introduction.html"><a href="introduction.html#rstudio-specific-files"><i class="fa fa-check"></i><b>1.3.4</b> RStudio Specific Files</a></li>
<li class="chapter" data-level="1.3.5" data-path="introduction.html"><a href="introduction.html#r-files"><i class="fa fa-check"></i><b>1.3.5</b> .R Files</a></li>
<li class="chapter" data-level="1.3.6" data-path="introduction.html"><a href="introduction.html#rmd-files"><i class="fa fa-check"></i><b>1.3.6</b> .Rmd files</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#comments"><i class="fa fa-check"></i><b>1.4</b> Comments</a></li>
<li class="chapter" data-level="1.5" data-path="introduction.html"><a href="introduction.html#saving-your-file"><i class="fa fa-check"></i><b>1.5</b> Saving your file</a></li>
<li class="chapter" data-level="1.6" data-path="introduction.html"><a href="introduction.html#sessions"><i class="fa fa-check"></i><b>1.6</b> Sessions</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="introduction.html"><a href="introduction.html#what-is-a-session-in-r"><i class="fa fa-check"></i><b>1.6.1</b> What is a session in R?</a></li>
<li class="chapter" data-level="1.6.2" data-path="introduction.html"><a href="introduction.html#restarting-your-current-session"><i class="fa fa-check"></i><b>1.6.2</b> Restarting Your Current Session</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="introduction.html"><a href="introduction.html#packages"><i class="fa fa-check"></i><b>1.7</b> Packages</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="introduction.html"><a href="introduction.html#installing-packages"><i class="fa fa-check"></i><b>1.7.1</b> Installing Packages</a></li>
<li class="chapter" data-level="1.7.2" data-path="introduction.html"><a href="introduction.html#load-tidyverse"><i class="fa fa-check"></i><b>1.7.2</b> Loading Packages</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="introduction.html"><a href="introduction.html#functions"><i class="fa fa-check"></i><b>1.8</b> Functions</a>
<ul>
<li class="chapter" data-level="1.8.1" data-path="introduction.html"><a href="introduction.html#what-is-a-function"><i class="fa fa-check"></i><b>1.8.1</b> What is a function?</a></li>
<li class="chapter" data-level="1.8.2" data-path="introduction.html"><a href="introduction.html#the-anatomy-of-a-function-names-and-arguments"><i class="fa fa-check"></i><b>1.8.2</b> The Anatomy of a Function: names and arguments</a></li>
<li class="chapter" data-level="1.8.3" data-path="introduction.html"><a href="introduction.html#installing-and-loading-tidyverse"><i class="fa fa-check"></i><b>1.8.3</b> Installing and Loading tidyverse</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction-to-data.html"><a href="introduction-to-data.html"><i class="fa fa-check"></i><b>2</b> Introduction to Data</a>
<ul>
<li class="chapter" data-level="" data-path="introduction-to-data.html"><a href="introduction-to-data.html#intended-learning-outcomes-2"><i class="fa fa-check"></i>Intended Learning Outcomes</a></li>
<li class="chapter" data-level="2.1" data-path="introduction-to-data.html"><a href="introduction-to-data.html#pre-steps"><i class="fa fa-check"></i><b>2.1</b> Pre-Steps</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="introduction-to-data.html"><a href="introduction-to-data.html#downloading-materials"><i class="fa fa-check"></i><b>2.1.1</b> Downloading materials</a></li>
<li class="chapter" data-level="2.1.2" data-path="introduction-to-data.html"><a href="introduction-to-data.html#unzipping-the-zip-folder"><i class="fa fa-check"></i><b>2.1.2</b> Unzipping the zip folder</a></li>
<li class="chapter" data-level="2.1.3" data-path="introduction-to-data.html"><a href="introduction-to-data.html#setting-the-working-directory"><i class="fa fa-check"></i><b>2.1.3</b> Setting the working directory</a></li>
<li class="chapter" data-level="2.1.4" data-path="introduction-to-data.html"><a href="introduction-to-data.html#load-tidyverse-into-the-library"><i class="fa fa-check"></i><b>2.1.4</b> Load tidyverse into the library</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="introduction-to-data.html"><a href="introduction-to-data.html#basic-data-types"><i class="fa fa-check"></i><b>2.2</b> Basic data types</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="introduction-to-data.html"><a href="introduction-to-data.html#character"><i class="fa fa-check"></i><b>2.2.1</b> Character</a></li>
<li class="chapter" data-level="2.2.2" data-path="introduction-to-data.html"><a href="introduction-to-data.html#numeric"><i class="fa fa-check"></i><b>2.2.2</b> Numeric</a></li>
<li class="chapter" data-level="2.2.3" data-path="introduction-to-data.html"><a href="introduction-to-data.html#logical"><i class="fa fa-check"></i><b>2.2.3</b> Logical</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="introduction-to-data.html"><a href="introduction-to-data.html#vectors"><i class="fa fa-check"></i><b>2.3</b> Vectors</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="introduction-to-data.html"><a href="introduction-to-data.html#creating-vectors"><i class="fa fa-check"></i><b>2.3.1</b> Creating vectors</a></li>
<li class="chapter" data-level="2.3.2" data-path="introduction-to-data.html"><a href="introduction-to-data.html#converting-vectors-into-different-data-types-of-vectors-aka-funky-things-we-can-do"><i class="fa fa-check"></i><b>2.3.2</b> Converting vectors into different data types of vectors aka funky things we can do</a></li>
<li class="chapter" data-level="2.3.3" data-path="introduction-to-data.html"><a href="introduction-to-data.html#adding-elements-to-existing-vectors"><i class="fa fa-check"></i><b>2.3.3</b> Adding elements to existing vectors</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="introduction-to-data.html"><a href="introduction-to-data.html#tibble---the-new-way-of-creating-a-dataframe"><i class="fa fa-check"></i><b>2.4</b> Tibble - the new way of creating a dataframe</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="introduction-to-data.html"><a href="introduction-to-data.html#what-the-heck-is-a-tibble-do-you-mean-table"><i class="fa fa-check"></i><b>2.4.1</b> What the heck is a tibble? Do you mean table?</a></li>
<li class="chapter" data-level="2.4.2" data-path="introduction-to-data.html"><a href="introduction-to-data.html#how-to-make-a-tibble-from-scratch"><i class="fa fa-check"></i><b>2.4.2</b> How to make a tibble from scratch</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="introduction-to-data.html"><a href="introduction-to-data.html#reading-in-data"><i class="fa fa-check"></i><b>2.5</b> Reading in data</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="introduction-to-data.html"><a href="introduction-to-data.html#from-pre-existing-databases"><i class="fa fa-check"></i><b>2.5.1</b> from pre-existing databases</a></li>
<li class="chapter" data-level="2.5.2" data-path="introduction-to-data.html"><a href="introduction-to-data.html#from-existing-data-files"><i class="fa fa-check"></i><b>2.5.2</b> from existing data files</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="introduction-to-data.html"><a href="introduction-to-data.html#last-point-for-today"><i class="fa fa-check"></i><b>2.6</b> Last point for today</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="basic-data-manipulation.html"><a href="basic-data-manipulation.html"><i class="fa fa-check"></i><b>3</b> Basic Data Manipulation</a>
<ul>
<li class="chapter" data-level="" data-path="basic-data-manipulation.html"><a href="basic-data-manipulation.html#intended-learning-outcomes-3"><i class="fa fa-check"></i>Intended Learning Outcomes</a></li>
<li class="chapter" data-level="3.1" data-path="basic-data-manipulation.html"><a href="basic-data-manipulation.html#data-wrangling"><i class="fa fa-check"></i><b>3.1</b> Data Wrangling</a></li>
<li class="chapter" data-level="3.2" data-path="basic-data-manipulation.html"><a href="basic-data-manipulation.html#pre-steps-1"><i class="fa fa-check"></i><b>3.2</b> Pre-Steps</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="basic-data-manipulation.html"><a href="basic-data-manipulation.html#downloading-materials-1"><i class="fa fa-check"></i><b>3.2.1</b> Downloading materials</a></li>
<li class="chapter" data-level="3.2.2" data-path="basic-data-manipulation.html"><a href="basic-data-manipulation.html#unzipping-the-zip-folder-1"><i class="fa fa-check"></i><b>3.2.2</b> Unzipping the zip folder</a></li>
<li class="chapter" data-level="3.2.3" data-path="basic-data-manipulation.html"><a href="basic-data-manipulation.html#setting-the-working-directory-1"><i class="fa fa-check"></i><b>3.2.3</b> Setting the working directory</a></li>
<li class="chapter" data-level="3.2.4" data-path="basic-data-manipulation.html"><a href="basic-data-manipulation.html#loading-in-the-required-packages-into-the-library"><i class="fa fa-check"></i><b>3.2.4</b> Loading in the required packages into the library</a></li>
<li class="chapter" data-level="3.2.5" data-path="basic-data-manipulation.html"><a href="basic-data-manipulation.html#read-in-the-data"><i class="fa fa-check"></i><b>3.2.5</b> Read in the data</a></li>
<li class="chapter" data-level="3.2.6" data-path="basic-data-manipulation.html"><a href="basic-data-manipulation.html#view-the-data"><i class="fa fa-check"></i><b>3.2.6</b> View the data</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="basic-data-manipulation.html"><a href="basic-data-manipulation.html#select"><i class="fa fa-check"></i><b>3.3</b> select()</a></li>
<li class="chapter" data-level="3.4" data-path="basic-data-manipulation.html"><a href="basic-data-manipulation.html#rename"><i class="fa fa-check"></i><b>3.4</b> rename()</a></li>
<li class="chapter" data-level="3.5" data-path="basic-data-manipulation.html"><a href="basic-data-manipulation.html#arrange"><i class="fa fa-check"></i><b>3.5</b> arrange()</a></li>
<li class="chapter" data-level="3.6" data-path="basic-data-manipulation.html"><a href="basic-data-manipulation.html#filter"><i class="fa fa-check"></i><b>3.6</b> filter()</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="basic-data-manipulation.html"><a href="basic-data-manipulation.html#single-criterion"><i class="fa fa-check"></i><b>3.6.1</b> Single criterion</a></li>
<li class="chapter" data-level="3.6.2" data-path="basic-data-manipulation.html"><a href="basic-data-manipulation.html#multiple-criteria"><i class="fa fa-check"></i><b>3.6.2</b> Multiple criteria</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="basic-data-manipulation.html"><a href="basic-data-manipulation.html#mutate"><i class="fa fa-check"></i><b>3.7</b> mutate()</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="basic-data-manipulation.html"><a href="basic-data-manipulation.html#read-in-second-dataset"><i class="fa fa-check"></i><b>3.7.1</b> Read in second dataset</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="basic-data-manipulation.html"><a href="basic-data-manipulation.html#summarise"><i class="fa fa-check"></i><b>3.8</b> summarise()</a></li>
<li class="chapter" data-level="3.9" data-path="basic-data-manipulation.html"><a href="basic-data-manipulation.html#adding-group_by"><i class="fa fa-check"></i><b>3.9</b> Adding group_by()</a></li>
<li class="chapter" data-level="3.10" data-path="basic-data-manipulation.html"><a href="basic-data-manipulation.html#pipes"><i class="fa fa-check"></i><b>3.10</b> The pipe operator (%&gt;%)</a></li>
<li class="chapter" data-level="3.11" data-path="basic-data-manipulation.html"><a href="basic-data-manipulation.html#practicing-the-wickham-six"><i class="fa fa-check"></i><b>3.11</b> Practicing the Wickham Six</a>
<ul>
<li class="chapter" data-level="3.11.1" data-path="basic-data-manipulation.html"><a href="basic-data-manipulation.html#select-1"><i class="fa fa-check"></i><b>3.11.1</b> select()</a></li>
<li class="chapter" data-level="3.11.2" data-path="basic-data-manipulation.html"><a href="basic-data-manipulation.html#arrange-1"><i class="fa fa-check"></i><b>3.11.2</b> arrange()</a></li>
<li class="chapter" data-level="3.11.3" data-path="basic-data-manipulation.html"><a href="basic-data-manipulation.html#filter-1"><i class="fa fa-check"></i><b>3.11.3</b> filter()</a></li>
<li class="chapter" data-level="3.11.4" data-path="basic-data-manipulation.html"><a href="basic-data-manipulation.html#mutate-1"><i class="fa fa-check"></i><b>3.11.4</b> mutate()</a></li>
<li class="chapter" data-level="3.11.5" data-path="basic-data-manipulation.html"><a href="basic-data-manipulation.html#group_by-and-summarise"><i class="fa fa-check"></i><b>3.11.5</b> group_by() and summarise()</a></li>
<li class="chapter" data-level="3.11.6" data-path="basic-data-manipulation.html"><a href="basic-data-manipulation.html#bringing-it-all-together"><i class="fa fa-check"></i><b>3.11.6</b> Bringing it all together</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="tidy-data-1-principles-and-pivot-functions.html"><a href="tidy-data-1-principles-and-pivot-functions.html"><i class="fa fa-check"></i><b>4</b> Tidy Data 1: Principles and Pivot Functions</a>
<ul>
<li class="chapter" data-level="" data-path="tidy-data-1-principles-and-pivot-functions.html"><a href="tidy-data-1-principles-and-pivot-functions.html#intended-learning-outcomes-4"><i class="fa fa-check"></i>Intended Learning Outcomes</a></li>
<li class="chapter" data-level="4.1" data-path="tidy-data-1-principles-and-pivot-functions.html"><a href="tidy-data-1-principles-and-pivot-functions.html#pre-steps-2"><i class="fa fa-check"></i><b>4.1</b> Pre-steps</a></li>
<li class="chapter" data-level="4.2" data-path="tidy-data-1-principles-and-pivot-functions.html"><a href="tidy-data-1-principles-and-pivot-functions.html#tidy-data"><i class="fa fa-check"></i><b>4.2</b> Tidy data</a></li>
<li class="chapter" data-level="4.3" data-path="tidy-data-1-principles-and-pivot-functions.html"><a href="tidy-data-1-principles-and-pivot-functions.html#pivot_longer-and-pivot_wider"><i class="fa fa-check"></i><b>4.3</b> pivot_longer() and pivot_wider()</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="tidy-data-1-principles-and-pivot-functions.html"><a href="tidy-data-1-principles-and-pivot-functions.html#pivot_longer"><i class="fa fa-check"></i><b>4.3.1</b> pivot_longer()</a></li>
<li class="chapter" data-level="4.3.2" data-path="tidy-data-1-principles-and-pivot-functions.html"><a href="tidy-data-1-principles-and-pivot-functions.html#pivot_wider"><i class="fa fa-check"></i><b>4.3.2</b> pivot_wider()</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="tidy-data-1-principles-and-pivot-functions.html"><a href="tidy-data-1-principles-and-pivot-functions.html#separate-and-unite"><i class="fa fa-check"></i><b>4.4</b> separate() and unite()</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="tidy-data-1-principles-and-pivot-functions.html"><a href="tidy-data-1-principles-and-pivot-functions.html#separate"><i class="fa fa-check"></i><b>4.4.1</b> separate()</a></li>
<li class="chapter" data-level="4.4.2" data-path="tidy-data-1-principles-and-pivot-functions.html"><a href="tidy-data-1-principles-and-pivot-functions.html#additional-arguments-for-separate"><i class="fa fa-check"></i><b>4.4.2</b> Additional arguments for separate()</a></li>
<li class="chapter" data-level="4.4.3" data-path="tidy-data-1-principles-and-pivot-functions.html"><a href="tidy-data-1-principles-and-pivot-functions.html#unite"><i class="fa fa-check"></i><b>4.4.3</b> unite()</a></li>
<li class="chapter" data-level="4.4.4" data-path="tidy-data-1-principles-and-pivot-functions.html"><a href="tidy-data-1-principles-and-pivot-functions.html#additional-arguments-for-unite"><i class="fa fa-check"></i><b>4.4.4</b> Additional arguments for unite()</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="tidy-data-1-principles-and-pivot-functions.html"><a href="tidy-data-1-principles-and-pivot-functions.html#bonus-materials-mutate-row-names-from-the-mtcars"><i class="fa fa-check"></i><b>4.5</b> Bonus materials: mutate row names from the <code>mtcars</code></a></li>
<li class="chapter" data-level="4.6" data-path="tidy-data-1-principles-and-pivot-functions.html"><a href="tidy-data-1-principles-and-pivot-functions.html#additional-information"><i class="fa fa-check"></i><b>4.6</b> Additional information</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="tidy-data-2-cell-manipulation.html"><a href="tidy-data-2-cell-manipulation.html"><i class="fa fa-check"></i><b>5</b> Tidy Data 2: Cell Manipulation</a>
<ul>
<li class="chapter" data-level="" data-path="tidy-data-2-cell-manipulation.html"><a href="tidy-data-2-cell-manipulation.html#intended-learning-outcomes-5"><i class="fa fa-check"></i>Intended Learning Outcomes</a></li>
<li class="chapter" data-level="5.1" data-path="tidy-data-2-cell-manipulation.html"><a href="tidy-data-2-cell-manipulation.html#pre-steps-3"><i class="fa fa-check"></i><b>5.1</b> Pre-steps</a></li>
<li class="chapter" data-level="5.2" data-path="tidy-data-2-cell-manipulation.html"><a href="tidy-data-2-cell-manipulation.html#conditional-statements"><i class="fa fa-check"></i><b>5.2</b> Conditional statements</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="tidy-data-2-cell-manipulation.html"><a href="tidy-data-2-cell-manipulation.html#recode"><i class="fa fa-check"></i><b>5.2.1</b> recode()</a></li>
<li class="chapter" data-level="5.2.2" data-path="tidy-data-2-cell-manipulation.html"><a href="tidy-data-2-cell-manipulation.html#ifelse"><i class="fa fa-check"></i><b>5.2.2</b> ifelse()</a></li>
<li class="chapter" data-level="5.2.3" data-path="tidy-data-2-cell-manipulation.html"><a href="tidy-data-2-cell-manipulation.html#case_when"><i class="fa fa-check"></i><b>5.2.3</b> case_when()</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="tidy-data-2-cell-manipulation.html"><a href="tidy-data-2-cell-manipulation.html#distinct"><i class="fa fa-check"></i><b>5.3</b> distinct()</a></li>
<li class="chapter" data-level="5.4" data-path="tidy-data-2-cell-manipulation.html"><a href="tidy-data-2-cell-manipulation.html#recap"><i class="fa fa-check"></i><b>5.4</b> Recap</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="tidy-data-2-cell-manipulation.html"><a href="tidy-data-2-cell-manipulation.html#question-1"><i class="fa fa-check"></i><b>5.4.1</b> Question 1</a></li>
<li class="chapter" data-level="5.4.2" data-path="tidy-data-2-cell-manipulation.html"><a href="tidy-data-2-cell-manipulation.html#question-2"><i class="fa fa-check"></i><b>5.4.2</b> Question 2</a></li>
<li class="chapter" data-level="5.4.3" data-path="tidy-data-2-cell-manipulation.html"><a href="tidy-data-2-cell-manipulation.html#question-3"><i class="fa fa-check"></i><b>5.4.3</b> Question 3</a></li>
<li class="chapter" data-level="5.4.4" data-path="tidy-data-2-cell-manipulation.html"><a href="tidy-data-2-cell-manipulation.html#question-4"><i class="fa fa-check"></i><b>5.4.4</b> Question 4</a></li>
<li class="chapter" data-level="5.4.5" data-path="tidy-data-2-cell-manipulation.html"><a href="tidy-data-2-cell-manipulation.html#question-5"><i class="fa fa-check"></i><b>5.4.5</b> Question 5</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="tidy-data-3-joins.html"><a href="tidy-data-3-joins.html"><i class="fa fa-check"></i><b>6</b> Tidy Data 3: Joins</a>
<ul>
<li class="chapter" data-level="" data-path="tidy-data-3-joins.html"><a href="tidy-data-3-joins.html#intended-learning-outcomes-6"><i class="fa fa-check"></i>Intended Learning Outcomes</a></li>
<li class="chapter" data-level="6.1" data-path="tidy-data-3-joins.html"><a href="tidy-data-3-joins.html#pre-steps-4"><i class="fa fa-check"></i><b>6.1</b> Pre-steps</a></li>
<li class="chapter" data-level="6.2" data-path="tidy-data-3-joins.html"><a href="tidy-data-3-joins.html#two-table-verbs"><i class="fa fa-check"></i><b>6.2</b> Two-Table Verbs</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="tidy-data-3-joins.html"><a href="tidy-data-3-joins.html#bringing-in-new-data"><i class="fa fa-check"></i><b>6.2.1</b> Bringing in new data</a></li>
<li class="chapter" data-level="6.2.2" data-path="tidy-data-3-joins.html"><a href="tidy-data-3-joins.html#mutating-join-verbs"><i class="fa fa-check"></i><b>6.2.2</b> Mutating Join Verbs</a></li>
<li class="chapter" data-level="6.2.3" data-path="tidy-data-3-joins.html"><a href="tidy-data-3-joins.html#mutating-join-summary"><i class="fa fa-check"></i><b>6.2.3</b> Mutating Join Summary</a></li>
<li class="chapter" data-level="6.2.4" data-path="tidy-data-3-joins.html"><a href="tidy-data-3-joins.html#binding-join-verbs"><i class="fa fa-check"></i><b>6.2.4</b> Binding Join Verbs</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="tidy-data-3-joins.html"><a href="tidy-data-3-joins.html#additional-information-1"><i class="fa fa-check"></i><b>6.3</b> Additional information</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="before.html"><a href="before.html"><i class="fa fa-check"></i>Assignment before starting the course</a>
<ul>
<li class="chapter" data-level="6.4" data-path="before.html"><a href="before.html#accessing"><i class="fa fa-check"></i><b>6.4</b> Access to RStudio</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="before.html"><a href="before.html#install"><i class="fa fa-check"></i><b>6.4.1</b> Installing R and RStudio on Your Own Machine</a></li>
<li class="chapter" data-level="6.4.2" data-path="before.html"><a href="before.html#accessing-rstudio-on-university-computers-1"><i class="fa fa-check"></i><b>6.4.2</b> Accessing RStudio on University Computers</a></li>
<li class="chapter" data-level="6.4.3" data-path="before.html"><a href="before.html#using-rstudio-cloud-1"><i class="fa fa-check"></i><b>6.4.3</b> Using RStudio Cloud</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="before.html"><a href="before.html#maximising-reproducibility-and-visibility-1"><i class="fa fa-check"></i><b>6.5</b> Maximising Reproducibility and Visibility</a></li>
</ul></li>
<li class="divider"></li>
<li><a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" 
    target="blank"><img alt="Creative Commons License" 
    style="border-width:0" 
    src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a><li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="basic-data-manipulation" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Chapter 3</span> Basic Data Manipulation<a href="basic-data-manipulation.html#basic-data-manipulation" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="intended-learning-outcomes-3" class="section level2 unnumbered hasAnchor">
<h2>Intended Learning Outcomes<a href="basic-data-manipulation.html#intended-learning-outcomes-3" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Be able to use the following dplyr one-table verbs:</p>
<ul>
<li>select()</li>
<li>arrange()</li>
<li>filter()</li>
<li>mutate()</li>
<li>group_by()</li>
<li>summarise()</li>
</ul>
</div>
<div id="data-wrangling" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Data Wrangling<a href="basic-data-manipulation.html#data-wrangling" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>It is estimated that data scientists spend between 50-80% of their time cleaning and preparing data. This so-called <strong>data wrangling</strong> is a crucial first step in organising data for subsequent analysis (NYTimes., 2014). The goal is generally to get the data into a “tidy” format whereby each variable is a column, each observation is a row and each value is a cell. The <code>tidyverse</code> package, developed by Hadley Wickham, is a collection of R packages built around this basic concept and intended to make data science fast, easy and fun. It contains six core packages: dplyr, tidyr, readr, purrr, ggplot2, and tibble.</p>
<p><code>dplyr</code> provides a useful selection of functions - each corresponding to a basic verb:</p>
<table>
<colgroup>
<col width="28%" />
<col width="71%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">dplyr function</th>
<th align="left">description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">select()</td>
<td align="left">Include or exclude certain variables (columns)</td>
</tr>
<tr class="even">
<td align="left">arrange()</td>
<td align="left">Reorder observations (rows)</td>
</tr>
<tr class="odd">
<td align="left">filter()</td>
<td align="left">Include or exclude certain observations (rows)</td>
</tr>
<tr class="even">
<td align="left">mutate()</td>
<td align="left">Create new variables (columns) and preserve existing ones</td>
</tr>
<tr class="odd">
<td align="left">group_by()</td>
<td align="left">Organise observations (rows) by variables (columns)</td>
</tr>
<tr class="even">
<td align="left">summarise()</td>
<td align="left">Compute summary statistics for selected variables (columns)</td>
</tr>
</tbody>
</table>
<p>These are termed <strong>one table verbs</strong> as they only operate on one table at a time. Today we will examine the Wickham Six; select(), arrange(), filter(), mutate(), group_by(), and summarise().</p>
</div>
<div id="pre-steps-1" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Pre-Steps<a href="basic-data-manipulation.html#pre-steps-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Before we can talk about today’s data, let’s do some house-keeping first.</p>
<div id="downloading-materials-1" class="section level3 hasAnchor" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> Downloading materials<a href="basic-data-manipulation.html#downloading-materials-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Download the materials we will be working with today from moodle. The zip folder that contains an Rmd file called <code>L3_stub</code>, and a data file called <code>CareerStats.csv</code>. Similar to last week, <code>L3_stub</code> contains all code chunks for today’s lesson, and is intended for you to add notes and comments.</p>
</div>
<div id="unzipping-the-zip-folder-1" class="section level3 hasAnchor" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> Unzipping the zip folder<a href="basic-data-manipulation.html#unzipping-the-zip-folder-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Make sure you <strong>unzip the folder</strong> and check it contains the <code>L3_stub.Rmd</code> and <code>CareerStats.csv</code>.</p>
</div>
<div id="setting-the-working-directory-1" class="section level3 hasAnchor" number="3.2.3">
<h3><span class="header-section-number">3.2.3</span> Setting the working directory<a href="basic-data-manipulation.html#setting-the-working-directory-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Set that folder as your working directory for today. The files in the folders should now be visible in the <code>Files pane</code>.</p>
</div>
<div id="loading-in-the-required-packages-into-the-library" class="section level3 hasAnchor" number="3.2.4">
<h3><span class="header-section-number">3.2.4</span> Loading in the required packages into the library<a href="basic-data-manipulation.html#loading-in-the-required-packages-into-the-library" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>As we will be using functions that are part of <code>tidyverse</code>, we need to load it into the library. You will also need to load in the new package <code>babynames</code>. You will need to have this package installed first before you can load it into the library, if you haven’t done that yet use the <code>install.packages()</code> function down in your console first.</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="basic-data-manipulation.html#cb108-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb108-2"><a href="basic-data-manipulation.html#cb108-2" tabindex="-1"></a><span class="fu">library</span>(babynames)</span></code></pre></div>
</div>
<div id="read-in-the-data" class="section level3 hasAnchor" number="3.2.5">
<h3><span class="header-section-number">3.2.5</span> Read in the data<a href="basic-data-manipulation.html#read-in-the-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Now, today we will work with two different datasets, one fairly simple dataset, and another more messy complex dataset later one.</p>
<p>The first is a large dataset about babynames (big surprise!). The package you installed and loaded into the library is infact a readymade dataset, that can be read straight into the <code>Global Environment</code>. We will deal with the second dataset later.</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="basic-data-manipulation.html#cb109-1" tabindex="-1"></a>Name_Data <span class="ot">&lt;-</span> babynames</span></code></pre></div>
</div>
<div id="view-the-data" class="section level3 hasAnchor" number="3.2.6">
<h3><span class="header-section-number">3.2.6</span> View the data<a href="basic-data-manipulation.html#view-the-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Click on <code>Name_Data</code> in your <code>Global Environment</code> to open your data in a new tab on the <code>Source</code> pane or call the object in your <code>Console</code> (by typing the name of the object <code>Name_Data</code>) to check that the data was correctly imported into R.</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="basic-data-manipulation.html#cb110-1" tabindex="-1"></a>Name_Data</span></code></pre></div>
<pre><code>## # A tibble: 1,924,665 × 5
##     year sex   name          n   prop
##    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;     &lt;int&gt;  &lt;dbl&gt;
##  1  1880 F     Mary       7065 0.0724
##  2  1880 F     Anna       2604 0.0267
##  3  1880 F     Emma       2003 0.0205
##  4  1880 F     Elizabeth  1939 0.0199
##  5  1880 F     Minnie     1746 0.0179
##  6  1880 F     Margaret   1578 0.0162
##  7  1880 F     Ida        1472 0.0151
##  8  1880 F     Alice      1414 0.0145
##  9  1880 F     Bertha     1320 0.0135
## 10  1880 F     Sarah      1288 0.0132
## # ℹ 1,924,655 more rows</code></pre>
<div class="funfact">
<p>
You could also view the data by using the function
<code>View()</code>. If you are more of a typer than a mouse-user you
can type <code>View(Name_Data)</code> into your <code>Console</code>.
This will open the data in a read-only, spreadsheet-like format in a new
tab on the <code>Source</code> pane.
</p>
</div>
<p>Remember from last week, we can also use <code>glimpse()</code> to view the columns and their datatypes.</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="basic-data-manipulation.html#cb112-1" tabindex="-1"></a><span class="fu">glimpse</span>(Name_Data)</span></code></pre></div>
<pre><code>## Rows: 1,924,665
## Columns: 5
## $ year &lt;dbl&gt; 1880, 1880, 1880, 1880, 1880, 1880, 1880, 1880, 1880, 1880, 1880,…
## $ sex  &lt;chr&gt; &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, …
## $ name &lt;chr&gt; &quot;Mary&quot;, &quot;Anna&quot;, &quot;Emma&quot;, &quot;Elizabeth&quot;, &quot;Minnie&quot;, &quot;Margaret&quot;, &quot;Ida&quot;,…
## $ n    &lt;int&gt; 7065, 2604, 2003, 1939, 1746, 1578, 1472, 1414, 1320, 1288, 1258,…
## $ prop &lt;dbl&gt; 0.07238359, 0.02667896, 0.02052149, 0.01986579, 0.01788843, 0.016…</code></pre>
<p><code>head()</code> would be helpful in displaying only the first 6 rows of the dataset, but remember not to get “tricked” by the number of observations shown in the output.</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="basic-data-manipulation.html#cb114-1" tabindex="-1"></a><span class="fu">head</span>(Name_Data)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 5
##    year sex   name          n   prop
##   &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;     &lt;int&gt;  &lt;dbl&gt;
## 1  1880 F     Mary       7065 0.0724
## 2  1880 F     Anna       2604 0.0267
## 3  1880 F     Emma       2003 0.0205
## 4  1880 F     Elizabeth  1939 0.0199
## 5  1880 F     Minnie     1746 0.0179
## 6  1880 F     Margaret   1578 0.0162</code></pre>
<p><span style="font-size: 22px; font-weight: bold; color: hsl(24, 100%, 50%);">Question Time</span></p>
<p>How many rows (or observations) does <code>Name_Data</code> have? <input class='webex-solveme nospaces' size='7' data-answer='["1924665"]'/> <br>
How many columns (or variables) does <code>Name_Data</code> have? <input class='webex-solveme nospaces' size='1' data-answer='["5"]'/> <br></p>
<div class="task">
<p>
Take some time to familiarise yourself with the variables in your
dataframe.
</p>
</div>
</div>
</div>
<div id="select" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> select()<a href="basic-data-manipulation.html#select" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>You may not want to include every single variable in your analysis. In order to include or exclude certain variables (columns), use the <code>select()</code> function. The first argument to this function is the object you want to select variables from (i.e. our tibble called <code>Name_Data</code>), and the subsequent arguments are the variables to keep.</p>
<p>For example, if you wanted to keep all variables except from <code>prop</code>, you could type:</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="basic-data-manipulation.html#cb116-1" tabindex="-1"></a><span class="fu">select</span>(Name_Data, year, sex, name, n)</span></code></pre></div>
<pre><code>## # A tibble: 1,924,665 × 4
##     year sex   name          n
##    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;     &lt;int&gt;
##  1  1880 F     Mary       7065
##  2  1880 F     Anna       2604
##  3  1880 F     Emma       2003
##  4  1880 F     Elizabeth  1939
##  5  1880 F     Minnie     1746
##  6  1880 F     Margaret   1578
##  7  1880 F     Ida        1472
##  8  1880 F     Alice      1414
##  9  1880 F     Bertha     1320
## 10  1880 F     Sarah      1288
## # ℹ 1,924,655 more rows</code></pre>
<p>That works fine when you have realtively few variables like this dataset, however this menthod can become very time consuming if you have a lot of varibales in your dataset. There are two ways on how we could have done this easier and faster:</p>
<ol style="list-style-type: decimal">
<li>We could use the colon operator <code>:</code>. Similar to last week where we used the colon operator for numerical sequences, we can use it here for selecting a sequence of column names. Here, it reads as “take object <code>student_HM</code>, and select columns <code>year</code>, and every other column though to <code>n</code>”.</li>
</ol>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="basic-data-manipulation.html#cb118-1" tabindex="-1"></a><span class="fu">select</span>(Name_Data, year<span class="sc">:</span>n)</span></code></pre></div>
<pre><code>## # A tibble: 1,924,665 × 4
##     year sex   name          n
##    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;     &lt;int&gt;
##  1  1880 F     Mary       7065
##  2  1880 F     Anna       2604
##  3  1880 F     Emma       2003
##  4  1880 F     Elizabeth  1939
##  5  1880 F     Minnie     1746
##  6  1880 F     Margaret   1578
##  7  1880 F     Ida        1472
##  8  1880 F     Alice      1414
##  9  1880 F     Bertha     1320
## 10  1880 F     Sarah      1288
## # ℹ 1,924,655 more rows</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>We could use “negative selection”, i.e. select the variable we wanted to drop by adding a <code>minus</code> in front of it.</li>
</ol>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="basic-data-manipulation.html#cb120-1" tabindex="-1"></a><span class="fu">select</span>(Name_Data, <span class="sc">-</span>prop)</span></code></pre></div>
<pre><code>## # A tibble: 1,924,665 × 4
##     year sex   name          n
##    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;     &lt;int&gt;
##  1  1880 F     Mary       7065
##  2  1880 F     Anna       2604
##  3  1880 F     Emma       2003
##  4  1880 F     Elizabeth  1939
##  5  1880 F     Minnie     1746
##  6  1880 F     Margaret   1578
##  7  1880 F     Ida        1472
##  8  1880 F     Alice      1414
##  9  1880 F     Bertha     1320
## 10  1880 F     Sarah      1288
## # ℹ 1,924,655 more rows</code></pre>
<p>We also have the option of “de-selecting” more than one variable. By including the minus sign before each column we can remove as many as we want.</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="basic-data-manipulation.html#cb122-1" tabindex="-1"></a><span class="fu">select</span>(Name_Data, <span class="sc">-</span>prop, <span class="sc">-</span>sex)</span></code></pre></div>
<pre><code>## # A tibble: 1,924,665 × 3
##     year name          n
##    &lt;dbl&gt; &lt;chr&gt;     &lt;int&gt;
##  1  1880 Mary       7065
##  2  1880 Anna       2604
##  3  1880 Emma       2003
##  4  1880 Elizabeth  1939
##  5  1880 Minnie     1746
##  6  1880 Margaret   1578
##  7  1880 Ida        1472
##  8  1880 Alice      1414
##  9  1880 Bertha     1320
## 10  1880 Sarah      1288
## # ℹ 1,924,655 more rows</code></pre>
<div class="funfact">
<p>
We can also use <code>select()</code> in combination with the
<code>c()</code> function. Remember, <code>c()</code>is “hugging things
together”. We would put a single <code>minus</code> in front of the c
rather than each of the column. This will read as exclude every column
listed within the brackets.
</p>
<p>
select(Name_Data, -c(sex, n, prop))
</p>
</div>
<p>Remember, if you don’t save this data to an object (e.g. the original dataframe <code>Name_Data</code> or under a new name), it won’t be saved. We have not saved any of the previous tasks to the <code>Global Environment</code>, so there should still be only one babynames related object, e.g. the tibble named <code>Name_Data</code>.</p>
<p><span style="font-size: 22px; font-weight: bold; color: hsl(24, 100%, 50%);">Question Time</span></p>
<div class="task">
<p>
<strong>Your turn</strong>
</p>
<p>
Create a tibble called <code>Name_Short</code> that keeps all
variables/columns from the data <code>Name_Data</code> except from
<code>sex</code> and <code>n</code>. Your new object
<code>Name_Short</code> should appear in your
<code>Global Environment</code>.
</p>
</div>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="basic-data-manipulation.html#cb124-1" tabindex="-1"></a><span class="co"># Jaimie&#39;s solution:</span></span>
<span id="cb124-2"><a href="basic-data-manipulation.html#cb124-2" tabindex="-1"></a>Name_Short <span class="ot">&lt;-</span> <span class="fu">select</span>(Name_Data, <span class="sc">-</span>sex, <span class="sc">-</span>n)</span>
<span id="cb124-3"><a href="basic-data-manipulation.html#cb124-3" tabindex="-1"></a><span class="co"># OR</span></span>
<span id="cb124-4"><a href="basic-data-manipulation.html#cb124-4" tabindex="-1"></a>Name_Short <span class="ot">&lt;-</span> <span class="fu">select</span>(Name_Data, <span class="sc">-</span><span class="fu">c</span>(sex, n))</span>
<span id="cb124-5"><a href="basic-data-manipulation.html#cb124-5" tabindex="-1"></a><span class="co"># OR</span></span>
<span id="cb124-6"><a href="basic-data-manipulation.html#cb124-6" tabindex="-1"></a>Name_Short <span class="ot">&lt;-</span> <span class="fu">select</span>(Name_Data, year, name, prop)</span></code></pre></div>
<div class="warning">
<p>
You could also reference the position of column, rather than the
actual name.
</p>
<ul>
<li>
select(Name_Data,1,3,5)
</li>
</ul>
<p>
While it works code-wise, and seems a much quicker approach, it is a
very bad idea in the name of reproducibility. If you send your code to a
fellow researcher, they would have no idea what the code does. Moreover,
if at some point, you need to add another column to your data, and/or
decide to reorder the sequence of your columns, your code would not run
anymore the way you expect it to.
</p>
</div>
</div>
</div>
<div id="rename" class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> rename()<a href="basic-data-manipulation.html#rename" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><code>rename()</code> is a very useful function if we wanted to change column names. All available column are retained, so nothing is lost. If you had 5 variables in a tibble, and wanted to change the name of one of them, your output would be 5 columns in total - one column with a changed name and 4 columns with the previous names. The <code>rename()</code> function follows a very simple pattern of</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="basic-data-manipulation.html#cb125-1" tabindex="-1"></a><span class="fu">rename</span>(data, <span class="at">new_column_name =</span> old_column_name)</span></code></pre></div>
<p>You can rename multiple column headers by including more arguments, separating them with a comma. Let’s take a look at a simple example in <code>table1</code>.</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="basic-data-manipulation.html#cb126-1" tabindex="-1"></a><span class="co"># table1</span></span></code></pre></div>
<p>If we wanted to change the column headers of <code>country</code> to <code>Country</code> and <code>population</code> to <code>Population</code>, and keep the columns <code>year</code> and <code>cases</code> as they are, we would code</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="basic-data-manipulation.html#cb127-1" tabindex="-1"></a><span class="co"># rename(table1, Country = country,</span></span>
<span id="cb127-2"><a href="basic-data-manipulation.html#cb127-2" tabindex="-1"></a><span class="co">#        Population = population)</span></span></code></pre></div>
<p>If you want to select a few columns and rename them in the process, you could use <code>select()</code>. The structure is the same as with <code>rename()</code>, the only difference is that the new data only retains the columns mentioned explicitly within <code>select()</code>.</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="basic-data-manipulation.html#cb128-1" tabindex="-1"></a><span class="co"># select(data, new_column_name = old_column_name)</span></span></code></pre></div>
<p>Modifying the <code>rename()</code> example from above would lead to selecting <strong>only</strong> the columns <code>country</code> and <code>population</code> from <code>table1</code> and renaming them as <code>Country</code> and <code>Population</code> at the same time.</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="basic-data-manipulation.html#cb129-1" tabindex="-1"></a><span class="co"># select(table1, Country = country,</span></span>
<span id="cb129-2"><a href="basic-data-manipulation.html#cb129-2" tabindex="-1"></a><span class="co">#        Population = population)</span></span></code></pre></div>
</div>
<div id="arrange" class="section level2 hasAnchor" number="3.5">
<h2><span class="header-section-number">3.5</span> arrange()<a href="basic-data-manipulation.html#arrange" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The <code>arrange()</code> function can reorder observations (rows) in ascending (default) or descending order. The first argument to this function is again an object (in this case the tibble <code>Name_Data</code>), and the subsequent arguments are the variables (columns) you want to sort by. For example, if you wanted to sort by <code>n</code> in <strong>ascending</strong> order (which is the default in <code>arrange()</code>) you would type:</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="basic-data-manipulation.html#cb130-1" tabindex="-1"></a>Name_Arr <span class="ot">&lt;-</span> <span class="fu">arrange</span>(Name_Data, n)</span>
<span id="cb130-2"><a href="basic-data-manipulation.html#cb130-2" tabindex="-1"></a>Name_Arr</span></code></pre></div>
<pre><code>## # A tibble: 1,924,665 × 5
##     year sex   name          n      prop
##    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;     &lt;int&gt;     &lt;dbl&gt;
##  1  1880 F     Adelle        5 0.0000512
##  2  1880 F     Adina         5 0.0000512
##  3  1880 F     Adrienne      5 0.0000512
##  4  1880 F     Albertine     5 0.0000512
##  5  1880 F     Alys          5 0.0000512
##  6  1880 F     Ana           5 0.0000512
##  7  1880 F     Araminta      5 0.0000512
##  8  1880 F     Arthur        5 0.0000512
##  9  1880 F     Birtha        5 0.0000512
## 10  1880 F     Bulah         5 0.0000512
## # ℹ 1,924,655 more rows</code></pre>
<div class="warning">
<p>
If you were to assign this code to the same object as before
(i.e. Name_Data), the previous version of <code>Name_Data</code> would
be overwritten.
</p>
</div>
<p>Notice how the <code>n</code> column is now organised in alphabetical order i.e. smallest number to largest. Suppose you wanted to reverse this order, displaying largest, you would need to wrap the name of the variable in the <code>desc()</code> function (i.e. for <strong>descending</strong>).</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="basic-data-manipulation.html#cb132-1" tabindex="-1"></a>Name_Arr2 <span class="ot">&lt;-</span> <span class="fu">arrange</span>(Name_Data, <span class="fu">desc</span>(n))</span>
<span id="cb132-2"><a href="basic-data-manipulation.html#cb132-2" tabindex="-1"></a>Name_Arr2</span></code></pre></div>
<pre><code>## # A tibble: 1,924,665 × 5
##     year sex   name        n   prop
##    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   &lt;int&gt;  &lt;dbl&gt;
##  1  1947 F     Linda   99686 0.0548
##  2  1948 F     Linda   96209 0.0552
##  3  1947 M     James   94756 0.0510
##  4  1957 M     Michael 92695 0.0424
##  5  1947 M     Robert  91642 0.0493
##  6  1949 F     Linda   91016 0.0518
##  7  1956 M     Michael 90620 0.0423
##  8  1958 M     Michael 90520 0.0420
##  9  1948 M     James   88588 0.0497
## 10  1954 M     Michael 88514 0.0428
## # ℹ 1,924,655 more rows</code></pre>
<p>You can also sort by more than one column. For example, you could sort by <code>name</code> first, and then <code>n</code> second:</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="basic-data-manipulation.html#cb134-1" tabindex="-1"></a>Name_Arr3 <span class="ot">&lt;-</span> <span class="fu">arrange</span>(Name_Data, name, n)</span>
<span id="cb134-2"><a href="basic-data-manipulation.html#cb134-2" tabindex="-1"></a>Name_Arr3</span></code></pre></div>
<pre><code>## # A tibble: 1,924,665 × 5
##     year sex   name      n       prop
##    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt;      &lt;dbl&gt;
##  1  2007 M     Aaban     5 0.00000226
##  2  2009 M     Aaban     6 0.00000283
##  3  2010 M     Aaban     9 0.00000439
##  4  2016 M     Aaban     9 0.00000446
##  5  2011 M     Aaban    11 0.00000542
##  6  2012 M     Aaban    11 0.00000543
##  7  2017 M     Aaban    11 0.0000056 
##  8  2013 M     Aaban    14 0.00000694
##  9  2015 M     Aaban    15 0.00000736
## 10  2014 M     Aaban    16 0.00000783
## # ℹ 1,924,655 more rows</code></pre>
<p>You can also arrange by multiple columns in descending order too, or arrange by one column in ascending order and another in descending order if you wanted.</p>
</div>
<div id="filter" class="section level2 hasAnchor" number="3.6">
<h2><span class="header-section-number">3.6</span> filter()<a href="basic-data-manipulation.html#filter" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="single-criterion" class="section level3 hasAnchor" number="3.6.1">
<h3><span class="header-section-number">3.6.1</span> Single criterion<a href="basic-data-manipulation.html#single-criterion" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In order to include or exclude certain observations (rows), use the <code>filter()</code> function. The first argument to this function is an object (in this case the tibble <code>Name_Data</code>) and the subsequent argument is the criteria you wish to filter on. For example, if you want only those observations from the year of your birth:</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="basic-data-manipulation.html#cb136-1" tabindex="-1"></a>Name_MyYear <span class="ot">&lt;-</span> <span class="fu">filter</span>(Name_Data, year <span class="sc">==</span> <span class="dv">1988</span>)</span>
<span id="cb136-2"><a href="basic-data-manipulation.html#cb136-2" tabindex="-1"></a><span class="fu">glimpse</span>(Name_MyYear)</span></code></pre></div>
<pre><code>## Rows: 22,364
## Columns: 5
## $ year &lt;dbl&gt; 1988, 1988, 1988, 1988, 1988, 1988, 1988, 1988, 1988, 1988, 1988,…
## $ sex  &lt;chr&gt; &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, …
## $ name &lt;chr&gt; &quot;Jessica&quot;, &quot;Ashley&quot;, &quot;Amanda&quot;, &quot;Sarah&quot;, &quot;Jennifer&quot;, &quot;Brittany&quot;, &quot;…
## $ n    &lt;int&gt; 51538, 49961, 39455, 28366, 27887, 26815, 22836, 20699, 20310, 20…
## $ prop &lt;dbl&gt; 0.02680669, 0.02598643, 0.02052190, 0.01475413, 0.01450499, 0.013…</code></pre>
<p>or keep observations of only popular names:</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="basic-data-manipulation.html#cb138-1" tabindex="-1"></a>Name_Pop <span class="ot">&lt;-</span> <span class="fu">filter</span>(Name_Data, prop <span class="sc">&gt;=</span> <span class="fl">0.07</span>)</span>
<span id="cb138-2"><a href="basic-data-manipulation.html#cb138-2" tabindex="-1"></a><span class="fu">glimpse</span>(Name_Pop)</span></code></pre></div>
<pre><code>## Rows: 19
## Columns: 5
## $ year &lt;dbl&gt; 1880, 1880, 1880, 1881, 1881, 1882, 1882, 1882, 1883, 1883, 1884,…
## $ sex  &lt;chr&gt; &quot;F&quot;, &quot;M&quot;, &quot;M&quot;, &quot;M&quot;, &quot;M&quot;, &quot;F&quot;, &quot;M&quot;, &quot;M&quot;, &quot;M&quot;, &quot;M&quot;, &quot;M&quot;, &quot;M&quot;, &quot;M&quot;, …
## $ name &lt;chr&gt; &quot;Mary&quot;, &quot;John&quot;, &quot;William&quot;, &quot;John&quot;, &quot;William&quot;, &quot;Mary&quot;, &quot;John&quot;, &quot;Wi…
## $ n    &lt;int&gt; 7065, 9655, 9532, 8769, 8524, 8148, 9557, 9298, 8894, 8387, 9388,…
## $ prop &lt;dbl&gt; 0.07238359, 0.08154561, 0.08050676, 0.08098299, 0.07872038, 0.070…</code></pre>
<div class="question">
<ol style="list-style-type: decimal">
<li>
<p>
Notice how we saved the new data under a different object name
(<code>Name_MyYear</code>). When using <code>filter()</code>, you should
never replace/ overwrite your original data unless you know exactly what
you are doing. What could be the consequences?
</p>
</li>
<li>
<p>
By the way, what do symbols such <code>==</code> and
<code>&gt;=</code> remind you of??? (hint: something we covered last
week?)
</p>
</li>
</ol>
</div>
<div class="webex-solution">
<button>
Answers
</button>
<div class="solved">
<p>
Consequences: You could potentially lose some data. Nothing is ever
completely lost though (unless you are overwriting the original .csv
file) but it could result in more work for you to restore everything
from the beginning. Especially when your data scripts are very long and
analysis is complex (i.e. taking up a lot of computing power), that
could easily turn into a nightmare.
</p>
<p>
Remember the relational operators that returned logical values of
either <code>TRUE</code> or <code>FALSE</code>?
</p>
</div>
</div>
<p>Relational operators (such as <code>==</code>, <code>!=</code>, <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>, and <code>&gt;=</code>) compare two numerical expressions and return a Boolean variable: a variable whose value is either 0 (<code>FALSE</code>) or 1 (<code>TRUE</code>). So, essentially, <code>filter()</code> includes any observations (rows) for which the expression evaluates to <code>TRUE</code>, and excludes any for which it evaluates to <code>FALSE</code>. In the previous example, <code>filter()</code> sifted through 1924665 observations, keeping rows containing year that was equal to 1998.</p>
<p>This works as well for columns of the data type <code>character</code>. If you want only those observations for a specific name, you could use the equivalence operator <code>==</code>. Be aware that a single equals sign (<code>=</code>) is used to assign a value to a variable whereas a double equals sign (<code>==</code>) is used to check whether two values are equal.</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="basic-data-manipulation.html#cb140-1" tabindex="-1"></a>Name_Me <span class="ot">&lt;-</span> <span class="fu">filter</span>(Name_Data, name <span class="sc">==</span> <span class="st">&quot;Jaimie&quot;</span>)</span>
<span id="cb140-2"><a href="basic-data-manipulation.html#cb140-2" tabindex="-1"></a><span class="fu">glimpse</span>(Name_Me)</span></code></pre></div>
<pre><code>## Rows: 118
## Columns: 5
## $ year &lt;dbl&gt; 1946, 1948, 1951, 1952, 1953, 1954, 1955, 1956, 1957, 1958, 1958,…
## $ sex  &lt;chr&gt; &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;M&quot;, &quot;F&quot;, &quot;M&quot;, …
## $ name &lt;chr&gt; &quot;Jaimie&quot;, &quot;Jaimie&quot;, &quot;Jaimie&quot;, &quot;Jaimie&quot;, &quot;Jaimie&quot;, &quot;Jaimie&quot;, &quot;Jaim…
## $ n    &lt;int&gt; 7, 5, 8, 8, 6, 8, 12, 16, 9, 28, 12, 30, 13, 19, 10, 20, 7, 23, 1…
## $ prop &lt;dbl&gt; 4.340e-06, 2.870e-06, 4.330e-06, 4.210e-06, 3.110e-06, 4.020e-06,…</code></pre>
<p>Here, the <code>filter()</code> function compares every single value in the column <code>name</code> of the data object <code>Name_Data</code> with the character string written on the right-hand side of the equation (“Jaimie”).</p>
<p>You can also use <code>filter()</code> to keep data from multiple options of the same variable using the <code>%in%</code> operator. In this case we want to filter several different names:</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="basic-data-manipulation.html#cb142-1" tabindex="-1"></a>Name_J <span class="ot">&lt;-</span> <span class="fu">filter</span>(Name_Data, name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Jaimie&quot;</span>, <span class="st">&quot;Jamie&quot;</span>, <span class="st">&quot;Jaime&quot;</span>, <span class="st">&quot;James&quot;</span>, <span class="st">&quot;Jayme&quot;</span>))</span>
<span id="cb142-2"><a href="basic-data-manipulation.html#cb142-2" tabindex="-1"></a><span class="fu">glimpse</span>(Name_J)</span></code></pre></div>
<pre><code>## Rows: 963
## Columns: 5
## $ year &lt;dbl&gt; 1880, 1880, 1881, 1881, 1882, 1882, 1883, 1883, 1884, 1884, 1884,…
## $ sex  &lt;chr&gt; &quot;F&quot;, &quot;M&quot;, &quot;F&quot;, &quot;M&quot;, &quot;F&quot;, &quot;M&quot;, &quot;F&quot;, &quot;M&quot;, &quot;F&quot;, &quot;F&quot;, &quot;M&quot;, &quot;F&quot;, &quot;M&quot;, …
## $ name &lt;chr&gt; &quot;James&quot;, &quot;James&quot;, &quot;James&quot;, &quot;James&quot;, &quot;James&quot;, &quot;James&quot;, &quot;James&quot;, &quot;J…
## $ n    &lt;int&gt; 22, 5927, 24, 5441, 18, 5892, 25, 5223, 33, 5, 5693, 26, 5175, 29…
## $ prop &lt;dbl&gt; 0.00022540, 0.05005912, 0.00024278, 0.05024843, 0.00015558, 0.048…</code></pre>
<p>Because <code>filter()</code> evalutes variables against your criteria and keeps observations that are <code>TRUE</code>, in essence the function defaults to “filter-in” certain observations. You can however also use it to “filter-out” specific observations, by using the ‘not equals’ operator <code>!=</code>. Here <code>filter()</code> keeps every row in which the value DOES NOT read what you have specificed.</p>
<p>Using <code>filter()</code> to exclude certain observations.</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="basic-data-manipulation.html#cb144-1" tabindex="-1"></a>Name_J_Short <span class="ot">&lt;-</span> <span class="fu">filter</span>(Name_J, name <span class="sc">!=</span><span class="st">&quot;James&quot;</span>)</span>
<span id="cb144-2"><a href="basic-data-manipulation.html#cb144-2" tabindex="-1"></a><span class="fu">glimpse</span>(Name_J_Short)</span></code></pre></div>
<pre><code>## Rows: 687
## Columns: 5
## $ year &lt;dbl&gt; 1884, 1887, 1888, 1890, 1891, 1892, 1893, 1894, 1895, 1896, 1896,…
## $ sex  &lt;chr&gt; &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;M&quot;, &quot;F&quot;, &quot;M&quot;, …
## $ name &lt;chr&gt; &quot;Jamie&quot;, &quot;Jamie&quot;, &quot;Jamie&quot;, &quot;Jamie&quot;, &quot;Jamie&quot;, &quot;Jamie&quot;, &quot;Jamie&quot;, &quot;J…
## $ n    &lt;int&gt; 5, 5, 5, 12, 11, 10, 9, 9, 10, 8, 6, 9, 5, 11, 14, 20, 6, 20, 15,…
## $ prop &lt;dbl&gt; 3.634e-05, 3.217e-05, 2.639e-05, 5.951e-05, 5.596e-05, 4.446e-05,…</code></pre>
</div>
<div id="multiple-criteria" class="section level3 hasAnchor" number="3.6.2">
<h3><span class="header-section-number">3.6.2</span> Multiple criteria<a href="basic-data-manipulation.html#multiple-criteria" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Often you will come across a situation where you will need to filter based on multiple criteria. For that you have the options of <code>AND</code> and <code>OR</code>. <code>AND</code>is used if you had two criteria and only wanted data returned when <strong>both</strong> criteria are met. <code>OR</code>is used if you had two criteria and wanted data returned for <strong>either</strong> criterion.</p>
<center>
<img src="images/AND_OR.png" height="150">
</center>
<p><strong>Simple Example:</strong> Just imagine, you have data of men and women who are either blond or dark-haired.</p>
<center>
<img src="images/avatars.png" height="150">
</center>
<p>If you wanted to filter everyone who has <em>blond</em> hair <strong>AND</strong> is a <em>man</em>, all your data looks like this:</p>
<center>
<img src="images/avatars_AND.png" height="150">
</center>
<p>Whereas, if you wanted to filter out everyone who has <strong>either</strong> <em>dark hair</em> <strong>OR</strong> is a <em>woman</em>, you would get:</p>
<center>
<img src="images/avatars_OR.png" height="150">
</center>
<p><br></p>
<p><strong>What does that mean for our babynames data?</strong></p>
<p>For example, to filter rows containing only your name, of one sex, since your year of birth, you would code:</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="basic-data-manipulation.html#cb146-1" tabindex="-1"></a>Name_Specific <span class="ot">&lt;-</span> <span class="fu">filter</span>(Name_Data, name <span class="sc">==</span> <span class="st">&quot;Jaimie&quot;</span>, year <span class="sc">&gt;=</span> <span class="dv">1988</span>, sex <span class="sc">==</span> <span class="st">&quot;M&quot;</span>)</span>
<span id="cb146-2"><a href="basic-data-manipulation.html#cb146-2" tabindex="-1"></a><span class="fu">glimpse</span>(Name_Specific)</span></code></pre></div>
<pre><code>## Rows: 19
## Columns: 5
## $ year &lt;dbl&gt; 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998,…
## $ sex  &lt;chr&gt; &quot;M&quot;, &quot;M&quot;, &quot;M&quot;, &quot;M&quot;, &quot;M&quot;, &quot;M&quot;, &quot;M&quot;, &quot;M&quot;, &quot;M&quot;, &quot;M&quot;, &quot;M&quot;, &quot;M&quot;, &quot;M&quot;, …
## $ name &lt;chr&gt; &quot;Jaimie&quot;, &quot;Jaimie&quot;, &quot;Jaimie&quot;, &quot;Jaimie&quot;, &quot;Jaimie&quot;, &quot;Jaimie&quot;, &quot;Jaim…
## $ n    &lt;int&gt; 22, 15, 28, 21, 19, 14, 6, 9, 10, 10, 6, 11, 9, 12, 7, 6, 6, 5, 5
## $ prop &lt;dbl&gt; 1.099e-05, 7.160e-06, 1.302e-05, 9.910e-06, 9.050e-06, 6.780e-06,…</code></pre>
<div class="funfact">
<p>
You could have also used the logical operator <code>&amp;</code>
(AND) instead of the comma.
<code>filter(Name_Data, name == “Jaimie” &amp; year &gt;= 1988 &amp; sex == “M”)</code>
would have given you the same result as above.
</p>
</div>
<p>If we wanted to filter the data <code>Name_Data</code> for either names with a very high count <strong>OR</strong> names that account for a very low proportion, we could use the logical operator <code>|</code> (OR).</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="basic-data-manipulation.html#cb148-1" tabindex="-1"></a>Data_Or <span class="ot">&lt;-</span> <span class="fu">filter</span>(Name_Data, n <span class="sc">&gt;</span> <span class="dv">90000</span> <span class="sc">|</span> prop <span class="sc">&lt;</span> <span class="fl">2.27e-06</span>)</span>
<span id="cb148-2"><a href="basic-data-manipulation.html#cb148-2" tabindex="-1"></a><span class="fu">glimpse</span>(Data_Or)</span></code></pre></div>
<pre><code>## Rows: 2,041
## Columns: 5
## $ year &lt;dbl&gt; 1947, 1947, 1947, 1948, 1949, 1956, 1957, 1958, 2007, 2007, 2007,…
## $ sex  &lt;chr&gt; &quot;F&quot;, &quot;M&quot;, &quot;M&quot;, &quot;F&quot;, &quot;F&quot;, &quot;M&quot;, &quot;M&quot;, &quot;M&quot;, &quot;M&quot;, &quot;M&quot;, &quot;M&quot;, &quot;M&quot;, &quot;M&quot;, …
## $ name &lt;chr&gt; &quot;Linda&quot;, &quot;James&quot;, &quot;Robert&quot;, &quot;Linda&quot;, &quot;Linda&quot;, &quot;Michael&quot;, &quot;Michael…
## $ n    &lt;int&gt; 99686, 94756, 91642, 96209, 91016, 90620, 92695, 90520, 5, 5, 5, …
## $ prop &lt;dbl&gt; 0.05483812, 0.05101589, 0.04933934, 0.05521079, 0.05184643, 0.042…</code></pre>
<p>As you will have noticed, <code>Data_Or</code> has now observations for names that either have a count over 90,000 in a year, or account for a very small proportion in a year. In this instance these are very distinct groups, and no observation would meet both criteria, check for yourself:</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="basic-data-manipulation.html#cb150-1" tabindex="-1"></a>Data_Or2 <span class="ot">&lt;-</span> <span class="fu">filter</span>(Name_Data, n <span class="sc">&gt;</span> <span class="dv">90000</span> <span class="sc">&amp;</span> prop <span class="sc">&lt;</span> <span class="fl">2.27e-06</span>)</span>
<span id="cb150-2"><a href="basic-data-manipulation.html#cb150-2" tabindex="-1"></a><span class="fu">glimpse</span>(Data_Or2)</span></code></pre></div>
<pre><code>## Rows: 0
## Columns: 5
## $ year &lt;dbl&gt; 
## $ sex  &lt;chr&gt; 
## $ name &lt;chr&gt; 
## $ n    &lt;int&gt; 
## $ prop &lt;dbl&gt;</code></pre>
<p>Here we see <code>Data_Or2</code>, returns no observations. However sometimes, you might select multiple criteria, where some observations will only meet one, but other observations may meet both criteria (see below). So always keep in mind what exactly you want to find, and choose the best way to filter.</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="basic-data-manipulation.html#cb152-1" tabindex="-1"></a>Data_Or3 <span class="ot">&lt;-</span> <span class="fu">filter</span>(Name_Data, n <span class="sc">&gt;</span> <span class="dv">90000</span> <span class="sc">|</span> prop <span class="sc">&gt;</span> <span class="fl">0.05</span>)</span>
<span id="cb152-2"><a href="basic-data-manipulation.html#cb152-2" tabindex="-1"></a><span class="fu">glimpse</span>(Data_Or3)</span></code></pre></div>
<pre><code>## Rows: 172
## Columns: 5
## $ year &lt;dbl&gt; 1880, 1880, 1880, 1880, 1881, 1881, 1881, 1881, 1882, 1882, 1882,…
## $ sex  &lt;chr&gt; &quot;F&quot;, &quot;M&quot;, &quot;M&quot;, &quot;M&quot;, &quot;F&quot;, &quot;M&quot;, &quot;M&quot;, &quot;M&quot;, &quot;F&quot;, &quot;M&quot;, &quot;M&quot;, &quot;F&quot;, &quot;M&quot;, …
## $ name &lt;chr&gt; &quot;Mary&quot;, &quot;John&quot;, &quot;William&quot;, &quot;James&quot;, &quot;Mary&quot;, &quot;John&quot;, &quot;William&quot;, &quot;J…
## $ n    &lt;int&gt; 7065, 9655, 9532, 5927, 6919, 8769, 8524, 5441, 8148, 9557, 9298,…
## $ prop &lt;dbl&gt; 0.07238359, 0.08154561, 0.08050676, 0.05005912, 0.06999140, 0.080…</code></pre>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="basic-data-manipulation.html#cb154-1" tabindex="-1"></a>Data_Or4 <span class="ot">&lt;-</span> <span class="fu">filter</span>(Name_Data, n <span class="sc">&gt;</span> <span class="dv">90000</span> <span class="sc">&amp;</span> prop <span class="sc">&gt;</span> <span class="fl">0.05</span>)</span>
<span id="cb154-2"><a href="basic-data-manipulation.html#cb154-2" tabindex="-1"></a><span class="fu">glimpse</span>(Data_Or4)</span></code></pre></div>
<pre><code>## Rows: 4
## Columns: 5
## $ year &lt;dbl&gt; 1947, 1947, 1948, 1949
## $ sex  &lt;chr&gt; &quot;F&quot;, &quot;M&quot;, &quot;F&quot;, &quot;F&quot;
## $ name &lt;chr&gt; &quot;Linda&quot;, &quot;James&quot;, &quot;Linda&quot;, &quot;Linda&quot;
## $ n    &lt;int&gt; 99686, 94756, 96209, 91016
## $ prop &lt;dbl&gt; 0.05483812, 0.05101589, 0.05521079, 0.05184643</code></pre>
<p><span style="font-size: 22px; font-weight: bold; color: hsl(24, 100%, 50%);">Question Time</span></p>
<p>How many rows (or observations) does the object <code>Data_Or3</code> contain? <input class='webex-solveme nospaces' size='3' data-answer='["172"]'/><br>
How many different female names are in <code>Data_Or4</code>? <input class='webex-solveme nospaces' size='1' data-answer='["1"]'/> <br></p>
<p><br></p>
<div class="task">
<p>
<strong>Your turn</strong>
</p>
<p>
Make a tibble called <code>Name_Beat</code> that only shows data from
<code>Name_Data</code> for the <code>names</code> John, Paul, George and
Ringo, and just for <code>sex</code> males.
</p>
</div>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="basic-data-manipulation.html#cb156-1" tabindex="-1"></a>Name_Beat <span class="ot">&lt;-</span> <span class="fu">filter</span>(Name_Data, name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;John&quot;</span>, <span class="st">&quot;Paul&quot;</span>, <span class="st">&quot;George&quot;</span>, <span class="st">&quot;Ringo&quot;</span>), sex <span class="sc">==</span> <span class="st">&quot;M&quot;</span>)</span>
<span id="cb156-2"><a href="basic-data-manipulation.html#cb156-2" tabindex="-1"></a></span>
<span id="cb156-3"><a href="basic-data-manipulation.html#cb156-3" tabindex="-1"></a><span class="co"># If you have done this correct you should be able to produce a nice simple plot with the code below, to show change in proportional representation of these names over time (don&#39;t worry about what this code means, you&#39;ll learn more about plots later in the course)</span></span>
<span id="cb156-4"><a href="basic-data-manipulation.html#cb156-4" tabindex="-1"></a></span>
<span id="cb156-5"><a href="basic-data-manipulation.html#cb156-5" tabindex="-1"></a><span class="fu">ggplot</span>(Name_Beat, <span class="fu">aes</span>(year, prop, <span class="at">colour=</span>name)) <span class="sc">+</span> <span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="Intro-to-R-GU-Open-Studies-2021-2022_files/figure-html/unnamed-chunk-107-1.png" width="672" /></p>
</div>
</div>
</div>
<div id="mutate" class="section level2 hasAnchor" number="3.7">
<h2><span class="header-section-number">3.7</span> mutate()<a href="basic-data-manipulation.html#mutate" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The <code>mutate()</code> function creates new variables (columns) onto the existing object. The first argument to this function is an object from your <code>Global Environment</code> (for example <code>Name_Data</code>) and the subsequent argument is the new column name and what you want it to contain. The following image was downloaded from <a href="https://www.sharpsightlabs.com/blog/mutate-in-r/" class="uri">https://www.sharpsightlabs.com/blog/mutate-in-r/</a></p>
<center>
<img src="images/mutate.png" height= "350">
</center>
<p>Let’s apply this to this to our <code>Name_Data</code> data tibble. Say we wanted to create a new column <code>Decade</code> that shows us the relative decade each observation is taken from. Save this as a new object <code>Name_Ext</code> to the <code>Global Environment</code> rather than overwriting <code>Name_Data</code> so that we can compare <code>Name_Data</code> with the extended <code>Name_Ext</code> later on.</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="basic-data-manipulation.html#cb157-1" tabindex="-1"></a>Name_Ext <span class="ot">&lt;-</span> <span class="fu">mutate</span>(Name_Data, <span class="at">Decade =</span> <span class="fu">floor</span>(year<span class="sc">/</span><span class="dv">10</span>)<span class="sc">*</span><span class="dv">10</span>)</span>
<span id="cb157-2"><a href="basic-data-manipulation.html#cb157-2" tabindex="-1"></a><span class="fu">glimpse</span>(Name_Ext)</span></code></pre></div>
<pre><code>## Rows: 1,924,665
## Columns: 6
## $ year   &lt;dbl&gt; 1880, 1880, 1880, 1880, 1880, 1880, 1880, 1880, 1880, 1880, 188…
## $ sex    &lt;chr&gt; &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;…
## $ name   &lt;chr&gt; &quot;Mary&quot;, &quot;Anna&quot;, &quot;Emma&quot;, &quot;Elizabeth&quot;, &quot;Minnie&quot;, &quot;Margaret&quot;, &quot;Ida…
## $ n      &lt;int&gt; 7065, 2604, 2003, 1939, 1746, 1578, 1472, 1414, 1320, 1288, 125…
## $ prop   &lt;dbl&gt; 0.07238359, 0.02667896, 0.02052149, 0.01986579, 0.01788843, 0.0…
## $ Decade &lt;dbl&gt; 1880, 1880, 1880, 1880, 1880, 1880, 1880, 1880, 1880, 1880, 188…</code></pre>
<p>As we can see, <code>Name_Ext</code> has one column more than <code>Name_Data</code>. So <code>mutate()</code> took the value in the cells for each row of the variable <code>year</code>, devided it by 10, and using the <code>floor()</code> function, rounds that value down to the nearest whole number, before finally multiplying the result by 10, and adding it to a new column called <code>Decade</code>.</p>
<p>Importantly, new variables will overwrite existing variables if column headings are identical. So if we wanted to halve the values in column <code>Decade</code> and store them in a column <code>Decade</code>, the original <code>Decade</code> would be overwritten. To demonstrate we will try doing this and stroring the output in a new object called <code>Name_Ext2</code>and save that to our <code>Global Environment</code>.</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="basic-data-manipulation.html#cb159-1" tabindex="-1"></a>Name_Ext2 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(Name_Ext, <span class="at">Decade =</span> Decade<span class="sc">/</span><span class="dv">2</span>)</span>
<span id="cb159-2"><a href="basic-data-manipulation.html#cb159-2" tabindex="-1"></a><span class="fu">glimpse</span>(Name_Ext2)</span></code></pre></div>
<pre><code>## Rows: 1,924,665
## Columns: 6
## $ year   &lt;dbl&gt; 1880, 1880, 1880, 1880, 1880, 1880, 1880, 1880, 1880, 1880, 188…
## $ sex    &lt;chr&gt; &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;…
## $ name   &lt;chr&gt; &quot;Mary&quot;, &quot;Anna&quot;, &quot;Emma&quot;, &quot;Elizabeth&quot;, &quot;Minnie&quot;, &quot;Margaret&quot;, &quot;Ida…
## $ n      &lt;int&gt; 7065, 2604, 2003, 1939, 1746, 1578, 1472, 1414, 1320, 1288, 125…
## $ prop   &lt;dbl&gt; 0.07238359, 0.02667896, 0.02052149, 0.01986579, 0.01788843, 0.0…
## $ Decade &lt;dbl&gt; 940, 940, 940, 940, 940, 940, 940, 940, 940, 940, 940, 940, 940…</code></pre>
<p>So now, <code>Name_Ext2</code> did not gain a column (it still contains 6 variables), and <code>Decade</code> now has (unhelpfully) half the numeric value of the decade. (As an aside you could prevent yourself from accidentally doing something like this by converting <code>Decade</code> from numeric double type data to character type data, if you had no intention of carrying out any calculations on that variable)</p>
<div class="info">
<p>
The main take-away message here is to always check your data after
manipulation if the outcome is really what you would expected. If you
don’t inspect and accidentally overwrite columns, you would not notice
any difference.
</p>
</div>
<p>You can also use <code>mutate()</code> to drop columns you no longer need, as an alternative to the <code>select()</code> function. This would mean that <code>Name_Ext2</code> is now identical to <code>Name_Data</code>.</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="basic-data-manipulation.html#cb161-1" tabindex="-1"></a>Name_Ext2 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(Name_Ext2, <span class="at">Decade =</span> <span class="cn">NULL</span>)</span>
<span id="cb161-2"><a href="basic-data-manipulation.html#cb161-2" tabindex="-1"></a><span class="fu">glimpse</span>(Name_Ext2)</span></code></pre></div>
<pre><code>## Rows: 1,924,665
## Columns: 5
## $ year &lt;dbl&gt; 1880, 1880, 1880, 1880, 1880, 1880, 1880, 1880, 1880, 1880, 1880,…
## $ sex  &lt;chr&gt; &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, …
## $ name &lt;chr&gt; &quot;Mary&quot;, &quot;Anna&quot;, &quot;Emma&quot;, &quot;Elizabeth&quot;, &quot;Minnie&quot;, &quot;Margaret&quot;, &quot;Ida&quot;,…
## $ n    &lt;int&gt; 7065, 2604, 2003, 1939, 1746, 1578, 1472, 1414, 1320, 1288, 1258,…
## $ prop &lt;dbl&gt; 0.07238359, 0.02667896, 0.02052149, 0.01986579, 0.01788843, 0.016…</code></pre>
<p>If you want to add more than 2 columns, you can do that in a single <code>mutate()</code> statement. You can also add variables that are not numerical values, such as <code>character</code> or <code>logical</code>.</p>
<p>Add two columns to <code>Name_Ext</code> and call it <code>Name_Ext3</code>.</p>
<ul>
<li>Column 1 is called <code>MinName</code> and is of datatype <code>logical</code>. It contains a comparison of the value in <code>n</code> with the cut off count of 5 that allows inclusion in the dataset. Values of 5 should read <code>TRUE</code>, all other values <code>FALSE</code>.</li>
<li>Column 2 is called <code>"20thCent"</code> and is of datatype <code>logical</code>. It contains a comparison of the value in <code>years</code> ensuring the value is between 1900 and 1999. Values inside this range should read <code>TRUE</code>, all other values <code>FALSE</code>.</li>
</ul>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="basic-data-manipulation.html#cb163-1" tabindex="-1"></a>Name_Ext3 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(Name_Ext, <span class="at">MinName =</span> n <span class="sc">==</span> <span class="dv">5</span>, <span class="st">&quot;20thCent&quot;</span> <span class="ot">=</span> year <span class="sc">&gt;=</span> <span class="dv">1900</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="dv">1999</span>)</span>
<span id="cb163-2"><a href="basic-data-manipulation.html#cb163-2" tabindex="-1"></a><span class="fu">glimpse</span>(Name_Ext3)</span></code></pre></div>
<pre><code>## Rows: 1,924,665
## Columns: 8
## $ year       &lt;dbl&gt; 1880, 1880, 1880, 1880, 1880, 1880, 1880, 1880, 1880, 1880,…
## $ sex        &lt;chr&gt; &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;,…
## $ name       &lt;chr&gt; &quot;Mary&quot;, &quot;Anna&quot;, &quot;Emma&quot;, &quot;Elizabeth&quot;, &quot;Minnie&quot;, &quot;Margaret&quot;, …
## $ n          &lt;int&gt; 7065, 2604, 2003, 1939, 1746, 1578, 1472, 1414, 1320, 1288,…
## $ prop       &lt;dbl&gt; 0.07238359, 0.02667896, 0.02052149, 0.01986579, 0.01788843,…
## $ Decade     &lt;dbl&gt; 1880, 1880, 1880, 1880, 1880, 1880, 1880, 1880, 1880, 1880,…
## $ MinName    &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FAL…
## $ `20thCent` &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FAL…</code></pre>
<div class="solved">
<p>
You may have noticed we needed to put the name of our new column
<code>“20thCent”</code> inside quotation marks. This is because that
name would begin with numeric values which R will interpret as numeric
values to be evaluated as code by default, which will then break our
code. By placeing the name within quotation marks this tells R to treat
this as a standard character string instead. It is always best to avoid
creating variables with names that start with a number for this reason,
but if it is necessary this is how you can work around it.
</p>
</div>
<div class="task">
<p>
<strong>Your turn</strong>
</p>
<ul>
<li>
Add a new column to <code>Name_Ext3</code> that is called
<code>Prcnt</code> that gives the percentage each name accounts for of
total names that year. *Hint: <code>prop</code> is that same stat
represented as a proportion.
</li>
</ul>
</div>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="basic-data-manipulation.html#cb165-1" tabindex="-1"></a>Name_Ext4 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(Name_Ext3, <span class="at">Prcnt =</span> prop <span class="sc">*</span> <span class="dv">100</span>)</span>
<span id="cb165-2"><a href="basic-data-manipulation.html#cb165-2" tabindex="-1"></a><span class="fu">glimpse</span>(Name_Ext4)</span></code></pre></div>
<pre><code>## Rows: 1,924,665
## Columns: 9
## $ year       &lt;dbl&gt; 1880, 1880, 1880, 1880, 1880, 1880, 1880, 1880, 1880, 1880,…
## $ sex        &lt;chr&gt; &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;,…
## $ name       &lt;chr&gt; &quot;Mary&quot;, &quot;Anna&quot;, &quot;Emma&quot;, &quot;Elizabeth&quot;, &quot;Minnie&quot;, &quot;Margaret&quot;, …
## $ n          &lt;int&gt; 7065, 2604, 2003, 1939, 1746, 1578, 1472, 1414, 1320, 1288,…
## $ prop       &lt;dbl&gt; 0.07238359, 0.02667896, 0.02052149, 0.01986579, 0.01788843,…
## $ Decade     &lt;dbl&gt; 1880, 1880, 1880, 1880, 1880, 1880, 1880, 1880, 1880, 1880,…
## $ MinName    &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FAL…
## $ `20thCent` &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FAL…
## $ Prcnt      &lt;dbl&gt; 7.238359, 2.667896, 2.052149, 1.986579, 1.788843, 1.616720,…</code></pre>
</div>
<div id="read-in-second-dataset" class="section level3 hasAnchor" number="3.7.1">
<h3><span class="header-section-number">3.7.1</span> Read in second dataset<a href="basic-data-manipulation.html#read-in-second-dataset" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>At this point we are reaching the end of the usefulness of the Babynames dataset (there is only so much you can do with 5 basic variables), and this is a good time to bring in the second dataset we mentioned.</p>
<p>The second dataset, is a set of career and performance statistics of MMA athletes. You need to read the file <code>CareerStats.csv</code> containing your data into your <code>Global Environment</code> using the function <code>read_csv()</code>. Remember to store your data in an appropriately named object (e.g. <code>MMA_Data</code>).</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="basic-data-manipulation.html#cb167-1" tabindex="-1"></a>MMA_Data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/CareerStats.csv&quot;</span>)</span></code></pre></div>
<pre><code>## Rows: 199 Columns: 32
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr  (5): ID, HeightClass, ReachClass, Stance, WeightClass
## dbl (27): Age, Height, Weight, BMI, Reach, T_Wins, T_Losses, T_Fights, Succe...
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<div class="info">
<p>
As you can see this dataset has a lot more variables, which should
make for more interesting ways of manipulating the data.
</p>
</div>
</div>
</div>
<div id="summarise" class="section level2 hasAnchor" number="3.8">
<h2><span class="header-section-number">3.8</span> summarise()<a href="basic-data-manipulation.html#summarise" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In order to compute summary statistics such as mean, median and standard deviation, use the <code>summarise()</code> function. This function creates a new tibble of your desired summary statistics. The first argument to this function is the data you are interested in summarising; in this case the object <code>MMA_Data</code>, and the subsequent argument is the new column name and what mathematical operation you want it to contain. You can add as many summary statistics in one <code>summarise()</code> function as you want; just separate them by a comma.</p>
<div class="info">
<p>
You can use the help function to find out more about the kind of
summary stats you can extract.
</p>
<p>
Some of the most useful however are: <code>sum()</code> - sum total
<code>n()</code> - count of observations <code>n_distinct()</code> -
count of distinct (unique) observations <code>mean()</code> - measure of
central tendency; mean <code>median()</code> - measure of central
tendency; median <code>sd()</code> - standard deviation
<code>IQR()</code> - interquartile range <code>min()</code> - the
maximum available value in observations <code>max()</code> - the minimum
available value in observations
</p>
</div>
<p>Lets start generating some summary stats. For example, say you want to work out the average number of total fights (<code>T_Fights</code>) among the athletes and accompanying standard deviation for the entire sample:</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="basic-data-manipulation.html#cb169-1" tabindex="-1"></a><span class="fu">summarise</span>(MMA_Data, <span class="at">Avg_Mean =</span> <span class="fu">mean</span>(T_Fights), <span class="at">SD =</span> <span class="fu">sd</span>(T_Fights))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##   Avg_Mean    SD
##      &lt;dbl&gt; &lt;dbl&gt;
## 1     23.0  9.80</code></pre>
<p>Therefore, the average number of total fights for all the athletes in our sample is 22.98, with a standard deviation of 9.8.</p>
<p>Let’s try another. what is the maximum and minimum hights for the entire sample?</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="basic-data-manipulation.html#cb171-1" tabindex="-1"></a><span class="fu">summarise</span>(MMA_Data, <span class="at">Minimum =</span> <span class="fu">min</span>(Height), <span class="at">Maximum =</span> <span class="fu">max</span>(Height))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##   Minimum Maximum
##     &lt;dbl&gt;   &lt;dbl&gt;
## 1      63      83</code></pre>
<p>Or maybe we want to know how many different (distinct) weightclasses are there in our dataset?</p>
<p>How would we check that?</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="basic-data-manipulation.html#cb173-1" tabindex="-1"></a><span class="fu">summarise</span>(MMA_Data, <span class="at">WeightClasses =</span> <span class="fu">n_distinct</span>(WeightClass))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 1
##   WeightClasses
##           &lt;int&gt;
## 1             8</code></pre>
</div>
<div id="adding-group_by" class="section level2 hasAnchor" number="3.9">
<h2><span class="header-section-number">3.9</span> Adding group_by()<a href="basic-data-manipulation.html#adding-group_by" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Now that’s all well and good, but in research we are most often interested in drawing comparisons and analysing differences (Between different groups of people, between different treatment types, between different countries etc.).</p>
<p>This is where the <code>group_by()</code> function comes in handy. It can organise observations (rows) by variables (columns), thereby spliting the data up into subsets that can be analysed independently. The first argument to this function is the data you wish to organise, in this case <code>MMA_Data</code> and the subsequent argument is your chosen grouping variable you want to organise by (e.g. group by). Here we are grouping by weightclass, and saving this as a new object <code>MMA_G_Weight</code>;</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="basic-data-manipulation.html#cb175-1" tabindex="-1"></a>MMA_G_Weight <span class="ot">&lt;-</span> <span class="fu">group_by</span>(MMA_Data, WeightClass)</span></code></pre></div>
<p>If you view the object <code>MMA_G_Class</code>, it will not look any different to the original dataset (<code>MMA_Data</code>). However, be aware that the underlying structure has changed. In fact, you could use <code>glimpse()</code> to double check this.</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="basic-data-manipulation.html#cb176-1" tabindex="-1"></a><span class="fu">glimpse</span>(MMA_G_Weight)</span></code></pre></div>
<pre><code>## Rows: 199
## Columns: 32
## Groups: WeightClass [8]
## $ ID            &lt;chr&gt; &quot;056c493bbd76a918&quot;, &quot;b102c26727306ab6&quot;, &quot;80eacd4da0617c5…
## $ Age           &lt;dbl&gt; 31.88, 33.70, 34.41, 25.39, 31.02, 34.77, 33.97, 28.70, …
## $ Height        &lt;dbl&gt; 64, 65, 64, 64, 65, 66, 64, 65, 65, 66, 67, 65, 68, 65, …
## $ HeightClass   &lt;chr&gt; &quot;Short&quot;, &quot;Short&quot;, &quot;Short&quot;, &quot;Short&quot;, &quot;Short&quot;, &quot;Average&quot;, …
## $ Weight        &lt;dbl&gt; 125, 125, 125, 125, 125, 125, 125, 125, 125, 125, 135, 1…
## $ BMI           &lt;dbl&gt; 21.454, 20.799, 21.454, 21.454, 20.799, 20.173, 21.454, …
## $ Reach         &lt;dbl&gt; 64, 67, 65, 63, 68, 66, 65, 67, 65, 65, 66, 65, 70, 68, …
## $ ReachClass    &lt;chr&gt; &quot;Below&quot;, &quot;Below&quot;, &quot;Below&quot;, &quot;Below&quot;, &quot;Below&quot;, &quot;Below&quot;, &quot;B…
## $ Stance        &lt;chr&gt; &quot;Orthodox&quot;, &quot;Orthodox&quot;, &quot;Southpaw&quot;, &quot;Orthodox&quot;, &quot;Orthodo…
## $ WeightClass   &lt;chr&gt; &quot;Flywieght&quot;, &quot;Flywieght&quot;, &quot;Flywieght&quot;, &quot;Flywieght&quot;, &quot;Fly…
## $ T_Wins        &lt;dbl&gt; 13, 22, 26, 11, 15, 19, 23, 20, 19, 21, 15, 14, 12, 10, …
## $ T_Losses      &lt;dbl&gt; 2, 5, 5, 3, 0, 7, 9, 3, 7, 5, 8, 1, 1, 5, 5, 4, 5, 2, 2,…
## $ T_Fights      &lt;dbl&gt; 15, 27, 31, 14, 15, 26, 32, 23, 26, 26, 24, 15, 13, 15, …
## $ Success       &lt;dbl&gt; 0.867, 0.815, 0.839, 0.786, 1.000, 0.731, 0.719, 0.870, …
## $ W_by_Decision &lt;dbl&gt; 8, 12, 10, 4, 2, 8, 13, 6, 7, 11, 6, 7, 7, 1, 5, 3, 3, 5…
## $ `W_by_KO/TKO` &lt;dbl&gt; 5, 10, 7, 1, 8, 8, 0, 6, 8, 4, 3, 2, 2, 8, 2, 2, 1, 4, 2…
## $ W_by_Sub      &lt;dbl&gt; 0, 0, 9, 6, 5, 3, 10, 8, 4, 6, 6, 5, 3, 1, 5, 6, 10, 4, …
## $ L_by_Decision &lt;dbl&gt; 1, 3, 4, 2, 0, 4, 5, 3, 6, 1, 4, 0, 1, 3, 5, 1, 5, 0, 1,…
## $ `L_by_KO/TKO` &lt;dbl&gt; 1, 2, 1, 0, 0, 2, 3, 0, 0, 1, 1, 1, 0, 0, 0, 2, 0, 2, 1,…
## $ L_by_Sub      &lt;dbl&gt; 0, 0, 0, 1, 0, 1, 1, 0, 1, 3, 3, 0, 0, 2, 0, 1, 0, 0, 0,…
## $ PWDec         &lt;dbl&gt; 0.533, 0.444, 0.323, 0.286, 0.133, 0.308, 0.406, 0.261, …
## $ PWTko         &lt;dbl&gt; 0.333, 0.370, 0.226, 0.071, 0.533, 0.308, 0.000, 0.261, …
## $ PWSub         &lt;dbl&gt; 0.000, 0.000, 0.290, 0.429, 0.333, 0.115, 0.312, 0.348, …
## $ PLDec         &lt;dbl&gt; 0.067, 0.111, 0.129, 0.143, 0.000, 0.154, 0.156, 0.130, …
## $ PLTko         &lt;dbl&gt; 0.067, 0.074, 0.032, 0.000, 0.000, 0.077, 0.094, 0.000, …
## $ PLSub         &lt;dbl&gt; 0.000, 0.000, 0.000, 0.071, 0.000, 0.038, 0.031, 0.000, …
## $ Available     &lt;dbl&gt; 9, 12, 24, 8, 4, 14, 12, 5, 15, 4, 10, 2, 1, 6, 5, 4, 5,…
## $ TTime         &lt;dbl&gt; 123.234, 137.034, 278.699, 113.466, 42.700, 168.316, 145…
## $ Time_Avg      &lt;dbl&gt; 13.693, 11.419, 11.612, 14.183, 10.675, 12.023, 12.127, …
## $ TLpM          &lt;dbl&gt; 5.461, 3.196, 4.410, 2.732, 3.115, 3.624, 3.828, 5.851, …
## $ AbpM          &lt;dbl&gt; 2.605, 2.167, 2.515, 1.921, 1.616, 2.549, 2.948, 3.377, …
## $ SubAtt_Avg    &lt;dbl&gt; 0.122, 0.657, 0.700, 1.454, 3.864, 1.069, 0.618, 1.755, …</code></pre>
<p>You can now feed this grouped dataset (<code>MMA_G_Weight</code>) into the previous code line to obtain summary statistics by <code>WeightClass</code>, the code for finding summary statistics of average number of total fights, has been provided.:</p>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="basic-data-manipulation.html#cb178-1" tabindex="-1"></a>Sum_Fights <span class="ot">&lt;-</span> <span class="fu">summarise</span>(MMA_G_Weight, <span class="at">Avg_Mean =</span> <span class="fu">mean</span>(T_Fights), <span class="at">SD =</span> <span class="fu">sd</span>(T_Fights))</span></code></pre></div>
<p><span style="font-size: 22px; font-weight: bold; color: hsl(24, 100%, 50%);">Question Time</span></p>
<p>Which weightclass has the highest maximum height? <input class='webex-solveme nospaces' size='11' data-answer='["Heavyweight"]'/></p>
<div class="task">
<p>
<strong>Your turn</strong>
</p>
<ul>
<li>
Try to fill out the code for finding summary stats of minimum and
maximum height by <code>WeightClass</code>:
</li>
</ul>
</div>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="basic-data-manipulation.html#cb179-1" tabindex="-1"></a>Sum_Height <span class="ot">&lt;-</span> <span class="fu">summarise</span>(MMA_G_Weight, <span class="at">Minimum =</span> <span class="fu">min</span>(Height), <span class="at">Maximum =</span> <span class="fu">max</span>(Height))</span></code></pre></div>
</div>
<div class="info">
<p>
You can technically group by any variable! For example, there is
nothing stopping you from grouping by a continuous variable like age or
height. R will allow you to group by a numerical variable that is type
double, the code will run.
</p>
<p>
However you probably want to be more careful in choosing a
categorical variable as grouping criteria. These will usually be
character, or interger or even logical data types. However interger data
type might also actually represent a continuous variable (but might have
only been recorded in whole numbers), and a variable that is character
type may not represent a useful category (like idividual ID’s for
example).
</p>
<p>
The point is R does not know what your dataset is actually about, and
what your variables are meant to represent… R has no idea if your
variable <em>should</em> be categorical or not. So it’s up to you to
know what are sensible variables to use in the <code>group_by()</code>
function.
</p>
</div>
<p>You might also want to calculate and display the number of individuals from your dataset that are in different groups. This can be achieved by adding the summary function <code>n()</code> once you have grouped your data. the function <code>n()</code>, simply counts the number of observations and takes no arguments. Here we will group by <code>Stance</code> and count the number of athelets in each category:</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="basic-data-manipulation.html#cb180-1" tabindex="-1"></a>MMA_G_Stance <span class="ot">&lt;-</span> <span class="fu">group_by</span>(MMA_Data, Stance)</span>
<span id="cb180-2"><a href="basic-data-manipulation.html#cb180-2" tabindex="-1"></a></span>
<span id="cb180-3"><a href="basic-data-manipulation.html#cb180-3" tabindex="-1"></a>Stance_Ns <span class="ot">&lt;-</span> <span class="fu">summarise</span>(MMA_G_Stance, <span class="at">N =</span> <span class="fu">n</span>())</span>
<span id="cb180-4"><a href="basic-data-manipulation.html#cb180-4" tabindex="-1"></a>Stance_Ns</span></code></pre></div>
<pre><code>## # A tibble: 3 × 2
##   Stance       N
##   &lt;chr&gt;    &lt;int&gt;
## 1 Orthodox   140
## 2 Southpaw    45
## 3 Switch      14</code></pre>
<p><span style="font-size: 22px; font-weight: bold; color: hsl(24, 100%, 50%);">Question Time</span></p>
<p>How many athletes in the dataset have a Southpaw stance? <input class='webex-solveme nospaces' size='2' data-answer='["45"]'/> <br>
How many athletes in the dataset have an Orthodox stance? <input class='webex-solveme nospaces' size='3' data-answer='["140"]'/></p>
<p>Finally, it is possible to add multiple grouping variables. For example, the following code groups <code>MMA_Data</code> by <code>ReachClass</code> and <code>Stance</code> and then calculates the mean and standard deviation of average number of strikes landed per minute (<code>TLpM</code>) for each group (6 groups).</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="basic-data-manipulation.html#cb182-1" tabindex="-1"></a>MMA_G_RS <span class="ot">&lt;-</span> <span class="fu">group_by</span>(MMA_Data, ReachClass, Stance)</span>
<span id="cb182-2"><a href="basic-data-manipulation.html#cb182-2" tabindex="-1"></a>MMA_LpM <span class="ot">&lt;-</span> <span class="fu">summarise</span>(MMA_G_RS, <span class="at">Mean =</span> <span class="fu">mean</span>(TLpM), <span class="at">SD =</span> <span class="fu">sd</span>(TLpM))</span></code></pre></div>
<pre><code>## `summarise()` has grouped output by &#39;ReachClass&#39;. You can override using the
## `.groups` argument.</code></pre>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="basic-data-manipulation.html#cb184-1" tabindex="-1"></a>MMA_LpM</span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
## # Groups:   ReachClass [2]
##   ReachClass Stance    Mean    SD
##   &lt;chr&gt;      &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt;
## 1 Above      Orthodox  5.44  1.66
## 2 Above      Southpaw  4.68  1.16
## 3 Above      Switch    5.92  1.29
## 4 Below      Orthodox  5.33  1.60
## 5 Below      Southpaw  5.02  1.47
## 6 Below      Switch    5.95  3.63</code></pre>
<p>So far we have not had to calculate any summary statistics with any missing values, denoted by <code>NA</code> in R. Missing values are always a bit of a hassle to deal with. Any computation you do that involves <code>NA</code> returns an <code>NA</code> - which translates as “you will not get a numeric result when your column contains missing values”. Missing values can be removed by adding the argument <code>na.rm = TRUE</code> to calculation functions like <code>mean()</code>, <code>median()</code> or <code>sd()</code>. For example, lets try to calulate a mean where we have some missing values:</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="basic-data-manipulation.html#cb186-1" tabindex="-1"></a>Weight_Reach <span class="ot">&lt;-</span> <span class="fu">summarise</span>(MMA_G_Weight, <span class="at">Avg_Reach =</span> <span class="fu">mean</span>(Reach))</span>
<span id="cb186-2"><a href="basic-data-manipulation.html#cb186-2" tabindex="-1"></a>Weight_Reach</span></code></pre></div>
<pre><code>## # A tibble: 8 × 2
##   WeightClass      Avg_Reach
##   &lt;chr&gt;                &lt;dbl&gt;
## 1 Bantamweight          67.8
## 2 Fetherweight          71.0
## 3 Flywieght             66.9
## 4 Heavyweight           NA  
## 5 LightHeavyweight      76.9
## 6 Lightweight           72.6
## 7 Middleweight          NA  
## 8 Welterweight          74</code></pre>
<p>The code runs without error, however you will notice we have a few stats missing (<code>NA</code>). Now lets tell R to remove any missing values when making its calculation.</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="basic-data-manipulation.html#cb188-1" tabindex="-1"></a>Weight_Reach <span class="ot">&lt;-</span> <span class="fu">summarise</span>(MMA_G_Weight, <span class="at">Avg_Reach =</span> <span class="fu">mean</span>(Reach, <span class="at">na.rm =</span> T))</span>
<span id="cb188-2"><a href="basic-data-manipulation.html#cb188-2" tabindex="-1"></a>Weight_Reach</span></code></pre></div>
<pre><code>## # A tibble: 8 × 2
##   WeightClass      Avg_Reach
##   &lt;chr&gt;                &lt;dbl&gt;
## 1 Bantamweight          67.8
## 2 Fetherweight          71.0
## 3 Flywieght             66.9
## 4 Heavyweight           78.0
## 5 LightHeavyweight      76.9
## 6 Lightweight           72.6
## 7 Middleweight          75.4
## 8 Welterweight          74</code></pre>
<div class="info">
<p>
Finally… If you need to return the data to a non-grouped form, use
the <code>ungroup()</code> function.
</p>
</div>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="basic-data-manipulation.html#cb190-1" tabindex="-1"></a>MMA_Data <span class="ot">&lt;-</span> <span class="fu">group_by</span>(MMA_Data, BMI)</span>
<span id="cb190-2"><a href="basic-data-manipulation.html#cb190-2" tabindex="-1"></a><span class="fu">glimpse</span>(MMA_Data)</span></code></pre></div>
<pre><code>## Rows: 199
## Columns: 32
## Groups: BMI [70]
## $ ID            &lt;chr&gt; &quot;056c493bbd76a918&quot;, &quot;b102c26727306ab6&quot;, &quot;80eacd4da0617c5…
## $ Age           &lt;dbl&gt; 31.88, 33.70, 34.41, 25.39, 31.02, 34.77, 33.97, 28.70, …
## $ Height        &lt;dbl&gt; 64, 65, 64, 64, 65, 66, 64, 65, 65, 66, 67, 65, 68, 65, …
## $ HeightClass   &lt;chr&gt; &quot;Short&quot;, &quot;Short&quot;, &quot;Short&quot;, &quot;Short&quot;, &quot;Short&quot;, &quot;Average&quot;, …
## $ Weight        &lt;dbl&gt; 125, 125, 125, 125, 125, 125, 125, 125, 125, 125, 135, 1…
## $ BMI           &lt;dbl&gt; 21.454, 20.799, 21.454, 21.454, 20.799, 20.173, 21.454, …
## $ Reach         &lt;dbl&gt; 64, 67, 65, 63, 68, 66, 65, 67, 65, 65, 66, 65, 70, 68, …
## $ ReachClass    &lt;chr&gt; &quot;Below&quot;, &quot;Below&quot;, &quot;Below&quot;, &quot;Below&quot;, &quot;Below&quot;, &quot;Below&quot;, &quot;B…
## $ Stance        &lt;chr&gt; &quot;Orthodox&quot;, &quot;Orthodox&quot;, &quot;Southpaw&quot;, &quot;Orthodox&quot;, &quot;Orthodo…
## $ WeightClass   &lt;chr&gt; &quot;Flywieght&quot;, &quot;Flywieght&quot;, &quot;Flywieght&quot;, &quot;Flywieght&quot;, &quot;Fly…
## $ T_Wins        &lt;dbl&gt; 13, 22, 26, 11, 15, 19, 23, 20, 19, 21, 15, 14, 12, 10, …
## $ T_Losses      &lt;dbl&gt; 2, 5, 5, 3, 0, 7, 9, 3, 7, 5, 8, 1, 1, 5, 5, 4, 5, 2, 2,…
## $ T_Fights      &lt;dbl&gt; 15, 27, 31, 14, 15, 26, 32, 23, 26, 26, 24, 15, 13, 15, …
## $ Success       &lt;dbl&gt; 0.867, 0.815, 0.839, 0.786, 1.000, 0.731, 0.719, 0.870, …
## $ W_by_Decision &lt;dbl&gt; 8, 12, 10, 4, 2, 8, 13, 6, 7, 11, 6, 7, 7, 1, 5, 3, 3, 5…
## $ `W_by_KO/TKO` &lt;dbl&gt; 5, 10, 7, 1, 8, 8, 0, 6, 8, 4, 3, 2, 2, 8, 2, 2, 1, 4, 2…
## $ W_by_Sub      &lt;dbl&gt; 0, 0, 9, 6, 5, 3, 10, 8, 4, 6, 6, 5, 3, 1, 5, 6, 10, 4, …
## $ L_by_Decision &lt;dbl&gt; 1, 3, 4, 2, 0, 4, 5, 3, 6, 1, 4, 0, 1, 3, 5, 1, 5, 0, 1,…
## $ `L_by_KO/TKO` &lt;dbl&gt; 1, 2, 1, 0, 0, 2, 3, 0, 0, 1, 1, 1, 0, 0, 0, 2, 0, 2, 1,…
## $ L_by_Sub      &lt;dbl&gt; 0, 0, 0, 1, 0, 1, 1, 0, 1, 3, 3, 0, 0, 2, 0, 1, 0, 0, 0,…
## $ PWDec         &lt;dbl&gt; 0.533, 0.444, 0.323, 0.286, 0.133, 0.308, 0.406, 0.261, …
## $ PWTko         &lt;dbl&gt; 0.333, 0.370, 0.226, 0.071, 0.533, 0.308, 0.000, 0.261, …
## $ PWSub         &lt;dbl&gt; 0.000, 0.000, 0.290, 0.429, 0.333, 0.115, 0.312, 0.348, …
## $ PLDec         &lt;dbl&gt; 0.067, 0.111, 0.129, 0.143, 0.000, 0.154, 0.156, 0.130, …
## $ PLTko         &lt;dbl&gt; 0.067, 0.074, 0.032, 0.000, 0.000, 0.077, 0.094, 0.000, …
## $ PLSub         &lt;dbl&gt; 0.000, 0.000, 0.000, 0.071, 0.000, 0.038, 0.031, 0.000, …
## $ Available     &lt;dbl&gt; 9, 12, 24, 8, 4, 14, 12, 5, 15, 4, 10, 2, 1, 6, 5, 4, 5,…
## $ TTime         &lt;dbl&gt; 123.234, 137.034, 278.699, 113.466, 42.700, 168.316, 145…
## $ Time_Avg      &lt;dbl&gt; 13.693, 11.419, 11.612, 14.183, 10.675, 12.023, 12.127, …
## $ TLpM          &lt;dbl&gt; 5.461, 3.196, 4.410, 2.732, 3.115, 3.624, 3.828, 5.851, …
## $ AbpM          &lt;dbl&gt; 2.605, 2.167, 2.515, 1.921, 1.616, 2.549, 2.948, 3.377, …
## $ SubAtt_Avg    &lt;dbl&gt; 0.122, 0.657, 0.700, 1.454, 3.864, 1.069, 0.618, 1.755, …</code></pre>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="basic-data-manipulation.html#cb192-1" tabindex="-1"></a>MMA_Data <span class="ot">&lt;-</span> <span class="fu">ungroup</span>(MMA_Data)</span>
<span id="cb192-2"><a href="basic-data-manipulation.html#cb192-2" tabindex="-1"></a><span class="fu">glimpse</span>(MMA_Data)</span></code></pre></div>
<pre><code>## Rows: 199
## Columns: 32
## $ ID            &lt;chr&gt; &quot;056c493bbd76a918&quot;, &quot;b102c26727306ab6&quot;, &quot;80eacd4da0617c5…
## $ Age           &lt;dbl&gt; 31.88, 33.70, 34.41, 25.39, 31.02, 34.77, 33.97, 28.70, …
## $ Height        &lt;dbl&gt; 64, 65, 64, 64, 65, 66, 64, 65, 65, 66, 67, 65, 68, 65, …
## $ HeightClass   &lt;chr&gt; &quot;Short&quot;, &quot;Short&quot;, &quot;Short&quot;, &quot;Short&quot;, &quot;Short&quot;, &quot;Average&quot;, …
## $ Weight        &lt;dbl&gt; 125, 125, 125, 125, 125, 125, 125, 125, 125, 125, 135, 1…
## $ BMI           &lt;dbl&gt; 21.454, 20.799, 21.454, 21.454, 20.799, 20.173, 21.454, …
## $ Reach         &lt;dbl&gt; 64, 67, 65, 63, 68, 66, 65, 67, 65, 65, 66, 65, 70, 68, …
## $ ReachClass    &lt;chr&gt; &quot;Below&quot;, &quot;Below&quot;, &quot;Below&quot;, &quot;Below&quot;, &quot;Below&quot;, &quot;Below&quot;, &quot;B…
## $ Stance        &lt;chr&gt; &quot;Orthodox&quot;, &quot;Orthodox&quot;, &quot;Southpaw&quot;, &quot;Orthodox&quot;, &quot;Orthodo…
## $ WeightClass   &lt;chr&gt; &quot;Flywieght&quot;, &quot;Flywieght&quot;, &quot;Flywieght&quot;, &quot;Flywieght&quot;, &quot;Fly…
## $ T_Wins        &lt;dbl&gt; 13, 22, 26, 11, 15, 19, 23, 20, 19, 21, 15, 14, 12, 10, …
## $ T_Losses      &lt;dbl&gt; 2, 5, 5, 3, 0, 7, 9, 3, 7, 5, 8, 1, 1, 5, 5, 4, 5, 2, 2,…
## $ T_Fights      &lt;dbl&gt; 15, 27, 31, 14, 15, 26, 32, 23, 26, 26, 24, 15, 13, 15, …
## $ Success       &lt;dbl&gt; 0.867, 0.815, 0.839, 0.786, 1.000, 0.731, 0.719, 0.870, …
## $ W_by_Decision &lt;dbl&gt; 8, 12, 10, 4, 2, 8, 13, 6, 7, 11, 6, 7, 7, 1, 5, 3, 3, 5…
## $ `W_by_KO/TKO` &lt;dbl&gt; 5, 10, 7, 1, 8, 8, 0, 6, 8, 4, 3, 2, 2, 8, 2, 2, 1, 4, 2…
## $ W_by_Sub      &lt;dbl&gt; 0, 0, 9, 6, 5, 3, 10, 8, 4, 6, 6, 5, 3, 1, 5, 6, 10, 4, …
## $ L_by_Decision &lt;dbl&gt; 1, 3, 4, 2, 0, 4, 5, 3, 6, 1, 4, 0, 1, 3, 5, 1, 5, 0, 1,…
## $ `L_by_KO/TKO` &lt;dbl&gt; 1, 2, 1, 0, 0, 2, 3, 0, 0, 1, 1, 1, 0, 0, 0, 2, 0, 2, 1,…
## $ L_by_Sub      &lt;dbl&gt; 0, 0, 0, 1, 0, 1, 1, 0, 1, 3, 3, 0, 0, 2, 0, 1, 0, 0, 0,…
## $ PWDec         &lt;dbl&gt; 0.533, 0.444, 0.323, 0.286, 0.133, 0.308, 0.406, 0.261, …
## $ PWTko         &lt;dbl&gt; 0.333, 0.370, 0.226, 0.071, 0.533, 0.308, 0.000, 0.261, …
## $ PWSub         &lt;dbl&gt; 0.000, 0.000, 0.290, 0.429, 0.333, 0.115, 0.312, 0.348, …
## $ PLDec         &lt;dbl&gt; 0.067, 0.111, 0.129, 0.143, 0.000, 0.154, 0.156, 0.130, …
## $ PLTko         &lt;dbl&gt; 0.067, 0.074, 0.032, 0.000, 0.000, 0.077, 0.094, 0.000, …
## $ PLSub         &lt;dbl&gt; 0.000, 0.000, 0.000, 0.071, 0.000, 0.038, 0.031, 0.000, …
## $ Available     &lt;dbl&gt; 9, 12, 24, 8, 4, 14, 12, 5, 15, 4, 10, 2, 1, 6, 5, 4, 5,…
## $ TTime         &lt;dbl&gt; 123.234, 137.034, 278.699, 113.466, 42.700, 168.316, 145…
## $ Time_Avg      &lt;dbl&gt; 13.693, 11.419, 11.612, 14.183, 10.675, 12.023, 12.127, …
## $ TLpM          &lt;dbl&gt; 5.461, 3.196, 4.410, 2.732, 3.115, 3.624, 3.828, 5.851, …
## $ AbpM          &lt;dbl&gt; 2.605, 2.167, 2.515, 1.921, 1.616, 2.549, 2.948, 3.377, …
## $ SubAtt_Avg    &lt;dbl&gt; 0.122, 0.657, 0.700, 1.454, 3.864, 1.069, 0.618, 1.755, …</code></pre>
</div>
<div id="pipes" class="section level2 hasAnchor" number="3.10">
<h2><span class="header-section-number">3.10</span> The pipe operator (%&gt;%)<a href="basic-data-manipulation.html#pipes" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>As you may have noticed, your environment pane has become increasingly cluttered. Indeed, every time you introduced a new line of code, you created a uniquely-named object (unless your original object is overwritten). This can become confusing and time-consuming. One solution is the pipe operator (<code>%&gt;%</code>) which aims to increase efficiency and improve the readability of your code. The pipe operator (<code>%&gt;%</code>) read as <strong>“and then”</strong> allows you to chain functions together, eliminating the need to create intermediary objects. This creates a “pipeline”, allowing the “flow” of data between lines of code, as the output of one function “flows” into the next function. There is no limit as to how many functions you can chain together in a single pipeline.</p>
<p>For example, in order to <code>filter()</code>, <code>group_by()</code> and <code>summarise()</code> the data, you would have used the following code lines:</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="basic-data-manipulation.html#cb194-1" tabindex="-1"></a>Example_6a <span class="ot">&lt;-</span> <span class="fu">filter</span>(MMA_Data, ReachClass <span class="sc">==</span> <span class="st">&quot;Above&quot;</span>)</span>
<span id="cb194-2"><a href="basic-data-manipulation.html#cb194-2" tabindex="-1"></a>Example_6b <span class="ot">&lt;-</span> <span class="fu">group_by</span>(Example_6a, WeightClass)</span>
<span id="cb194-3"><a href="basic-data-manipulation.html#cb194-3" tabindex="-1"></a>Example_6c <span class="ot">&lt;-</span> <span class="fu">summarise</span>(Example_6b, <span class="at">MeanSub =</span> <span class="fu">mean</span>(SubAtt_Avg))</span>
<span id="cb194-4"><a href="basic-data-manipulation.html#cb194-4" tabindex="-1"></a>Example_6c</span></code></pre></div>
<pre><code>## # A tibble: 6 × 2
##   WeightClass      MeanSub
##   &lt;chr&gt;              &lt;dbl&gt;
## 1 Fetherweight       0.395
## 2 Heavyweight        0.521
## 3 LightHeavyweight   0.613
## 4 Lightweight        0.757
## 5 Middleweight       0.498
## 6 Welterweight       0.520</code></pre>
<p>However, utilisation of the pipe operator (<code>%&gt;%</code>) can simplify this process and create only one object (<code>Example_7</code>) as shown:</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="basic-data-manipulation.html#cb196-1" tabindex="-1"></a>Example_7 <span class="ot">&lt;-</span> MMA_Data <span class="sc">%&gt;%</span></span>
<span id="cb196-2"><a href="basic-data-manipulation.html#cb196-2" tabindex="-1"></a>  <span class="fu">filter</span>(ReachClass <span class="sc">==</span> <span class="st">&quot;Above&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb196-3"><a href="basic-data-manipulation.html#cb196-3" tabindex="-1"></a>  <span class="fu">group_by</span>(WeightClass) <span class="sc">%&gt;%</span></span>
<span id="cb196-4"><a href="basic-data-manipulation.html#cb196-4" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">MeanSub =</span> <span class="fu">mean</span>(SubAtt_Avg))</span>
<span id="cb196-5"><a href="basic-data-manipulation.html#cb196-5" tabindex="-1"></a>Example_7</span></code></pre></div>
<pre><code>## # A tibble: 6 × 2
##   WeightClass      MeanSub
##   &lt;chr&gt;              &lt;dbl&gt;
## 1 Fetherweight       0.395
## 2 Heavyweight        0.521
## 3 LightHeavyweight   0.613
## 4 Lightweight        0.757
## 5 Middleweight       0.498
## 6 Welterweight       0.520</code></pre>
<p>As you can see, <code>Example_7</code> produces the same output as <code>Example_6c</code>. So, pipes automatically take the output from one function and feed it directly to the next function. Without pipes, you needed to insert your chosen dataset as the first argument to every function. With pipes, you are only required to specify the original dataset (i.e <code>MMA_Data</code>) once at the beginning of the pipeline, and removes the need to create unnecessary intermediary objects. You now no longer need the first argument of each of the subsequent functions anymore, because the pipe will know to look at the output from the previous step in the pipeline.</p>
<div class="task">
<p>
<strong>Your turn</strong>
</p>
<p>
Amend all of your code from Question8 and turn it into a single
pipeline Save this as an object called <code>Q9</code> to your
<code>Global Environment</code>.
</p>
</div>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="basic-data-manipulation.html#cb198-1" tabindex="-1"></a><span class="co">#Jaimie&#39;s solution</span></span>
<span id="cb198-2"><a href="basic-data-manipulation.html#cb198-2" tabindex="-1"></a>Q9 <span class="ot">&lt;-</span> MMA_Data <span class="sc">%&gt;%</span></span>
<span id="cb198-3"><a href="basic-data-manipulation.html#cb198-3" tabindex="-1"></a>  <span class="fu">select</span>(ID, WeightClass, Stance, T_Wins, W_by_Decision, <span class="st">&quot;W_by_KO/TKO&quot;</span>, W_by_Sub) <span class="sc">%&gt;%</span></span>
<span id="cb198-4"><a href="basic-data-manipulation.html#cb198-4" tabindex="-1"></a>  <span class="fu">filter</span>(Stance <span class="sc">!=</span> <span class="st">&quot;Southpaw&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb198-5"><a href="basic-data-manipulation.html#cb198-5" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Perc_W_by_Dec =</span> (W_by_Decision<span class="sc">/</span>T_Wins)<span class="sc">*</span><span class="dv">100</span>) <span class="sc">%&gt;%</span></span>
<span id="cb198-6"><a href="basic-data-manipulation.html#cb198-6" tabindex="-1"></a>  <span class="fu">group_by</span>(WeightClass) <span class="sc">%&gt;%</span></span>
<span id="cb198-7"><a href="basic-data-manipulation.html#cb198-7" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">AvgPercDec =</span> <span class="fu">mean</span>(Perc_W_by_Dec))</span>
<span id="cb198-8"><a href="basic-data-manipulation.html#cb198-8" tabindex="-1"></a>Q9</span></code></pre></div>
<pre><code>## # A tibble: 8 × 2
##   WeightClass      AvgPercDec
##   &lt;chr&gt;                 &lt;dbl&gt;
## 1 Bantamweight           37.5
## 2 Fetherweight           35.8
## 3 Flywieght              36.7
## 4 Heavyweight            19.4
## 5 LightHeavyweight       25.3
## 6 Lightweight            28.7
## 7 Middleweight           27.8
## 8 Welterweight           33.3</code></pre>
</div>
<p>If done correct <code>Q9</code> should look identical to <code>Q8e</code></p>
<div class="funfact">
<p>
Note that in the above code chunk, the data object has been on its
own line in the code followed immediately by <code>%&gt;%</code> before
starting with the “functions”.
</p>
<p>
The other option would have been to put the data object as the first
argument within the first function.
</p>
<p>
The benefit of having the data on its own is that you can reorder
functions easily or squeeze another one in (for example if you
summarised something but forgot to group beforehand) without the need to
“move” the data object into the new first argument of the pipeline.
</p>
</div>
<div id="merging-materials-from-next-week" class="section level13" number="3.10.0.0.0.0.0.0.0.0.0.0.1">
<p class="heading"><span class="header-section-number">3.10.0.0.0.0.0.0.0.0.0.0.1</span> merging materials from next week</p>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="basic-data-manipulation.html#cb200-1" tabindex="-1"></a>MMA_Data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/CareerStats2.csv&quot;</span>)</span></code></pre></div>
</div>
</div>
</div>
<div id="practicing-the-wickham-six" class="section level2 hasAnchor" number="3.11">
<h2><span class="header-section-number">3.11</span> Practicing the Wickham Six<a href="basic-data-manipulation.html#practicing-the-wickham-six" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The first part of todays class will be practicing the Wickham Six some more, as was mentioned before, the vast majority of your “data time” will be wrangling your data, and most of that can be done with these six functions, so it’s good to practice with them. First you’ll see an example of each function to refresh your memory. Then you will be asked to try for yourself, these will be a little more involved than last week to really test you. If you are stuggling you can check the solutions, but try yourself first, and answer the questions too, this will help you check your code is correct.</p>
<div id="select-1" class="section level3 hasAnchor" number="3.11.1">
<h3><span class="header-section-number">3.11.1</span> select()<a href="basic-data-manipulation.html#select-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>First up lets try to narrow down this big data set, by taking <code>MMA_Data</code>, and selecting only the variables; <code>ID</code>, <code>Height</code>, <code>Weight</code>, <code>BMI</code>, <code>Reach</code> and <code>Stance</code>. We will store this in <code>Example_1</code>.</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="basic-data-manipulation.html#cb201-1" tabindex="-1"></a>Example_1 <span class="ot">&lt;-</span> <span class="fu">select</span>(MMA_Data, ID, Height, Weight<span class="sc">:</span>Reach, Stance)</span>
<span id="cb201-2"><a href="basic-data-manipulation.html#cb201-2" tabindex="-1"></a>Example_1</span></code></pre></div>
<pre><code>## # A tibble: 199 × 6
##    ID               Height Weight   BMI Reach Stance  
##    &lt;chr&gt;             &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;   
##  1 056c493bbd76a918     64    125  21.5    64 Orthodox
##  2 b102c26727306ab6     65    125  20.8    67 Orthodox
##  3 80eacd4da0617c57     64    125  21.5    65 Southpaw
##  4 a4de54ea806fb525     64    125  21.5    63 Orthodox
##  5 aa72b0f831d0bfe5     65    125  20.8    68 Orthodox
##  6 92437c6775b3f7d1     66    125  20.2    66 Orthodox
##  7 5aedf14771ca82d2     64    125  21.5    65 Southpaw
##  8 a0f0004aadf10b71     65    125  20.8    67 Orthodox
##  9 f53c1f4ceeed8c08     65    125  20.8    65 Orthodox
## 10 ab2b4ff41d6ebe0f     66    125  20.2    65 Orthodox
## # ℹ 189 more rows</code></pre>
<div class="info">
<p>
Notice, this could also have been written as follows;
<code>Example_1 &lt;- select(MMA_Data, ID, Height, Weight, BMI, Reach, Stance)</code>
</p>
<p>
We can use the <code>:</code> operator to sequence together columns
that are next to each other in the original dataframe, this can save
time but it is not necessary.
</p>
</div>
<p><span style="font-size: 22px; font-weight: bold; color: hsl(24, 100%, 50%);">Question Time</span></p>
<div class="task">
<p>
<strong>Your turn</strong>
</p>
<p>
Using <code>select()</code> keep everything from
<code>Example_1</code> but except <code>Reach</code>, and store this in
an object names <code>Q1</code>.
</p>
</div>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="basic-data-manipulation.html#cb203-1" tabindex="-1"></a><span class="co"># Jaimie&#39;s solutions</span></span>
<span id="cb203-2"><a href="basic-data-manipulation.html#cb203-2" tabindex="-1"></a>Q1 <span class="ot">&lt;-</span> <span class="fu">select</span>(Example_1, <span class="sc">-</span>Reach)</span>
<span id="cb203-3"><a href="basic-data-manipulation.html#cb203-3" tabindex="-1"></a><span class="co">#OR</span></span>
<span id="cb203-4"><a href="basic-data-manipulation.html#cb203-4" tabindex="-1"></a>Q1 <span class="ot">&lt;-</span> <span class="fu">select</span>(Example_1, ID, Height, Weight, BMI, Stance)</span></code></pre></div>
</div>
</div>
<div id="arrange-1" class="section level3 hasAnchor" number="3.11.2">
<h3><span class="header-section-number">3.11.2</span> arrange()<a href="basic-data-manipulation.html#arrange-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Lets move on to <code>arrange()</code>; lets take the table <code>Example_1</code>, and arrange it first by <code>Weight</code>, then by <code>BMI</code>, we’ll store this in <code>Example_2</code>.</p>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="basic-data-manipulation.html#cb204-1" tabindex="-1"></a>Example_2 <span class="ot">&lt;-</span> <span class="fu">arrange</span>(Example_1, Weight, BMI)</span>
<span id="cb204-2"><a href="basic-data-manipulation.html#cb204-2" tabindex="-1"></a>Example_2</span></code></pre></div>
<pre><code>## # A tibble: 199 × 6
##    ID               Height Weight   BMI Reach Stance  
##    &lt;chr&gt;             &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;   
##  1 199eb7cf6ae90294     69    125  18.5    71 Orthodox
##  2 0fd5f4b838e890cc     68    125  19.0    70 Orthodox
##  3 67c1d46f4ed16f9e     68    125  19.0    70 Orthodox
##  4 792be9a24df82ed6     67    125  19.6    70 Orthodox
##  5 92437c6775b3f7d1     66    125  20.2    66 Orthodox
##  6 ab2b4ff41d6ebe0f     66    125  20.2    65 Orthodox
##  7 a0c64f272b65d441     66    125  20.2    68 Orthodox
##  8 1a31ef98efce7a79     66    125  20.2    66 Switch  
##  9 2fe9032955c2e013     66    125  20.2    69 Switch  
## 10 b102c26727306ab6     65    125  20.8    67 Orthodox
## # ℹ 189 more rows</code></pre>
<p><span style="font-size: 22px; font-weight: bold; color: hsl(24, 100%, 50%);">Question Time</span></p>
<p>What is the height of the top entry in <code>Example_2</code>? <input class='webex-solveme nospaces' size='2' data-answer='["69"]'/></p>
<div class="task">
<p>
<strong>Your turn</strong>
</p>
<p>
Using <code>arrange()</code>, take the table <code>Example_1</code>
and arrange it first by <code>Reach</code> in <em>desceding</em> order,
then by <code>Height</code> in <em>ascending</em> order. Store the
result in <code>Q2</code>.
</p>
</div>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="basic-data-manipulation.html#cb206-1" tabindex="-1"></a><span class="co"># Jaimie&#39;s solution</span></span>
<span id="cb206-2"><a href="basic-data-manipulation.html#cb206-2" tabindex="-1"></a>Q2 <span class="ot">&lt;-</span> <span class="fu">arrange</span>(Example_1, <span class="fu">desc</span>(Reach), Height)</span></code></pre></div>
</div>
<p>What is the <code>BMI</code> of the top entry in <code>Q2</code>? <input class='webex-solveme nospaces' size='6' data-answer='["27.042"]'/></p>
</div>
<div id="filter-1" class="section level3 hasAnchor" number="3.11.3">
<h3><span class="header-section-number">3.11.3</span> filter()<a href="basic-data-manipulation.html#filter-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Now onto <code>filter()</code> which has so many uses! Lets filter out all the athletes who are <em>over</em> 31 years of age</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="basic-data-manipulation.html#cb207-1" tabindex="-1"></a>Example_3 <span class="ot">&lt;-</span> <span class="fu">filter</span>(MMA_Data, Age <span class="sc">&lt;=</span><span class="dv">31</span>)</span>
<span id="cb207-2"><a href="basic-data-manipulation.html#cb207-2" tabindex="-1"></a>Example_3</span></code></pre></div>
<pre><code>## # A tibble: 97 × 32
##    ID                Age Height HeightClass Weight   BMI Reach ReachClass Stance
##    &lt;chr&gt;           &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt; 
##  1 a4de54ea806fb5…  25.4     64 Short          125  21.5    63 Below      Ortho…
##  2 a0f0004aadf10b…  28.7     65 Short          125  20.8    67 Below      Ortho…
##  3 f53c1f4ceeed8c…  30       65 Short          125  20.8    65 Below      Ortho…
##  4 ab2b4ff41d6ebe…  26.8     66 Average        125  20.2    65 Below      Ortho…
##  5 87f19d19f4cb73…  30.4     65 Short          125  20.8    65 Below      Ortho…
##  6 0fd5f4b838e890…  26.7     68 Average        125  19.0    70 Below      Ortho…
##  7 20999e27ddd94b…  29.3     65 Short          125  20.8    68 Below      Ortho…
##  8 a0c64f272b65d4…  27.9     66 Average        125  20.2    68 Below      Ortho…
##  9 67c1d46f4ed16f…  29.0     68 Average        125  19.0    70 Below      Ortho…
## 10 792be9a24df82e…  25.0     67 Average        125  19.6    70 Below      Ortho…
## # ℹ 87 more rows
## # ℹ 23 more variables: WeightClass &lt;chr&gt;, T_Wins &lt;dbl&gt;, T_Losses &lt;dbl&gt;,
## #   T_Fights &lt;dbl&gt;, Success &lt;dbl&gt;, W_by_Decision &lt;dbl&gt;, `W_by_KO/TKO` &lt;dbl&gt;,
## #   W_by_Sub &lt;dbl&gt;, L_by_Decision &lt;dbl&gt;, `L_by_KO/TKO` &lt;dbl&gt;, L_by_Sub &lt;dbl&gt;,
## #   PWDec &lt;dbl&gt;, PWTko &lt;dbl&gt;, PWSub &lt;dbl&gt;, PLDec &lt;dbl&gt;, PLTko &lt;dbl&gt;,
## #   PLSub &lt;dbl&gt;, Available &lt;dbl&gt;, TTime &lt;dbl&gt;, Time_Avg &lt;dbl&gt;, TLpM &lt;dbl&gt;,
## #   AbpM &lt;dbl&gt;, SubAtt_Avg &lt;dbl&gt;</code></pre>
<p><span style="font-size: 22px; font-weight: bold; color: hsl(24, 100%, 50%);">Question Time</span></p>
<p>How many athletes (observations) are left in <code>Example_3</code>? <input class='webex-solveme nospaces' size='2' data-answer='["97"]'/></p>
<div class="task">
<p>
<strong>Your turn</strong>
</p>
<p>
Using <code>filter()</code>, take the original table
<code>MMA_Data</code> and keep only those athletes in the ‘Flyweight’
and ‘Lightweight’ <code>WeightClasses</code> Store the result in
<code>Q3</code>.
</p>
</div>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="basic-data-manipulation.html#cb209-1" tabindex="-1"></a><span class="co"># Jaimie&#39;s solution</span></span>
<span id="cb209-2"><a href="basic-data-manipulation.html#cb209-2" tabindex="-1"></a>Q3 <span class="ot">&lt;-</span> <span class="fu">filter</span>(MMA_Data, WeightClass <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Flyweight&quot;</span>, <span class="st">&quot;Lightweight&quot;</span>))</span></code></pre></div>
</div>
<p>How many athletes (observations) are left in <code>Q3</code>? <input class='webex-solveme nospaces' size='2' data-answer='["50"]'/></p>
<div class="task">
<p>
<strong>Your turn</strong>
</p>
<p>
Now try taking the original table <code>MMA_Data</code> and keep only
those athletes from the “Welterweight” <code>WeightClass</code>, who are
over 72 inches in <code>Height</code>. Store the result in
<code>Q4</code>. Hint: remember they will need to match <em>both</em>
conditions
</p>
</div>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="basic-data-manipulation.html#cb210-1" tabindex="-1"></a><span class="co"># Jaimie&#39;s solution</span></span>
<span id="cb210-2"><a href="basic-data-manipulation.html#cb210-2" tabindex="-1"></a>Q4 <span class="ot">&lt;-</span> <span class="fu">filter</span>(MMA_Data, WeightClass <span class="sc">==</span> <span class="st">&quot;Welterweight&quot;</span>, Height <span class="sc">&gt;</span> <span class="dv">72</span>)</span></code></pre></div>
</div>
<p>How many athletes (observations) are left in <code>Q4</code>? <input class='webex-solveme nospaces' size='2' data-answer='["18"]'/></p>
<div class="task">
<p>
<strong>Your turn</strong>
</p>
<p>
Now try taking the original table <code>MMA_Data</code> and keep only
those athletes who have the “Orthodox” <code>Stance</code> <em>AND</em>
have 27 or more total fights (<code>T_Fights</code>) <em>OR</em> 15 or
more wins by submission (<code>W_by_Sub</code>). Store the result in
<code>Q5</code>. - Hint - No matter what they need to have the
<code>Orthodox</code> stance, regardless of the other conditions
</p>
</div>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="basic-data-manipulation.html#cb211-1" tabindex="-1"></a><span class="co"># Jaimie&#39;s solution</span></span>
<span id="cb211-2"><a href="basic-data-manipulation.html#cb211-2" tabindex="-1"></a>Q5 <span class="ot">&lt;-</span> <span class="fu">filter</span>(MMA_Data, Stance <span class="sc">==</span> <span class="st">&quot;Orthodox&quot;</span> <span class="sc">&amp;</span> (T_Fights <span class="sc">&gt;=</span> <span class="dv">27</span> <span class="sc">|</span> W_by_Sub <span class="sc">&gt;=</span> <span class="dv">15</span>))</span>
<span id="cb211-3"><a href="basic-data-manipulation.html#cb211-3" tabindex="-1"></a><span class="co">#OR</span></span>
<span id="cb211-4"><a href="basic-data-manipulation.html#cb211-4" tabindex="-1"></a>Q5 <span class="ot">&lt;-</span> <span class="fu">filter</span>(MMA_Data, Stance <span class="sc">==</span> <span class="st">&quot;Orthodox&quot;</span>, (T_Fights <span class="sc">&gt;=</span> <span class="dv">27</span> <span class="sc">|</span> W_by_Sub <span class="sc">&gt;=</span> <span class="dv">15</span>))</span></code></pre></div>
</div>
<div class="webex-solution">
<button>
Explain This Answer
</button>
<div class="solved">
<p>
There is essentially 2 parts to this question; the first criteria is
to find athletes who have the “orthodox” stance… that’s the first
requirement… then <em>if</em> they matched that criteria, we want to
check, if they have <em>EITHER</em> 27 or more total fights <em>OR</em>
15 or more wins by submission, which is why we need to put the second
“either/or” criteria in brackets, so R knows to treat them together.
</p>
<p>
If you take the brackets out, it will treat the first two criteria as
a joint criteria and the <code>|</code> “Or” operator creates the break.
Meaning R thinks you are asking for; Athletes with the orthodox stance
and 27 or more total fights… <em>OR</em> athletes with 15 or more wins
by submission. Try running the code without the brackets and seeing what
happens
</p>
<p>
<code>Q5Alt &lt;- filter(MMA_Data, Stance == “Orthodox” &amp; T_Fights &gt;= 27 | W_by_Sub &gt;= 15)</code>
</p>
<p>
Hopefully now you can understand the difference.
</p>
</div>
</div>
<p>How many athletes (observations) are left in <code>Q5</code>? <input class='webex-solveme nospaces' size='2' data-answer='["44"]'/></p>
</div>
<div id="mutate-1" class="section level3 hasAnchor" number="3.11.4">
<h3><span class="header-section-number">3.11.4</span> mutate()<a href="basic-data-manipulation.html#mutate-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Moving on to mutate() now.</p>
<p>Lets add a new column onto the table <code>Example_1</code>, that shows <code>Reach</code> but in meters rather than inches, and we’ll call it <code>ReachM</code>. We can make this column with <code>mutate()</code> by converting the inches value in the original <code>Reach</code> column into centimeters, by multiplying (<code>*</code>) the value by <code>2.54</code> and then dividing (<code>/</code>) the result by <code>100</code>.</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="basic-data-manipulation.html#cb212-1" tabindex="-1"></a>Example_4 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(Example_1, <span class="at">ReachM =</span> (Reach<span class="sc">*</span><span class="fl">2.54</span>)<span class="sc">/</span><span class="dv">100</span>)</span>
<span id="cb212-2"><a href="basic-data-manipulation.html#cb212-2" tabindex="-1"></a>Example_4</span></code></pre></div>
<pre><code>## # A tibble: 199 × 7
##    ID               Height Weight   BMI Reach Stance   ReachM
##    &lt;chr&gt;             &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt;
##  1 056c493bbd76a918     64    125  21.5    64 Orthodox   1.63
##  2 b102c26727306ab6     65    125  20.8    67 Orthodox   1.70
##  3 80eacd4da0617c57     64    125  21.5    65 Southpaw   1.65
##  4 a4de54ea806fb525     64    125  21.5    63 Orthodox   1.60
##  5 aa72b0f831d0bfe5     65    125  20.8    68 Orthodox   1.73
##  6 92437c6775b3f7d1     66    125  20.2    66 Orthodox   1.68
##  7 5aedf14771ca82d2     64    125  21.5    65 Southpaw   1.65
##  8 a0f0004aadf10b71     65    125  20.8    67 Orthodox   1.70
##  9 f53c1f4ceeed8c08     65    125  20.8    65 Orthodox   1.65
## 10 ab2b4ff41d6ebe0f     66    125  20.2    65 Orthodox   1.65
## # ℹ 189 more rows</code></pre>
<p><span style="font-size: 22px; font-weight: bold; color: hsl(24, 100%, 50%);">Question Time</span></p>
<div class="task">
<p>
<strong>Your turn</strong>
</p>
<p>
Take the table <code>Example_1</code> and mutate a new column onto it
called <code>BMI_Alt</code>, this time attempting to recalculate BMI
using the Weight and Height variables. The calculation for BMI is;
weight in kilograms devided by height in meters squared. Lets break down
the steps, you will need to; - multiply <code>Weight</code> by 0.453 (to
convert lbs to kgs) - divide that by… - <code>Height</code> multiplied
2.54 (to convert inches to cm), which you divide by 100 (to convert to
m), which you then square Store the result in <code>Q5</code>.
</p>
<ul>
<li>
Hint - the <code>^</code> symbol is for calculating “to the power
of”
</li>
</ul>
</div>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="basic-data-manipulation.html#cb214-1" tabindex="-1"></a><span class="co"># Jaimie&#39;s solution</span></span>
<span id="cb214-2"><a href="basic-data-manipulation.html#cb214-2" tabindex="-1"></a>Q6 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(Example_1, <span class="at">BMI_Alt =</span> (Weight<span class="sc">*</span><span class="fl">0.453</span>)<span class="sc">/</span>(((Height<span class="sc">*</span><span class="fl">2.54</span>)<span class="sc">/</span><span class="dv">100</span>)<span class="sc">^</span><span class="dv">2</span>))</span></code></pre></div>
</div>
<div class="info">
<p>
Don’t be worried if your new column is different by a few decimals
(the original BMI was created with a slightly different calculation with
different rounding). If they look approximately similar you have done it
correctly.
</p>
</div>
</div>
<div id="group_by-and-summarise" class="section level3 hasAnchor" number="3.11.5">
<h3><span class="header-section-number">3.11.5</span> group_by() and summarise()<a href="basic-data-manipulation.html#group_by-and-summarise" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Now let’s brush up on group_by and summarise().</p>
<p>Here we will take the original table <code>MMA_Data</code> and group that data by <code>WeightClass</code>.
Then we will create <code>mean()</code> summary stats for:
Number of hits landed per minute (<code>TLpM</code>) and we’ll call that column <code>MeanHit</code>,
Number of hits absorbed per minute (<code>AbpM</code>) and we’ll call that column <code>MeanAbsorb</code>,
And average fight length (<code>Time_Avg</code>) and we’ll call that column <code>MeanTime</code>.</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="basic-data-manipulation.html#cb215-1" tabindex="-1"></a>Example_5a <span class="ot">&lt;-</span> <span class="fu">group_by</span>(MMA_Data, WeightClass)</span>
<span id="cb215-2"><a href="basic-data-manipulation.html#cb215-2" tabindex="-1"></a>Example_5b <span class="ot">&lt;-</span> <span class="fu">summarise</span>(Example_5a, <span class="at">MeanHit =</span> <span class="fu">mean</span>(TLpM), <span class="at">MeanAbsorb =</span> <span class="fu">mean</span>(AbpM), <span class="at">MeanTime =</span> <span class="fu">mean</span>(Time_Avg))</span>
<span id="cb215-3"><a href="basic-data-manipulation.html#cb215-3" tabindex="-1"></a>Example_5b</span></code></pre></div>
<pre><code>## # A tibble: 8 × 4
##   WeightClass      MeanHit MeanAbsorb MeanTime
##   &lt;chr&gt;              &lt;dbl&gt;      &lt;dbl&gt;    &lt;dbl&gt;
## 1 Bantamweight        5.46       3.38    11.3 
## 2 Featherweight       5.43       3.46    11.8 
## 3 Flyweight           4.78       2.64    11.9 
## 4 Heavyweight         5.28       3.14    10.1 
## 5 LightHeavyweight    6.05       2.97     9.12
## 6 Lightweight         5.19       3.25     9.93
## 7 Middleweight        5.11       2.78    10.2 
## 8 Welterweight        5.09       2.94    11.7</code></pre>
<p><span style="font-size: 22px; font-weight: bold; color: hsl(24, 100%, 50%);">Question Time</span></p>
<p>Which weightclass has the highest Hit average? <input class='webex-solveme nospaces' size='16' data-answer='["LightHeavyweight"]'/> <br>
Which weightclass has the lowest Absorbtion average? <input class='webex-solveme nospaces' size='9' data-answer='["Flyweight"]'/> <br>
Which weightclass has the highest average time? <input class='webex-solveme nospaces' size='9' data-answer='["Flyweight"]'/> <br></p>
<div class="task">
<p>
<strong>Your turn</strong>
</p>
<p>
Take the original table <code>MMA_Data</code> and group that data by
<code>Stance</code> and <code>HeightClass</code> and store that in
<code>Q7a</code>. Then create summary stats for success rate
(<code>Success</code>), you should have columns called;
<code>MedSuccess</code> that shows the median success rate
<code>MaxSuccess</code> that shows the maximum success rate
<code>MinSuccess</code> that shows the minimum success rate
<code>SDSuccess</code> that shows the standard deviation of success rate
The resulting table should be stored in <code>Q7b</code>.
</p>
</div>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="basic-data-manipulation.html#cb217-1" tabindex="-1"></a><span class="co"># Jaimie&#39;s solution</span></span>
<span id="cb217-2"><a href="basic-data-manipulation.html#cb217-2" tabindex="-1"></a>Q7a <span class="ot">&lt;-</span> <span class="fu">group_by</span>(MMA_Data, Stance, HeightClass)</span>
<span id="cb217-3"><a href="basic-data-manipulation.html#cb217-3" tabindex="-1"></a>Q7b <span class="ot">&lt;-</span> <span class="fu">summarise</span>(Q7a, <span class="at">MedSuccess =</span> <span class="fu">median</span>(Success), <span class="at">MaxSuccess =</span> <span class="fu">max</span>(Success), <span class="at">MinSuccess =</span> <span class="fu">min</span>(Success), <span class="at">SDSuccess =</span> <span class="fu">sd</span>(Success))</span></code></pre></div>
<pre><code>## `summarise()` has grouped output by &#39;Stance&#39;. You can override using the
## `.groups` argument.</code></pre>
</div>
<p>Which Stance/HeightClass combo has the highest median success rate? (enter your answers in the format Stance/HeightClass) <input class='webex-solveme nospaces' size='11' data-answer='["Swithc/Tall"]'/> <br>
What is the minimum success rate of tall athletes with an orthodox stance? <input class='webex-solveme nospaces' size='5' data-answer='["0.415"]'/> <br>
What is the standard deviation in success rate for short athletes with a southpaw stance? (write your answer to 3 decimal places) <input class='webex-solveme nospaces' size='5' data-answer='["0.062"]'/> <br></p>
</div>
<div id="bringing-it-all-together" class="section level3 hasAnchor" number="3.11.6">
<h3><span class="header-section-number">3.11.6</span> Bringing it all together<a href="basic-data-manipulation.html#bringing-it-all-together" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><span style="font-size: 22px; font-weight: bold; color: hsl(24, 100%, 50%);">Question Time</span></p>
<div class="task">
<p>
<strong>Your turn</strong> This is another multi-part question…
</p>
<ul>
<li>
Take the original table <code>MMA_Data</code>, and select just
<code>ID</code>, <code>WeightClass</code>, <code>Stance</code>,
<code>T_Wins</code>, <code>W_by_Decision</code>,
<code>W_by_KO/TKO</code> and <code>W_by_Sub</code>. Store the result in
<code>Q8a</code>.
</li>
<li>
Take <code>Q8a</code> and filter out all the athletes with the
“Southpaw” <code>Stance</code>. Store the result in Q8b.
</li>
<li>
Take <code>Q8b</code> and mutate on a new column called
<code>Perc_W_by_Dec</code> that shows the percentage of total wins
(<code>T_Wins</code>) that are accounted for by decisions
(<code>W_by_Decision</code>). Store the result in <code>Q8c</code>.
</li>
<li>
Take <code>Q8c</code> and group that data by
<code>WeightClass</code>. Store the result in <code>Q8d</code>.
</li>
<li>
Take <code>Q8d</code> and create summary stats that show the mean of
<code>Perc_W_by_Dec</code>. Store the result in <code>Q8e</code>.
</li>
</ul>
</div>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="basic-data-manipulation.html#cb219-1" tabindex="-1"></a><span class="co"># Jaimie&#39;s solution</span></span>
<span id="cb219-2"><a href="basic-data-manipulation.html#cb219-2" tabindex="-1"></a>Q8a <span class="ot">&lt;-</span> <span class="fu">select</span>(MMA_Data, ID, WeightClass, Stance, T_Wins, W_by_Decision, <span class="st">&quot;W_by_KO/TKO&quot;</span>, W_by_Sub)</span>
<span id="cb219-3"><a href="basic-data-manipulation.html#cb219-3" tabindex="-1"></a>Q8b <span class="ot">&lt;-</span> <span class="fu">filter</span>(Q8a, Stance <span class="sc">!=</span> <span class="st">&quot;Southpaw&quot;</span>)</span>
<span id="cb219-4"><a href="basic-data-manipulation.html#cb219-4" tabindex="-1"></a>Q8c <span class="ot">&lt;-</span> <span class="fu">mutate</span>(Q8b, <span class="at">Perc_W_by_Dec =</span> (W_by_Decision<span class="sc">/</span>T_Wins)<span class="sc">*</span><span class="dv">100</span>)</span>
<span id="cb219-5"><a href="basic-data-manipulation.html#cb219-5" tabindex="-1"></a>Q8d <span class="ot">&lt;-</span> <span class="fu">group_by</span>(Q8c, WeightClass)</span>
<span id="cb219-6"><a href="basic-data-manipulation.html#cb219-6" tabindex="-1"></a>Q8e <span class="ot">&lt;-</span> <span class="fu">summarise</span>(Q8d, <span class="at">AvgPercDec =</span> <span class="fu">mean</span>(Perc_W_by_Dec))</span></code></pre></div>
</div>
<p>Which weightclass has the lowest average percentage of wins by decision? <input class='webex-solveme nospaces' size='11' data-answer='["Heavyweight"]'/></p>

</div>
</div>
</div>
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  if (t = document.getElementById("webex-total_correct")) {
    var correct = document.getElementsByClassName("webex-correct").length;
    var solvemes = document.getElementsByClassName("webex-solveme").length;
    var radiogroups = document.getElementsByClassName("webex-radiogroup").length;
    var selects = document.getElementsByClassName("webex-select").length;
    
    t.innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");
  
  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");
  
  var cl = this.classList
  
  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;
  
  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }
  
  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

window.onload = function() {
  console.log("onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;
  }
  
  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }
  
  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
  }

  update_total_correct();
}

</script>

            </section>

          </div>
        </div>
      </div>
<a href="introduction-to-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="tidy-data-1-principles-and-pivot-functions.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
