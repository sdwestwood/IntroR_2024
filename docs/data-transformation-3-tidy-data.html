<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Data Transformation 3: Tidy Data | Introduction to R</title>
  <meta name="description" content="This is the course handbook for the Glasgow University Open Studies course Introduction to R, academic session 2019-2020." />
  <meta name="generator" content="bookdown 0.25 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Data Transformation 3: Tidy Data | Introduction to R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is the course handbook for the Glasgow University Open Studies course Introduction to R, academic session 2019-2020." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Data Transformation 3: Tidy Data | Introduction to R" />
  
  <meta name="twitter:description" content="This is the course handbook for the Glasgow University Open Studies course Introduction to R, academic session 2019-2020." />
  

<meta name="author" content="Gaby Mahrholz, Greta Todorova, Wilhelmiina Toivo, and Jaimie Torrance" />


<meta name="date" content="2022-03-29" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-transformation-2-more-one-and-two-table-verbs.html"/>
<link rel="next" href="data-transformation-4-fine-tuned-data-manipulation.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introduction to R</a></li>

<li class="divider"></li>
<li><a href="index.html#about-this-course">About this course<span></span></a>
<ul>
<li><a href="index.html#intended-learning-outcomes">Intended Learning Outcomes<span></span></a></li>
<li><a href="index.html#what-will-i-need-to-complete-this-course">What will I need to complete this course?<span></span></a></li>
<li><a href="index.html#about-the-assessments">About the Assessments<span></span></a>
<ul>
<li><a href="index.html#formative-assessments">Formative Assessments<span></span></a></li>
<li><a href="index.html#summative-assessments">Summative Assessments<span></span></a></li>
<li><a href="index.html#late-submissions-extensions">Late submissions &amp; extensions<span></span></a></li>
<li><a href="index.html#how-to-submit-your-assessments">How to Submit Your Assessments<span></span></a></li>
</ul></li>
<li><a href="index.html#assistance">Assistance<span></span></a></li>
<li><a href="index.html#why-are-these-materials-open">Why are these materials open?<span></span></a></li>
<li><a href="index.html#acknowledgement">Acknowledgement<span></span></a></li>
</ul></li>
<li><a href="before.html#before">Assignment before starting the course<span></span></a>
<ul>
<li class="chapter" data-level="0.1" data-path="before.html"><a href="before.html"><i class="fa fa-check"></i><b>0.1</b> Access to RStudio<span></span></a>
<ul>
<li class="chapter" data-level="0.1.1" data-path="before.html"><a href="before.html#install"><i class="fa fa-check"></i><b>0.1.1</b> Installing R and RStudio on Your Own Machine<span></span></a></li>
<li class="chapter" data-level="0.1.2" data-path="before.html"><a href="before.html#accessing-rstudio-on-university-computers"><i class="fa fa-check"></i><b>0.1.2</b> Accessing RStudio on University Computers<span></span></a></li>
<li class="chapter" data-level="0.1.3" data-path="before.html"><a href="before.html#using-rstudio-cloud"><i class="fa fa-check"></i><b>0.1.3</b> Using RStudio Cloud<span></span></a></li>
</ul></li>
<li class="chapter" data-level="0.2" data-path="before.html"><a href="before.html#maximising-reproducibility-and-visibility"><i class="fa fa-check"></i><b>0.2</b> Maximising Reproducibility and Visibility<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction<span></span></a>
<ul>
<li><a href="introduction.html#intended-learning-outcomes-1">Intended Learning Outcomes<span></span></a></li>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#computer-literacy-basics"><i class="fa fa-check"></i><b>1.1</b> Computer Literacy Basics<span></span></a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#r-and-r-studio"><i class="fa fa-check"></i><b>1.2</b> R and R Studio<span></span></a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="introduction.html"><a href="introduction.html#r"><i class="fa fa-check"></i><b>1.2.1</b> R<span></span></a></li>
<li class="chapter" data-level="1.2.2" data-path="introduction.html"><a href="introduction.html#rstudio-ide"><i class="fa fa-check"></i><b>1.2.2</b> RStudio IDE<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#r-r-studio-and-associated-file-types"><i class="fa fa-check"></i><b>1.3</b> R, R Studio and Associated File Types<span></span></a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="introduction.html"><a href="introduction.html#file-structuredirectories"><i class="fa fa-check"></i><b>1.3.1</b> File Structure/Directories<span></span></a></li>
<li class="chapter" data-level="1.3.2" data-path="introduction.html"><a href="introduction.html#file-extensions"><i class="fa fa-check"></i><b>1.3.2</b> File Extensions<span></span></a></li>
<li class="chapter" data-level="1.3.3" data-path="introduction.html"><a href="introduction.html#zip-files"><i class="fa fa-check"></i><b>1.3.3</b> .zip Files<span></span></a></li>
<li class="chapter" data-level="1.3.4" data-path="introduction.html"><a href="introduction.html#rstudio-specific-files"><i class="fa fa-check"></i><b>1.3.4</b> RStudio Specific Files<span></span></a></li>
<li class="chapter" data-level="1.3.5" data-path="introduction.html"><a href="introduction.html#r-files"><i class="fa fa-check"></i><b>1.3.5</b> .r Files<span></span></a></li>
<li class="chapter" data-level="1.3.6" data-path="introduction.html"><a href="introduction.html#rmd-files"><i class="fa fa-check"></i><b>1.3.6</b> .Rmd files<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#comments"><i class="fa fa-check"></i><b>1.4</b> Comments<span></span></a></li>
<li class="chapter" data-level="1.5" data-path="introduction.html"><a href="introduction.html#saving-your-file"><i class="fa fa-check"></i><b>1.5</b> Saving your file<span></span></a></li>
<li class="chapter" data-level="1.6" data-path="introduction.html"><a href="introduction.html#sessions"><i class="fa fa-check"></i><b>1.6</b> Sessions<span></span></a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="introduction.html"><a href="introduction.html#what-is-a-session-in-r"><i class="fa fa-check"></i><b>1.6.1</b> What is a session in R?<span></span></a></li>
<li class="chapter" data-level="1.6.2" data-path="introduction.html"><a href="introduction.html#restarting-your-current-session"><i class="fa fa-check"></i><b>1.6.2</b> Restarting Your Current Session<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="introduction.html"><a href="introduction.html#packages"><i class="fa fa-check"></i><b>1.7</b> Packages<span></span></a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="introduction.html"><a href="introduction.html#installing-packages"><i class="fa fa-check"></i><b>1.7.1</b> Installing Packages<span></span></a></li>
<li class="chapter" data-level="1.7.2" data-path="introduction.html"><a href="introduction.html#load-tidyverse"><i class="fa fa-check"></i><b>1.7.2</b> Loading Packages<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="introduction.html"><a href="introduction.html#functions"><i class="fa fa-check"></i><b>1.8</b> Functions<span></span></a>
<ul>
<li class="chapter" data-level="1.8.1" data-path="introduction.html"><a href="introduction.html#what-is-a-function"><i class="fa fa-check"></i><b>1.8.1</b> What is a function?<span></span></a></li>
<li class="chapter" data-level="1.8.2" data-path="introduction.html"><a href="introduction.html#the-anatomy-of-a-function-names-and-arguments"><i class="fa fa-check"></i><b>1.8.2</b> The Anatomy of a Function: names and arguments<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.9" data-path="introduction.html"><a href="introduction.html#formative-homework"><i class="fa fa-check"></i><b>1.9</b> Formative Homework<span></span></a>
<ul>
<li class="chapter" data-level="1.9.1" data-path="introduction.html"><a href="introduction.html#install-r-and-rstudio-on-your-personal-computer"><i class="fa fa-check"></i><b>1.9.1</b> Install R and RStudio on your personal computer<span></span></a></li>
<li class="chapter" data-level="1.9.2" data-path="introduction.html"><a href="introduction.html#installing-and-loading-tidyverse"><i class="fa fa-check"></i><b>1.9.2</b> Installing and Loading tidyverse<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction-to-data.html"><a href="introduction-to-data.html"><i class="fa fa-check"></i><b>2</b> Introduction to Data<span></span></a>
<ul>
<li><a href="introduction-to-data.html#intended-learning-outcomes-2">Intended Learning Outcomes<span></span></a></li>
<li class="chapter" data-level="2.1" data-path="introduction-to-data.html"><a href="introduction-to-data.html#pre-steps"><i class="fa fa-check"></i><b>2.1</b> Pre-Steps<span></span></a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="introduction-to-data.html"><a href="introduction-to-data.html#downloading-materials"><i class="fa fa-check"></i><b>2.1.1</b> Downloading materials<span></span></a></li>
<li class="chapter" data-level="2.1.2" data-path="introduction-to-data.html"><a href="introduction-to-data.html#unzipping-the-zip-folder"><i class="fa fa-check"></i><b>2.1.2</b> Unzipping the zip folder<span></span></a></li>
<li class="chapter" data-level="2.1.3" data-path="introduction-to-data.html"><a href="introduction-to-data.html#setting-the-working-directory"><i class="fa fa-check"></i><b>2.1.3</b> Setting the working directory<span></span></a></li>
<li class="chapter" data-level="2.1.4" data-path="introduction-to-data.html"><a href="introduction-to-data.html#load-tidyverse-into-the-library"><i class="fa fa-check"></i><b>2.1.4</b> Load tidyverse into the library<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="introduction-to-data.html"><a href="introduction-to-data.html#basic-data-types"><i class="fa fa-check"></i><b>2.2</b> Basic data types<span></span></a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="introduction-to-data.html"><a href="introduction-to-data.html#character"><i class="fa fa-check"></i><b>2.2.1</b> Character<span></span></a></li>
<li class="chapter" data-level="2.2.2" data-path="introduction-to-data.html"><a href="introduction-to-data.html#numeric"><i class="fa fa-check"></i><b>2.2.2</b> Numeric<span></span></a></li>
<li class="chapter" data-level="2.2.3" data-path="introduction-to-data.html"><a href="introduction-to-data.html#logical"><i class="fa fa-check"></i><b>2.2.3</b> Logical<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="introduction-to-data.html"><a href="introduction-to-data.html#vectors"><i class="fa fa-check"></i><b>2.3</b> Vectors<span></span></a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="introduction-to-data.html"><a href="introduction-to-data.html#creating-vectors"><i class="fa fa-check"></i><b>2.3.1</b> Creating vectors<span></span></a></li>
<li class="chapter" data-level="2.3.2" data-path="introduction-to-data.html"><a href="introduction-to-data.html#converting-vectors-into-different-data-types-of-vectors-aka-funky-things-we-can-do"><i class="fa fa-check"></i><b>2.3.2</b> Converting vectors into different data types of vectors aka funky things we can do<span></span></a></li>
<li class="chapter" data-level="2.3.3" data-path="introduction-to-data.html"><a href="introduction-to-data.html#adding-elements-to-existing-vectors"><i class="fa fa-check"></i><b>2.3.3</b> Adding elements to existing vectors<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="introduction-to-data.html"><a href="introduction-to-data.html#tibble---the-new-way-of-creating-a-dataframe"><i class="fa fa-check"></i><b>2.4</b> Tibble - the new way of creating a dataframe<span></span></a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="introduction-to-data.html"><a href="introduction-to-data.html#what-the-heck-is-a-tibble-do-you-mean-table"><i class="fa fa-check"></i><b>2.4.1</b> What the heck is a tibble? Do you mean table?<span></span></a></li>
<li class="chapter" data-level="2.4.2" data-path="introduction-to-data.html"><a href="introduction-to-data.html#how-to-make-a-tibble-from-scratch"><i class="fa fa-check"></i><b>2.4.2</b> How to make a tibble from scratch<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="introduction-to-data.html"><a href="introduction-to-data.html#reading-in-data"><i class="fa fa-check"></i><b>2.5</b> Reading in data<span></span></a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="introduction-to-data.html"><a href="introduction-to-data.html#from-pre-existing-databases"><i class="fa fa-check"></i><b>2.5.1</b> from pre-existing databases<span></span></a></li>
<li class="chapter" data-level="2.5.2" data-path="introduction-to-data.html"><a href="introduction-to-data.html#from-existing-data-files"><i class="fa fa-check"></i><b>2.5.2</b> from existing data files<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="introduction-to-data.html"><a href="introduction-to-data.html#last-point-for-today"><i class="fa fa-check"></i><b>2.6</b> Last point for today<span></span></a></li>
<li class="chapter" data-level="2.7" data-path="introduction-to-data.html"><a href="introduction-to-data.html#summative-homework"><i class="fa fa-check"></i><b>2.7</b> Summative Homework<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-transformation-1-basic-one-table-verbs.html"><a href="data-transformation-1-basic-one-table-verbs.html"><i class="fa fa-check"></i><b>3</b> Data Transformation 1: Basic One Table Verbs<span></span></a>
<ul>
<li><a href="data-transformation-1-basic-one-table-verbs.html#intended-learning-outcomes-3">Intended Learning Outcomes<span></span></a></li>
<li class="chapter" data-level="3.1" data-path="data-transformation-1-basic-one-table-verbs.html"><a href="data-transformation-1-basic-one-table-verbs.html#data-wrangling"><i class="fa fa-check"></i><b>3.1</b> Data Wrangling<span></span></a></li>
<li class="chapter" data-level="3.2" data-path="data-transformation-1-basic-one-table-verbs.html"><a href="data-transformation-1-basic-one-table-verbs.html#pre-steps-1"><i class="fa fa-check"></i><b>3.2</b> Pre-Steps<span></span></a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="data-transformation-1-basic-one-table-verbs.html"><a href="data-transformation-1-basic-one-table-verbs.html#downloading-materials-1"><i class="fa fa-check"></i><b>3.2.1</b> Downloading materials<span></span></a></li>
<li class="chapter" data-level="3.2.2" data-path="data-transformation-1-basic-one-table-verbs.html"><a href="data-transformation-1-basic-one-table-verbs.html#unzipping-the-zip-folder-1"><i class="fa fa-check"></i><b>3.2.2</b> Unzipping the zip folder<span></span></a></li>
<li class="chapter" data-level="3.2.3" data-path="data-transformation-1-basic-one-table-verbs.html"><a href="data-transformation-1-basic-one-table-verbs.html#setting-the-working-directory-1"><i class="fa fa-check"></i><b>3.2.3</b> Setting the working directory<span></span></a></li>
<li class="chapter" data-level="3.2.4" data-path="data-transformation-1-basic-one-table-verbs.html"><a href="data-transformation-1-basic-one-table-verbs.html#loading-in-the-required-packages-into-the-library"><i class="fa fa-check"></i><b>3.2.4</b> Loading in the required packages into the library<span></span></a></li>
<li class="chapter" data-level="3.2.5" data-path="data-transformation-1-basic-one-table-verbs.html"><a href="data-transformation-1-basic-one-table-verbs.html#read-in-the-data"><i class="fa fa-check"></i><b>3.2.5</b> Read in the data<span></span></a></li>
<li class="chapter" data-level="3.2.6" data-path="data-transformation-1-basic-one-table-verbs.html"><a href="data-transformation-1-basic-one-table-verbs.html#view-the-data"><i class="fa fa-check"></i><b>3.2.6</b> View the data<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="data-transformation-1-basic-one-table-verbs.html"><a href="data-transformation-1-basic-one-table-verbs.html#select"><i class="fa fa-check"></i><b>3.3</b> select()<span></span></a></li>
<li class="chapter" data-level="3.4" data-path="data-transformation-1-basic-one-table-verbs.html"><a href="data-transformation-1-basic-one-table-verbs.html#arrange"><i class="fa fa-check"></i><b>3.4</b> arrange()<span></span></a></li>
<li class="chapter" data-level="3.5" data-path="data-transformation-1-basic-one-table-verbs.html"><a href="data-transformation-1-basic-one-table-verbs.html#filter"><i class="fa fa-check"></i><b>3.5</b> filter()<span></span></a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="data-transformation-1-basic-one-table-verbs.html"><a href="data-transformation-1-basic-one-table-verbs.html#single-criterion"><i class="fa fa-check"></i><b>3.5.1</b> Single criterion<span></span></a></li>
<li class="chapter" data-level="3.5.2" data-path="data-transformation-1-basic-one-table-verbs.html"><a href="data-transformation-1-basic-one-table-verbs.html#multiple-criteria"><i class="fa fa-check"></i><b>3.5.2</b> Multiple criteria<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="data-transformation-1-basic-one-table-verbs.html"><a href="data-transformation-1-basic-one-table-verbs.html#mutate"><i class="fa fa-check"></i><b>3.6</b> mutate()<span></span></a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="data-transformation-1-basic-one-table-verbs.html"><a href="data-transformation-1-basic-one-table-verbs.html#read-in-second-dataset"><i class="fa fa-check"></i><b>3.6.1</b> Read in second dataset<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="data-transformation-1-basic-one-table-verbs.html"><a href="data-transformation-1-basic-one-table-verbs.html#summarise"><i class="fa fa-check"></i><b>3.7</b> summarise()<span></span></a></li>
<li class="chapter" data-level="3.8" data-path="data-transformation-1-basic-one-table-verbs.html"><a href="data-transformation-1-basic-one-table-verbs.html#adding-group_by"><i class="fa fa-check"></i><b>3.8</b> Adding group_by()<span></span></a></li>
<li class="chapter" data-level="3.9" data-path="data-transformation-1-basic-one-table-verbs.html"><a href="data-transformation-1-basic-one-table-verbs.html#formative-homework-1"><i class="fa fa-check"></i><b>3.9</b> Formative Homework<span></span></a>
<ul>
<li class="chapter" data-level="3.9.1" data-path="data-transformation-1-basic-one-table-verbs.html"><a href="data-transformation-1-basic-one-table-verbs.html#brief-introduction-to-the-homework-data"><i class="fa fa-check"></i><b>3.9.1</b> Brief introduction to the homework data<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-transformation-2-more-one-and-two-table-verbs.html"><a href="data-transformation-2-more-one-and-two-table-verbs.html"><i class="fa fa-check"></i><b>4</b> Data Transformation 2: More One and Two Table Verbs<span></span></a>
<ul>
<li><a href="data-transformation-2-more-one-and-two-table-verbs.html#intended-learning-outcomes-4">Intended Learning Outcomes<span></span></a></li>
<li class="chapter" data-level="4.1" data-path="data-transformation-2-more-one-and-two-table-verbs.html"><a href="data-transformation-2-more-one-and-two-table-verbs.html#pre-steps-2"><i class="fa fa-check"></i><b>4.1</b> Pre-Steps<span></span></a></li>
<li class="chapter" data-level="4.2" data-path="data-transformation-2-more-one-and-two-table-verbs.html"><a href="data-transformation-2-more-one-and-two-table-verbs.html#practicing-the-wikham-six"><i class="fa fa-check"></i><b>4.2</b> Practicing the Wikham Six<span></span></a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="data-transformation-2-more-one-and-two-table-verbs.html"><a href="data-transformation-2-more-one-and-two-table-verbs.html#select-1"><i class="fa fa-check"></i><b>4.2.1</b> select()<span></span></a></li>
<li class="chapter" data-level="4.2.2" data-path="data-transformation-2-more-one-and-two-table-verbs.html"><a href="data-transformation-2-more-one-and-two-table-verbs.html#arrange-1"><i class="fa fa-check"></i><b>4.2.2</b> arrange()<span></span></a></li>
<li class="chapter" data-level="4.2.3" data-path="data-transformation-2-more-one-and-two-table-verbs.html"><a href="data-transformation-2-more-one-and-two-table-verbs.html#filter-1"><i class="fa fa-check"></i><b>4.2.3</b> filter()<span></span></a></li>
<li class="chapter" data-level="4.2.4" data-path="data-transformation-2-more-one-and-two-table-verbs.html"><a href="data-transformation-2-more-one-and-two-table-verbs.html#mutate-1"><i class="fa fa-check"></i><b>4.2.4</b> mutate()<span></span></a></li>
<li class="chapter" data-level="4.2.5" data-path="data-transformation-2-more-one-and-two-table-verbs.html"><a href="data-transformation-2-more-one-and-two-table-verbs.html#group_by-and-summarise"><i class="fa fa-check"></i><b>4.2.5</b> group_by() and summarise()<span></span></a></li>
<li class="chapter" data-level="4.2.6" data-path="data-transformation-2-more-one-and-two-table-verbs.html"><a href="data-transformation-2-more-one-and-two-table-verbs.html#bringing-it-all-together"><i class="fa fa-check"></i><b>4.2.6</b> Bringing it all together<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="data-transformation-2-more-one-and-two-table-verbs.html"><a href="data-transformation-2-more-one-and-two-table-verbs.html#pipes"><i class="fa fa-check"></i><b>4.3</b> The pipe operator (%&gt;%)<span></span></a></li>
<li class="chapter" data-level="4.4" data-path="data-transformation-2-more-one-and-two-table-verbs.html"><a href="data-transformation-2-more-one-and-two-table-verbs.html#two-table-verbs"><i class="fa fa-check"></i><b>4.4</b> Two-Table Verbs<span></span></a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="data-transformation-2-more-one-and-two-table-verbs.html"><a href="data-transformation-2-more-one-and-two-table-verbs.html#bringing-in-new-data"><i class="fa fa-check"></i><b>4.4.1</b> Bringing in new data<span></span></a></li>
<li class="chapter" data-level="4.4.2" data-path="data-transformation-2-more-one-and-two-table-verbs.html"><a href="data-transformation-2-more-one-and-two-table-verbs.html#mutating-join-verbs"><i class="fa fa-check"></i><b>4.4.2</b> Mutating Join Verbs<span></span></a></li>
<li class="chapter" data-level="4.4.3" data-path="data-transformation-2-more-one-and-two-table-verbs.html"><a href="data-transformation-2-more-one-and-two-table-verbs.html#mutating-join-summary"><i class="fa fa-check"></i><b>4.4.3</b> Mutating Join Summary<span></span></a></li>
<li class="chapter" data-level="4.4.4" data-path="data-transformation-2-more-one-and-two-table-verbs.html"><a href="data-transformation-2-more-one-and-two-table-verbs.html#binding-join-verbs"><i class="fa fa-check"></i><b>4.4.4</b> Binding Join Verbs<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="data-transformation-2-more-one-and-two-table-verbs.html"><a href="data-transformation-2-more-one-and-two-table-verbs.html#additional-information"><i class="fa fa-check"></i><b>4.5</b> Additional information<span></span></a></li>
<li class="chapter" data-level="4.6" data-path="data-transformation-2-more-one-and-two-table-verbs.html"><a href="data-transformation-2-more-one-and-two-table-verbs.html#summative-homework-1"><i class="fa fa-check"></i><b>4.6</b> Summative Homework<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data-transformation-3-tidy-data.html"><a href="data-transformation-3-tidy-data.html"><i class="fa fa-check"></i><b>5</b> Data Transformation 3: Tidy Data<span></span></a>
<ul>
<li><a href="data-transformation-3-tidy-data.html#intended-learning-outcomes-5">Intended Learning Outcomes<span></span></a></li>
<li class="chapter" data-level="5.1" data-path="data-transformation-3-tidy-data.html"><a href="data-transformation-3-tidy-data.html#pre-steps-3"><i class="fa fa-check"></i><b>5.1</b> Pre-steps<span></span></a></li>
<li class="chapter" data-level="5.2" data-path="data-transformation-3-tidy-data.html"><a href="data-transformation-3-tidy-data.html#tidy-data"><i class="fa fa-check"></i><b>5.2</b> Tidy data<span></span></a></li>
<li class="chapter" data-level="5.3" data-path="data-transformation-3-tidy-data.html"><a href="data-transformation-3-tidy-data.html#gather-and-spread"><i class="fa fa-check"></i><b>5.3</b> gather() and spread()<span></span></a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="data-transformation-3-tidy-data.html"><a href="data-transformation-3-tidy-data.html#gather"><i class="fa fa-check"></i><b>5.3.1</b> gather()<span></span></a></li>
<li class="chapter" data-level="5.3.2" data-path="data-transformation-3-tidy-data.html"><a href="data-transformation-3-tidy-data.html#spread"><i class="fa fa-check"></i><b>5.3.2</b> spread()<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="data-transformation-3-tidy-data.html"><a href="data-transformation-3-tidy-data.html#separate-and-unite"><i class="fa fa-check"></i><b>5.4</b> separate() and unite()<span></span></a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="data-transformation-3-tidy-data.html"><a href="data-transformation-3-tidy-data.html#separate"><i class="fa fa-check"></i><b>5.4.1</b> separate()<span></span></a></li>
<li class="chapter" data-level="5.4.2" data-path="data-transformation-3-tidy-data.html"><a href="data-transformation-3-tidy-data.html#additional-arguments-for-separate"><i class="fa fa-check"></i><b>5.4.2</b> additional arguments for separate()<span></span></a></li>
<li class="chapter" data-level="5.4.3" data-path="data-transformation-3-tidy-data.html"><a href="data-transformation-3-tidy-data.html#unite"><i class="fa fa-check"></i><b>5.4.3</b> unite()<span></span></a></li>
<li class="chapter" data-level="5.4.4" data-path="data-transformation-3-tidy-data.html"><a href="data-transformation-3-tidy-data.html#additional-arguments-for-unite"><i class="fa fa-check"></i><b>5.4.4</b> additional arguments for unite()<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="data-transformation-3-tidy-data.html"><a href="data-transformation-3-tidy-data.html#bonus-materials-mutate-row-names-from-the-mtcars"><i class="fa fa-check"></i><b>5.5</b> Bonus materials: mutate row names from the <code>mtcars</code><span></span></a></li>
<li class="chapter" data-level="5.6" data-path="data-transformation-3-tidy-data.html"><a href="data-transformation-3-tidy-data.html#additional-information-1"><i class="fa fa-check"></i><b>5.6</b> Additional information<span></span></a></li>
<li class="chapter" data-level="5.7" data-path="data-transformation-3-tidy-data.html"><a href="data-transformation-3-tidy-data.html#formative-homework-2"><i class="fa fa-check"></i><b>5.7</b> Formative Homework<span></span></a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-transformation-4-fine-tuned-data-manipulation.html"><a href="data-transformation-4-fine-tuned-data-manipulation.html"><i class="fa fa-check"></i><b>6</b> Data Transformation 4: Fine-tuned Data Manipulation<span></span></a>
<ul>
<li><a href="data-transformation-4-fine-tuned-data-manipulation.html#intended-learning-outcomes-6">Intended Learning Outcomes<span></span></a></li>
<li class="chapter" data-level="6.1" data-path="data-transformation-4-fine-tuned-data-manipulation.html"><a href="data-transformation-4-fine-tuned-data-manipulation.html#pre-steps-4"><i class="fa fa-check"></i><b>6.1</b> Pre-steps<span></span></a></li>
<li class="chapter" data-level="6.2" data-path="data-transformation-4-fine-tuned-data-manipulation.html"><a href="data-transformation-4-fine-tuned-data-manipulation.html#rename"><i class="fa fa-check"></i><b>6.2</b> rename()<span></span></a></li>
<li class="chapter" data-level="6.3" data-path="data-transformation-4-fine-tuned-data-manipulation.html"><a href="data-transformation-4-fine-tuned-data-manipulation.html#conditional-statements"><i class="fa fa-check"></i><b>6.3</b> Conditional statements<span></span></a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="data-transformation-4-fine-tuned-data-manipulation.html"><a href="data-transformation-4-fine-tuned-data-manipulation.html#recode"><i class="fa fa-check"></i><b>6.3.1</b> recode()<span></span></a></li>
<li class="chapter" data-level="6.3.2" data-path="data-transformation-4-fine-tuned-data-manipulation.html"><a href="data-transformation-4-fine-tuned-data-manipulation.html#ifelse"><i class="fa fa-check"></i><b>6.3.2</b> ifelse()<span></span></a></li>
<li class="chapter" data-level="6.3.3" data-path="data-transformation-4-fine-tuned-data-manipulation.html"><a href="data-transformation-4-fine-tuned-data-manipulation.html#case_when"><i class="fa fa-check"></i><b>6.3.3</b> case_when()<span></span></a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="data-transformation-4-fine-tuned-data-manipulation.html"><a href="data-transformation-4-fine-tuned-data-manipulation.html#distinct"><i class="fa fa-check"></i><b>6.4</b> distinct()<span></span></a></li>
<li class="chapter" data-level="6.5" data-path="data-transformation-4-fine-tuned-data-manipulation.html"><a href="data-transformation-4-fine-tuned-data-manipulation.html#recap"><i class="fa fa-check"></i><b>6.5</b> Recap<span></span></a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="data-transformation-4-fine-tuned-data-manipulation.html"><a href="data-transformation-4-fine-tuned-data-manipulation.html#question-1"><i class="fa fa-check"></i><b>6.5.1</b> Question 1<span></span></a></li>
<li class="chapter" data-level="6.5.2" data-path="data-transformation-4-fine-tuned-data-manipulation.html"><a href="data-transformation-4-fine-tuned-data-manipulation.html#question-2"><i class="fa fa-check"></i><b>6.5.2</b> Question 2<span></span></a></li>
<li class="chapter" data-level="6.5.3" data-path="data-transformation-4-fine-tuned-data-manipulation.html"><a href="data-transformation-4-fine-tuned-data-manipulation.html#question-3"><i class="fa fa-check"></i><b>6.5.3</b> Question 3<span></span></a></li>
<li class="chapter" data-level="6.5.4" data-path="data-transformation-4-fine-tuned-data-manipulation.html"><a href="data-transformation-4-fine-tuned-data-manipulation.html#question-4"><i class="fa fa-check"></i><b>6.5.4</b> Question 4<span></span></a></li>
<li class="chapter" data-level="6.5.5" data-path="data-transformation-4-fine-tuned-data-manipulation.html"><a href="data-transformation-4-fine-tuned-data-manipulation.html#question-5"><i class="fa fa-check"></i><b>6.5.5</b> Question 5<span></span></a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="data-transformation-4-fine-tuned-data-manipulation.html"><a href="data-transformation-4-fine-tuned-data-manipulation.html#summative-homework-2"><i class="fa fa-check"></i><b>6.6</b> Summative Homework<span></span></a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="data-visualisation-1.html"><a href="data-visualisation-1.html"><i class="fa fa-check"></i><b>7</b> Data Visualisation 1<span></span></a>
<ul>
<li class="chapter" data-level="7.1" data-path="data-visualisation-1.html"><a href="data-visualisation-1.html#pre-class-activities"><i class="fa fa-check"></i><b>7.1</b> Pre-class Activities<span></span></a></li>
<li><a href="data-visualisation-1.html#intended-learning-outcomes-7">Intended Learning Outcomes<span></span></a></li>
<li class="chapter" data-level="7.2" data-path="data-visualisation-1.html"><a href="data-visualisation-1.html#pre-steps-5"><i class="fa fa-check"></i><b>7.2</b> Pre-steps<span></span></a></li>
<li class="chapter" data-level="7.3" data-path="data-visualisation-1.html"><a href="data-visualisation-1.html#introduction-to-the-data"><i class="fa fa-check"></i><b>7.3</b> Introduction to the data<span></span></a></li>
<li class="chapter" data-level="7.4" data-path="data-visualisation-1.html"><a href="data-visualisation-1.html#some-warm-up-tasks"><i class="fa fa-check"></i><b>7.4</b> Some warm-up tasks<span></span></a></li>
<li class="chapter" data-level="7.5" data-path="data-visualisation-1.html"><a href="data-visualisation-1.html#the-package-ggplot2"><i class="fa fa-check"></i><b>7.5</b> The package GGPLOT2<span></span></a></li>
<li class="chapter" data-level="7.6" data-path="data-visualisation-1.html"><a href="data-visualisation-1.html#layering"><i class="fa fa-check"></i><b>7.6</b> Layering<span></span></a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="data-visualisation-1.html"><a href="data-visualisation-1.html#layer-1"><i class="fa fa-check"></i><b>7.6.1</b> Layer 1<span></span></a></li>
<li class="chapter" data-level="7.6.2" data-path="data-visualisation-1.html"><a href="data-visualisation-1.html#layer-2-and-onward"><i class="fa fa-check"></i><b>7.6.2</b> Layer 2 and onward<span></span></a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="data-visualisation-1.html"><a href="data-visualisation-1.html#how-do-we-choose-the-type-of-plot"><i class="fa fa-check"></i><b>7.7</b> How do we choose the type of plot?<span></span></a>
<ul>
<li class="chapter" data-level="7.7.1" data-path="data-visualisation-1.html"><a href="data-visualisation-1.html#data-format"><i class="fa fa-check"></i><b>7.7.1</b> Data format<span></span></a></li>
<li class="chapter" data-level="7.7.2" data-path="data-visualisation-1.html"><a href="data-visualisation-1.html#number-of-variables"><i class="fa fa-check"></i><b>7.7.2</b> Number of variables<span></span></a></li>
<li class="chapter" data-level="7.7.3" data-path="data-visualisation-1.html"><a href="data-visualisation-1.html#types-of-plots"><i class="fa fa-check"></i><b>7.7.3</b> Types of plots<span></span></a></li>
<li class="chapter" data-level="7.7.4" data-path="data-visualisation-1.html"><a href="data-visualisation-1.html#groupings"><i class="fa fa-check"></i><b>7.7.4</b> Groupings<span></span></a></li>
</ul></li>
<li class="chapter" data-level="7.8" data-path="data-visualisation-1.html"><a href="data-visualisation-1.html#now-lets-have-a-look-at-different-plots-with-more-complexity"><i class="fa fa-check"></i><b>7.8</b> Now letâ€™s have a look at different plots with more complexity<span></span></a></li>
<li class="chapter" data-level="7.9" data-path="data-visualisation-1.html"><a href="data-visualisation-1.html#other-plots"><i class="fa fa-check"></i><b>7.9</b> Other plots<span></span></a></li>
<li class="chapter" data-level="7.10" data-path="data-visualisation-1.html"><a href="data-visualisation-1.html#formative-homework-3"><i class="fa fa-check"></i><b>7.10</b> Formative Homework<span></span></a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="data-visualisation-2.html"><a href="data-visualisation-2.html"><i class="fa fa-check"></i><b>8</b> Data Visualisation 2<span></span></a>
<ul>
<li class="chapter" data-level="8.1" data-path="data-visualisation-2.html"><a href="data-visualisation-2.html#additional-resources"><i class="fa fa-check"></i><b>8.1</b> Additional Resources<span></span></a></li>
<li><a href="data-visualisation-2.html#intended-learning-outcomes-8">Intended Learning Outcomes<span></span></a></li>
<li class="chapter" data-level="8.2" data-path="data-visualisation-2.html"><a href="data-visualisation-2.html#pre-steps-6"><i class="fa fa-check"></i><b>8.2</b> Pre-steps<span></span></a></li>
<li class="chapter" data-level="8.3" data-path="data-visualisation-2.html"><a href="data-visualisation-2.html#re-introduction-to-the-data"><i class="fa fa-check"></i><b>8.3</b> Re-introduction to the data<span></span></a></li>
<li class="chapter" data-level="8.4" data-path="data-visualisation-2.html"><a href="data-visualisation-2.html#create-multiple-plots-in-one"><i class="fa fa-check"></i><b>8.4</b> Create multiple plots in one<span></span></a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="data-visualisation-2.html"><a href="data-visualisation-2.html#select-the-data-beforehand-and-create-different-plots."><i class="fa fa-check"></i><b>8.4.1</b> Select the data beforehand and create different plots.<span></span></a></li>
<li class="chapter" data-level="8.4.2" data-path="data-visualisation-2.html"><a href="data-visualisation-2.html#facets"><i class="fa fa-check"></i><b>8.4.2</b> Facets<span></span></a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="data-visualisation-2.html"><a href="data-visualisation-2.html#global-and-local-aesthetics"><i class="fa fa-check"></i><b>8.5</b> Global and Local aesthetics<span></span></a></li>
<li class="chapter" data-level="8.6" data-path="data-visualisation-2.html"><a href="data-visualisation-2.html#themes-making-your-plots-pretty-looking-the-way-you-want-them-to"><i class="fa fa-check"></i><b>8.6</b> Themes: Making your plots pretty: looking the way you want them to<span></span></a>
<ul>
<li class="chapter" data-level="8.6.1" data-path="data-visualisation-2.html"><a href="data-visualisation-2.html#ready-made-themes"><i class="fa fa-check"></i><b>8.6.1</b> Ready-made themes<span></span></a></li>
<li class="chapter" data-level="8.6.2" data-path="data-visualisation-2.html"><a href="data-visualisation-2.html#adding-axes-titles-and-headings"><i class="fa fa-check"></i><b>8.6.2</b> Adding axes titles and headings<span></span></a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="data-visualisation-2.html"><a href="data-visualisation-2.html#changing-colours"><i class="fa fa-check"></i><b>8.7</b> Changing colours<span></span></a></li>
<li class="chapter" data-level="8.8" data-path="data-visualisation-2.html"><a href="data-visualisation-2.html#legends"><i class="fa fa-check"></i><b>8.8</b> Legends<span></span></a></li>
<li class="chapter" data-level="8.9" data-path="data-visualisation-2.html"><a href="data-visualisation-2.html#changing-axes-ticks"><i class="fa fa-check"></i><b>8.9</b> Changing axes ticks<span></span></a></li>
<li class="chapter" data-level="8.10" data-path="data-visualisation-2.html"><a href="data-visualisation-2.html#saving-plots"><i class="fa fa-check"></i><b>8.10</b> Saving plots<span></span></a></li>
<li class="chapter" data-level="8.11" data-path="data-visualisation-2.html"><a href="data-visualisation-2.html#summative-homework-3"><i class="fa fa-check"></i><b>8.11</b> Summative Homework<span></span></a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="errors.html"><a href="errors.html"><i class="fa fa-check"></i><b>9</b> Errors<span></span></a>
<ul>
<li><a href="errors.html#intended-learning-outcomes-9">Intended Learning Outcomes<span></span></a></li>
<li class="chapter" data-level="9.1" data-path="errors.html"><a href="errors.html#errors-how-to-avoid-some-and-live-through-the-rest"><i class="fa fa-check"></i><b>9.1</b> Errors: How to avoid some and live through the rest<span></span></a></li>
<li class="chapter" data-level="9.2" data-path="errors.html"><a href="errors.html#debugging"><i class="fa fa-check"></i><b>9.2</b> Debugging<span></span></a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="errors.html"><a href="errors.html#messages-from-r"><i class="fa fa-check"></i><b>9.2.1</b> Messages from R<span></span></a></li>
<li class="chapter" data-level="9.2.2" data-path="errors.html"><a href="errors.html#error-messages"><i class="fa fa-check"></i><b>9.2.2</b> Error Messages<span></span></a></li>
<li class="chapter" data-level="9.2.3" data-path="errors.html"><a href="errors.html#multiple-errors"><i class="fa fa-check"></i><b>9.2.3</b> Multiple Errors<span></span></a></li>
<li class="chapter" data-level="9.2.4" data-path="errors.html"><a href="errors.html#finding-errors-in-longer-code-segments"><i class="fa fa-check"></i><b>9.2.4</b> Finding errors in longer code segments<span></span></a></li>
<li class="chapter" data-level="9.2.5" data-path="errors.html"><a href="errors.html#warning-messages"><i class="fa fa-check"></i><b>9.2.5</b> Warning Messages<span></span></a></li>
<li class="chapter" data-level="9.2.6" data-path="errors.html"><a href="errors.html#other-messages"><i class="fa fa-check"></i><b>9.2.6</b> Other Messages<span></span></a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="errors.html"><a href="errors.html#searching-for-help-online"><i class="fa fa-check"></i><b>9.3</b> Searching for Help Online<span></span></a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="errors.html"><a href="errors.html#googling-it"><i class="fa fa-check"></i><b>9.3.1</b> Googling It<span></span></a></li>
<li class="chapter" data-level="9.3.2" data-path="errors.html"><a href="errors.html#stack-overflow"><i class="fa fa-check"></i><b>9.3.2</b> Stack Overflow<span></span></a></li>
<li class="chapter" data-level="9.3.3" data-path="errors.html"><a href="errors.html#youtube"><i class="fa fa-check"></i><b>9.3.3</b> YouTube<span></span></a></li>
<li class="chapter" data-level="9.3.4" data-path="errors.html"><a href="errors.html#further-reading"><i class="fa fa-check"></i><b>9.3.4</b> Further Reading<span></span></a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="errors.html"><a href="errors.html#formative-exercises"><i class="fa fa-check"></i><b>9.4</b> Formative Exercises<span></span></a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="recap-before-the-final-assessment.html"><a href="recap-before-the-final-assessment.html"><i class="fa fa-check"></i><b>10</b> Recap: Before the final assessment<span></span></a>
<ul>
<li class="chapter" data-level="10.1" data-path="recap-before-the-final-assessment.html"><a href="recap-before-the-final-assessment.html#outline-for-today"><i class="fa fa-check"></i><b>10.1</b> Outline for today<span></span></a></li>
<li class="chapter" data-level="10.2" data-path="recap-before-the-final-assessment.html"><a href="recap-before-the-final-assessment.html#lecture-10-bringing-your-skills-together"><i class="fa fa-check"></i><b>10.2</b> Lecture 10: Bringing your skills together<span></span></a>
<ul>
<li><a href="recap-before-the-final-assessment.html#question-1-1">Question 1<span></span></a></li>
<li><a href="recap-before-the-final-assessment.html#question-2-1">Question 2<span></span></a></li>
<li><a href="recap-before-the-final-assessment.html#question-3-1">Question 3<span></span></a></li>
<li><a href="recap-before-the-final-assessment.html#question-4-1">Question 4<span></span></a></li>
<li><a href="recap-before-the-final-assessment.html#question-5-1">Question 5<span></span></a></li>
<li><a href="recap-before-the-final-assessment.html#question-6">Question 6<span></span></a></li>
<li><a href="recap-before-the-final-assessment.html#question-7">Question 7<span></span></a></li>
<li><a href="recap-before-the-final-assessment.html#question-8">Question 8<span></span></a></li>
<li><a href="recap-before-the-final-assessment.html#question-9">Question 9<span></span></a></li>
<li><a href="recap-before-the-final-assessment.html#question-10">Question 10<span></span></a></li>
<li><a href="recap-before-the-final-assessment.html#question-11">Question 11<span></span></a></li>
<li><a href="recap-before-the-final-assessment.html#question-12-bonus">Question 12 (Bonus)<span></span></a></li>
<li><a href="recap-before-the-final-assessment.html#question-13-bonus">Question 13 (Bonus)<span></span></a></li>
<li><a href="recap-before-the-final-assessment.html#question-14-bonus">Question 14 (Bonus)<span></span></a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="recap-before-the-final-assessment.html"><a href="recap-before-the-final-assessment.html#solutions"><i class="fa fa-check"></i><b>10.3</b> Solutions<span></span></a></li>
</ul></li>
<li><a href="appendices.html#appendices">Appendices<span></span></a>
<ul>
<li><a href="appendices.html#changing-the-appearance-of-rmarkdown">Changing the Appearance of RMarkdown<span></span></a></li>
<li><a href="appendices.html#source-materials">Source Materials<span></span></a></li>
<li><a href="appendices.html#further-reading-1">Further Reading<span></span></a>
<ul>
<li><a href="appendices.html#statistics">Statistics<span></span></a></li>
<li><a href="appendices.html#more-advanced-use-of-r">More Advanced Use of R<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>11</b> References<span></span></a></li>
<li class="divider"></li>
<li><a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" 
    target="blank"><img alt="Creative Commons License" 
    style="border-width:0" 
    src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a><li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-transformation-3-tidy-data" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">Chapter 5</span> Data Transformation 3: Tidy Data<a href="data-transformation-3-tidy-data.html#data-transformation-3-tidy-data" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="intended-learning-outcomes-5" class="section level2 unnumbered hasAnchor">
<h2>Intended Learning Outcomes<a href="data-transformation-3-tidy-data.html#intended-learning-outcomes-5" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The whole purpose of the next two lecture is to tidy up dataframe and expose you to a bunch of useful functions that would make your daily life easier when dealing with your own data. By the end of today, you will know</p>
<ol style="list-style-type: decimal">
<li>How to rearrange data from long format into to wide format and vice versa</li>
<li>How to combine and separate columns</li>
</ol>
<p>This lesson is led by <a href="https://www.psy.gla.ac.uk/otherstaff/?id=GM005">Gaby Mahrholz</a>.</p>
</div>
<div id="pre-steps-3" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> Pre-steps<a href="data-transformation-3-tidy-data.html#pre-steps-3" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>All the functions for tidying data are within <code>tidyverse</code> so we need to make sure to load it into the library. Todayâ€™s lecture will make use of built-in dataframes but for practice examples, we may want to load in the West of Scotland seasonal sunshine and rain data you encountered last week.</p>
<div class="sourceCode" id="cb254"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb254-1"><a href="data-transformation-3-tidy-data.html#cb254-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb254-2"><a href="data-transformation-3-tidy-data.html#cb254-2" aria-hidden="true" tabindex="-1"></a>sun <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;wos_seasonal_sun.csv&quot;</span>)</span>
<span id="cb254-3"><a href="data-transformation-3-tidy-data.html#cb254-3" aria-hidden="true" tabindex="-1"></a>rain <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;wos_seasonal_rain.csv&quot;</span>)</span></code></pre></div>
</div>
<div id="tidy-data" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Tidy data<a href="data-transformation-3-tidy-data.html#tidy-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><em>â€œHappy families are all alike; every unhappy family is unhappy in its own way.â€</em> â€“ Leo Tolstoy</p>
<p><em>â€œTidy datasets are all alike, but every messy dataset is messy in its own way.â€</em> â€“ Hadley Wickham</p>
<p>In this chapter, you will learn a consistent way to organise your data in R. Hadley Wickham and Garrett Grolemund call this <strong>tidy data</strong>. In most cases, data does not come in a tidy format. Researchers spend most of their time getting the data into the shape it needs to be for a particular analysis. The tools we introduce you to this week and next should form the basics for data wrangling. The idea is that tidy datasets are easier to work with in the long run.</p>
<p>There are three interrelated rules which make a dataset tidy:</p>
<ol style="list-style-type: decimal">
<li>Each variable must have its own column.</li>
<li>Each observation must have its own row.</li>
<li>Each value must have its own cell.</li>
</ol>
<p>If you want to know more about tidy data, Hadley Wickhamâ€™s paper can be found on <a href="https://vita.had.co.nz/papers/tidy-data.pdf" class="uri">https://vita.had.co.nz/papers/tidy-data.pdf</a> or check out chapter 12 in the book R for Data Science (<a href="https://r4ds.had.co.nz/tidy-data.html" class="uri">https://r4ds.had.co.nz/tidy-data.html</a>).</p>
<p>We will see today how <code>gather()</code>, <code>spread()</code>, <code>separate()</code>, and <code>unite()</code> can help us to get our data into a tidy format.</p>
</div>
<div id="gather-and-spread" class="section level2 hasAnchor" number="5.3">
<h2><span class="header-section-number">5.3</span> gather() and spread()<a href="data-transformation-3-tidy-data.html#gather-and-spread" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><code>gather()</code> and <code>spread()</code> are part of <code>tidyr</code> (also part of the tidyverse package) and help you to rearrange the shape of your data. To get your data into long format, you would use <code>gather()</code>; if you wanted to get your data from long to wide format, you would need <code>spread()</code>. Here is a representation of data in wide format and in long format.</p>
<center>
<img src="images/original-dfs-tidy.png" >
</center>
<p>We cannot say â€œwide format is tidyâ€ or â€œthe data should always be in long formatâ€; how your data needs to be formatted depends on your data (and the meaning). If x, y, and z are separate variables, then the data is tidy in the wide format as shown above; if x, y, and z are levels of a variable (<code>key</code> in the image above), you want to shape your data into long format.</p>
<p>The gif animation by Garrick Aden-Buie (<a href="https://www.garrickadenbuie.com/project/tidyexplain/#spread-and-gather" class="uri">https://www.garrickadenbuie.com/project/tidyexplain/#spread-and-gather</a>) shows you how <code>gather()</code> and <code>spread()</code> work by rearranging your data from wide to long format and vice versa.</p>
<center>
<img src="images/tidyr-spread-gather.gif" >
</center>
<div id="gather" class="section level3 hasAnchor" number="5.3.1">
<h3><span class="header-section-number">5.3.1</span> gather()<a href="data-transformation-3-tidy-data.html#gather" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We can start this lecture by looking at a practical example in the build-in datasets <code>table1</code> to <code>table5</code>. They show the number of Tuberculosis cases documented by the World Health Organization in Afghanistan, Brazil, and China between 1999 and 2000 (the full dataset is called <code>who</code>). The data is part of the <code>tidyverse</code> package, so as long as we have <code>tidyverse</code> loaded into the library, there should not be an issue in accessing this dataset.</p>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb255-1"><a href="data-transformation-3-tidy-data.html#cb255-1" aria-hidden="true" tabindex="-1"></a>table1</span></code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   country      year  cases population
##   &lt;chr&gt;       &lt;int&gt;  &lt;int&gt;      &lt;int&gt;
## 1 Afghanistan  1999    745   19987071
## 2 Afghanistan  2000   2666   20595360
## 3 Brazil       1999  37737  172006362
## 4 Brazil       2000  80488  174504898
## 5 China        1999 212258 1272915272
## 6 China        2000 213766 1280428583</code></pre>
<p><code>table1</code> has a very tidy structure as it follows the three principles above - each variable is its own column, each observation is its own row, and each value is its own cell.</p>
<center>
<img src="images/tidy_1.png" >
</center>
<p>You can see the data contains values associated with four variables (<code>country</code>, <code>year</code>, <code>cases</code>, and <code>population</code>). <code>table4a</code> however, looks a touch not right.</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb257-1"><a href="data-transformation-3-tidy-data.html#cb257-1" aria-hidden="true" tabindex="-1"></a>table4a</span></code></pre></div>
<pre><code>## # A tibble: 3 x 3
##   country     `1999` `2000`
## * &lt;chr&gt;        &lt;int&gt;  &lt;int&gt;
## 1 Afghanistan    745   2666
## 2 Brazil       37737  80488
## 3 China       212258 213766</code></pre>
<center>
<img src="images/tidy_4a_1.png" >
</center>
<p>Somehow the values for the columns <code>year</code> and <code>cases</code> are missing and instead we find two separate columns for <code>1999</code> and <code>2000</code> that have all <code>cases</code> values listed. This is a problem as <code>1999</code> and <code>2000</code> are actual values and not variables. What we want to do, is gather <code>1999</code> and <code>2000</code> in one column <code>year</code> and respective values into a second column called <code>cases</code>.</p>
<center>
<img src="images/tidy_4a.png" >
</center>
<p>Currently the data is in what is called a <code>wide format</code>. The function <code>gather()</code> comes in handy when we want to get the data into the shape of a <code>long format</code> like in <code>table1</code>. <code>gather()</code> is structured like:</p>
<p><br></p>
<center>
<img src="images/gather.PNG" >
</center>
<p><br></p>
<p>Letâ€™s apply this formula to <code>table4a</code></p>
<ul>
<li>We need a dataframe that we want to modify -&gt; <code>table4a</code></li>
<li>We need to come up with the name of a new column in which the values of 1999 and 2000 will be stored -&gt; <code>year</code></li>
<li>We need to come up with the name of a new column in which all the case values will be stored -&gt; <code>cases</code></li>
<li>And finally, we need to tell R which columns in <code>table4a</code> we want to turn into long format (i.e.Â the columns of the 7 subscales) -&gt; 1999 and 2000 (Note that â€œ1999â€ and â€œ2000â€ are non-syntactic names as they donâ€™t start with a letter. The solution is to surround them in backticks.)</li>
</ul>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="data-transformation-3-tidy-data.html#cb259-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gather</span>(table4a, <span class="at">key =</span> year, <span class="at">value =</span> cases, <span class="st">`</span><span class="at">1999</span><span class="st">`</span><span class="sc">:</span><span class="st">`</span><span class="at">2000</span><span class="st">`</span>)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   country     year   cases
##   &lt;chr&gt;       &lt;chr&gt;  &lt;int&gt;
## 1 Afghanistan 1999     745
## 2 Brazil      1999   37737
## 3 China       1999  212258
## 4 Afghanistan 2000    2666
## 5 Brazil      2000   80488
## 6 China       2000  213766</code></pre>
<div class="funfact">
<p>
Here we have only 2 columns to reshape <code>1999</code> and
<code>2000</code>. We could have written
<code>gather(table4a, year, cases, `1999`, `2000`)</code>.
</p>
</div>
<div class="task">
<p>
<strong>Your turn</strong>
</p>
<p>
Look at <code>table4b</code>. There are two separate columns
<code>1999</code> and <code>2000</code> with population values for
Afghanistan, Brazil, and China. Use the <code>gather()</code> function
on <code>table4b</code> to reshape it from wide format into long
format.
</p>
</div>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="data-transformation-3-tidy-data.html#cb261-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gather</span>(table4b, <span class="at">key =</span> year, <span class="at">value =</span> population, <span class="st">`</span><span class="at">1999</span><span class="st">`</span><span class="sc">:</span><span class="st">`</span><span class="at">2000</span><span class="st">`</span>)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   country     year  population
##   &lt;chr&gt;       &lt;chr&gt;      &lt;int&gt;
## 1 Afghanistan 1999    19987071
## 2 Brazil      1999   172006362
## 3 China       1999  1272915272
## 4 Afghanistan 2000    20595360
## 5 Brazil      2000   174504898
## 6 China       2000  1280428583</code></pre>
</div>
<div class="task">
<p>
<strong>Your turn - Second example</strong>
</p>
<p>
Remember the sunshine and rain data from last week? Letâ€™s have a look
at one of the datasets (your choice whether to look at <code>sun</code>
or <code>rain</code>). The data for <code>year</code>is in a tidy
format, but the seasonal data is spread over 4 columns
(<code>win</code>, <code>spr</code>, <code>sum</code>, and
<code>aut</code>) which is not tidy. Use <code>gather()</code> to
reshape the data into a tidier format. Store the output in the
<code>Global Environment</code> as an object called
<code>sun_tidy</code> or <code>rain_tidy</code>.
</p>
</div>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="data-transformation-3-tidy-data.html#cb263-1" aria-hidden="true" tabindex="-1"></a>sun_tidy <span class="ot">&lt;-</span> <span class="fu">gather</span>(sun, <span class="at">key =</span> season, <span class="at">value =</span> sun, win<span class="sc">:</span>aut)</span>
<span id="cb263-2"><a href="data-transformation-3-tidy-data.html#cb263-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(sun_tidy)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##    year season   sun
##   &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt;
## 1  1919 win     NA  
## 2  1920 win    111. 
## 3  1921 win    104. 
## 4  1922 win    102. 
## 5  1923 win     77.2
## 6  1924 win    117.</code></pre>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb265-1"><a href="data-transformation-3-tidy-data.html#cb265-1" aria-hidden="true" tabindex="-1"></a>rain_tidy <span class="ot">&lt;-</span> <span class="fu">gather</span>(rain, <span class="at">key =</span> season, <span class="at">value =</span> rain, win<span class="sc">:</span>aut)</span>
<span id="cb265-2"><a href="data-transformation-3-tidy-data.html#cb265-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(rain_tidy)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##    year season  rain
##   &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt;
## 1  1862 win      NA 
## 2  1863 win     640.
## 3  1864 win     421.
## 4  1865 win     386.
## 5  1866 win     568.
## 6  1867 win     481.</code></pre>
</div>
<div class="info">
<p>
<code>gather()</code> is slowly getting replaced by a function called
<code>pivot_longer()</code> which is intended to be more intuitive as
the arguments <code>key</code> and <code>value</code> were relabelled
<code>names_to</code> and <code>values_to</code> respectively. Strictly
speaking it is the same function but the order of the arguments is
slightly different. <code>gather()</code> start with the name of the
column headers, followed by the name for the values, and lastly
addresses which columns need to be reshaped into long format.
<code>pivot_longer()</code> starts of with the columns to be reshaped,
then you are asked to provide a name for the new column in which all
column headers are stored into, and then about what you would want to
label the column of the values.
</p>
</div>
<p>Just as an example, we reshaped the <code>sun</code> data from wide to long format with <code>gather()</code>â€¦</p>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb267-1"><a href="data-transformation-3-tidy-data.html#cb267-1" aria-hidden="true" tabindex="-1"></a>sun_tidy <span class="ot">&lt;-</span> <span class="fu">gather</span>(sun, <span class="at">key =</span> season, <span class="at">value =</span> sun, win<span class="sc">:</span>aut)</span>
<span id="cb267-2"><a href="data-transformation-3-tidy-data.html#cb267-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb267-3"><a href="data-transformation-3-tidy-data.html#cb267-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(sun_tidy)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##    year season   sun
##   &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt;
## 1  1919 win     NA  
## 2  1920 win    111. 
## 3  1921 win    104. 
## 4  1922 win    102. 
## 5  1923 win     77.2
## 6  1924 win    117.</code></pre>
<p>Using <code>pivot_longer()</code> will get you the same result, yet the data is arranged by year rather than by season.</p>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb269-1"><a href="data-transformation-3-tidy-data.html#cb269-1" aria-hidden="true" tabindex="-1"></a>sun_tidy_piv <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(sun, <span class="at">cols =</span> win<span class="sc">:</span>aut, <span class="at">names_to =</span> <span class="st">&quot;season&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;sun&quot;</span>)</span>
<span id="cb269-2"><a href="data-transformation-3-tidy-data.html#cb269-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb269-3"><a href="data-transformation-3-tidy-data.html#cb269-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(sun_tidy_piv)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##    year season   sun
##   &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt;
## 1  1919 win      NA 
## 2  1919 spr     414.
## 3  1919 sum     524.
## 4  1919 aut     257.
## 5  1920 win     111.
## 6  1920 spr     328.</code></pre>
<div class="danger">
<p>
When using <code>pivot_longer()</code>, make sure to surround the new
column names with quotation marks. <code>gather()</code> is more
flexible and gets the job done whether you use quotation marks for the
new column headers or not.
</p>
</div>
</div>
<div id="spread" class="section level3 hasAnchor" number="5.3.2">
<h3><span class="header-section-number">5.3.2</span> spread()<a href="data-transformation-3-tidy-data.html#spread" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Now onto the reverse. <code>spread()</code> will spread the data from <code>long</code> into <code>wide format</code>. When you have observations that are scattered across multiple rows, you can use <code>spread()</code> to split those rows up into separate variables. Letâ€™s take a look at <code>table2</code>.</p>
<div class="sourceCode" id="cb271"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb271-1"><a href="data-transformation-3-tidy-data.html#cb271-1" aria-hidden="true" tabindex="-1"></a>table2</span></code></pre></div>
<pre><code>## # A tibble: 12 x 4
##    country      year type            count
##    &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;           &lt;int&gt;
##  1 Afghanistan  1999 cases             745
##  2 Afghanistan  1999 population   19987071
##  3 Afghanistan  2000 cases            2666
##  4 Afghanistan  2000 population   20595360
##  5 Brazil       1999 cases           37737
##  6 Brazil       1999 population  172006362
##  7 Brazil       2000 cases           80488
##  8 Brazil       2000 population  174504898
##  9 China        1999 cases          212258
## 10 China        1999 population 1272915272
## 11 China        2000 cases          213766
## 12 China        2000 population 1280428583</code></pre>
<center>
<img src="images/tidy_2_1.png" >
</center>
<p><code>table2</code> has the variables <code>cases</code> and <code>population</code> stored in one column <code>type</code> and their respective values in <code>count</code>. However, <code>cases</code> and <code>population</code> are separate variables rather than values of <code>type</code>. So best to get them spread out into their own columns as shown in the image below.</p>
<center>
<img src="images/tidy_2.png" >
</center>
<p>Take a look how <code>spread()</code> achieves that.</p>
<p><br></p>
<center>
<img src="images/spread.PNG" >
</center>
<p><br></p>
<p>Letâ€™s apply the formula above to <code>table2</code>:</p>
<ul>
<li>We need a dataframe that we want to modify -&gt; <code>table2</code></li>
<li>We need to decide which of the columns in <code>table2</code> will become the new column headers -&gt; <code>type</code></li>
<li>We need to decide which of the columns in <code>table2</code> has all the data in it that will become the new cell values -&gt; <code>count</code></li>
</ul>
<div class="sourceCode" id="cb273"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb273-1"><a href="data-transformation-3-tidy-data.html#cb273-1" aria-hidden="true" tabindex="-1"></a><span class="fu">spread</span>(table2, <span class="at">key =</span> type, <span class="at">value =</span> count)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   country      year  cases population
##   &lt;chr&gt;       &lt;int&gt;  &lt;int&gt;      &lt;int&gt;
## 1 Afghanistan  1999    745   19987071
## 2 Afghanistan  2000   2666   20595360
## 3 Brazil       1999  37737  172006362
## 4 Brazil       2000  80488  174504898
## 5 China        1999 212258 1272915272
## 6 China        2000 213766 1280428583</code></pre>
<p>Voila, <code>cases</code> and <code>population</code> are in their own columns.</p>
<p>Let me modify <code>table1</code> a tiny bit.</p>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb275-1"><a href="data-transformation-3-tidy-data.html#cb275-1" aria-hidden="true" tabindex="-1"></a>table1_mod <span class="ot">&lt;-</span> table1 <span class="sc">%&gt;%</span> </span>
<span id="cb275-2"><a href="data-transformation-3-tidy-data.html#cb275-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percent =</span> cases<span class="sc">/</span> population <span class="sc">*</span> <span class="dv">100</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb275-3"><a href="data-transformation-3-tidy-data.html#cb275-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gather</span>(variable, values, cases<span class="sc">:</span>percent)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">country</th>
<th align="right">year</th>
<th align="left">variable</th>
<th align="right">values</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Afghanistan</td>
<td align="right">1999</td>
<td align="left">cases</td>
<td align="right">7.450000e+02</td>
</tr>
<tr class="even">
<td align="left">Afghanistan</td>
<td align="right">2000</td>
<td align="left">cases</td>
<td align="right">2.666000e+03</td>
</tr>
<tr class="odd">
<td align="left">Brazil</td>
<td align="right">1999</td>
<td align="left">cases</td>
<td align="right">3.773700e+04</td>
</tr>
<tr class="even">
<td align="left">Brazil</td>
<td align="right">2000</td>
<td align="left">cases</td>
<td align="right">8.048800e+04</td>
</tr>
<tr class="odd">
<td align="left">China</td>
<td align="right">1999</td>
<td align="left">cases</td>
<td align="right">2.122580e+05</td>
</tr>
<tr class="even">
<td align="left">China</td>
<td align="right">2000</td>
<td align="left">cases</td>
<td align="right">2.137660e+05</td>
</tr>
<tr class="odd">
<td align="left">Afghanistan</td>
<td align="right">1999</td>
<td align="left">population</td>
<td align="right">1.998707e+07</td>
</tr>
<tr class="even">
<td align="left">Afghanistan</td>
<td align="right">2000</td>
<td align="left">population</td>
<td align="right">2.059536e+07</td>
</tr>
<tr class="odd">
<td align="left">Brazil</td>
<td align="right">1999</td>
<td align="left">population</td>
<td align="right">1.720064e+08</td>
</tr>
<tr class="even">
<td align="left">Brazil</td>
<td align="right">2000</td>
<td align="left">population</td>
<td align="right">1.745049e+08</td>
</tr>
<tr class="odd">
<td align="left">China</td>
<td align="right">1999</td>
<td align="left">population</td>
<td align="right">1.272915e+09</td>
</tr>
<tr class="even">
<td align="left">China</td>
<td align="right">2000</td>
<td align="left">population</td>
<td align="right">1.280429e+09</td>
</tr>
<tr class="odd">
<td align="left">Afghanistan</td>
<td align="right">1999</td>
<td align="left">percent</td>
<td align="right">3.727400e-03</td>
</tr>
<tr class="even">
<td align="left">Afghanistan</td>
<td align="right">2000</td>
<td align="left">percent</td>
<td align="right">1.294470e-02</td>
</tr>
<tr class="odd">
<td align="left">Brazil</td>
<td align="right">1999</td>
<td align="left">percent</td>
<td align="right">2.193930e-02</td>
</tr>
<tr class="even">
<td align="left">Brazil</td>
<td align="right">2000</td>
<td align="left">percent</td>
<td align="right">4.612360e-02</td>
</tr>
<tr class="odd">
<td align="left">China</td>
<td align="right">1999</td>
<td align="left">percent</td>
<td align="right">1.667500e-02</td>
</tr>
<tr class="even">
<td align="left">China</td>
<td align="right">2000</td>
<td align="left">percent</td>
<td align="right">1.669490e-02</td>
</tr>
</tbody>
</table>
<p>The output in <code>values</code> looks a bit strange now. This is just because the column <code>values</code> holds very large and very small numbers.</p>
<div class="task">
<p>
<strong>Your turn</strong>
</p>
<p>
In the modified table above <code>table1_mod</code>, we added a
<code>percent</code> column to see how much percentage of the population
had Tuberculosis in 1999 and 2000 in each of the countries Afghanistan,
Brazil, and China. But somehow, all numerical information has ended up
in 1 column (values).
</p>
<p>
Your task is to spread the data back out, so that cases, population,
and percentage values are in their own columns, titled as
<code>cases</code>, <code>population</code>, and <code>percent</code>
respectively. Store the new object in the
<code>Global Environment</code> as <code>table1_mod_corrected</code>.
When you are done, <code>table1_mod_corrected</code> should look like
thisâ€¦
</p>
</div>
<table>
<thead>
<tr class="header">
<th align="left">country</th>
<th align="right">year</th>
<th align="right">cases</th>
<th align="right">percent</th>
<th align="right">population</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Afghanistan</td>
<td align="right">1999</td>
<td align="right">745</td>
<td align="right">0.0037274</td>
<td align="right">19987071</td>
</tr>
<tr class="even">
<td align="left">Afghanistan</td>
<td align="right">2000</td>
<td align="right">2666</td>
<td align="right">0.0129447</td>
<td align="right">20595360</td>
</tr>
<tr class="odd">
<td align="left">Brazil</td>
<td align="right">1999</td>
<td align="right">37737</td>
<td align="right">0.0219393</td>
<td align="right">172006362</td>
</tr>
<tr class="even">
<td align="left">Brazil</td>
<td align="right">2000</td>
<td align="right">80488</td>
<td align="right">0.0461236</td>
<td align="right">174504898</td>
</tr>
<tr class="odd">
<td align="left">China</td>
<td align="right">1999</td>
<td align="right">212258</td>
<td align="right">0.0166750</td>
<td align="right">1272915272</td>
</tr>
<tr class="even">
<td align="left">China</td>
<td align="right">2000</td>
<td align="right">213766</td>
<td align="right">0.0166949</td>
<td align="right">1280428583</td>
</tr>
</tbody>
</table>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb276-1"><a href="data-transformation-3-tidy-data.html#cb276-1" aria-hidden="true" tabindex="-1"></a>table1_mod_corrected <span class="ot">&lt;-</span> <span class="fu">spread</span>(table1_mod, <span class="at">key =</span> variable, <span class="at">value =</span> values)</span></code></pre></div>
</div>
<div class="task">
<p>
<strong>Your turn - Second example</strong>
</p>
<center>
<img src="images/sneaky_fox_untidy.png" >
</center>
<p>
A sneaky fox came to your house and messed up all your tidy data.
Undo the works of the sneaky fox by reshaping the data in
<code>sun_fail</code> and <code>rain_fail</code> into a tidier format.
Store the tidier data in your <code>Global Environment</code> as
<code>sun_outfoxed</code> and <code>rain_outfoxed</code>.
</p>
<p>
Your final datasets should have the columns <code>year</code>,
<code>season</code>, and <code>sun</code> or <code>year</code>,
<code>season</code>, and <code>rain</code> in exactly that order.
</p>
</div>
<p>This is what the fox did:</p>
<div class="sourceCode" id="cb277"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb277-1"><a href="data-transformation-3-tidy-data.html#cb277-1" aria-hidden="true" tabindex="-1"></a>sun_fail <span class="ot">&lt;-</span> sun_tidy <span class="sc">%&gt;%</span> </span>
<span id="cb277-2"><a href="data-transformation-3-tidy-data.html#cb277-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">408</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb277-3"><a href="data-transformation-3-tidy-data.html#cb277-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gather</span>(col_names, values, <span class="fu">c</span>(year, sun))</span>
<span id="cb277-4"><a href="data-transformation-3-tidy-data.html#cb277-4" aria-hidden="true" tabindex="-1"></a>rain_fail <span class="ot">&lt;-</span> rain_tidy <span class="sc">%&gt;%</span> </span>
<span id="cb277-5"><a href="data-transformation-3-tidy-data.html#cb277-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">616</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb277-6"><a href="data-transformation-3-tidy-data.html#cb277-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gather</span>(col_names, values, <span class="fu">c</span>(year, rain))</span></code></pre></div>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb278-1"><a href="data-transformation-3-tidy-data.html#cb278-1" aria-hidden="true" tabindex="-1"></a>sun_outfoxed <span class="ot">&lt;-</span> <span class="fu">spread</span>(sun_fail, <span class="at">key =</span> col_names, <span class="at">value =</span> values) <span class="sc">%&gt;%</span> </span>
<span id="cb278-2"><a href="data-transformation-3-tidy-data.html#cb278-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, season, sun)</span>
<span id="cb278-3"><a href="data-transformation-3-tidy-data.html#cb278-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(sun_outfoxed)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##    year season   sun
##   &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt;
## 1  1919 aut     257.
## 2  1920 aut     219.
## 3  1921 aut     222.
## 4  1922 aut     252.
## 5  1923 aut     245.
## 6  1924 aut     221.</code></pre>
<div class="sourceCode" id="cb280"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb280-1"><a href="data-transformation-3-tidy-data.html#cb280-1" aria-hidden="true" tabindex="-1"></a>rain_outfoxed <span class="ot">&lt;-</span> <span class="fu">spread</span>(rain_fail, <span class="at">key =</span> col_names, <span class="at">value =</span> values) <span class="sc">%&gt;%</span> </span>
<span id="cb280-2"><a href="data-transformation-3-tidy-data.html#cb280-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, season, rain)</span>
<span id="cb280-3"><a href="data-transformation-3-tidy-data.html#cb280-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(rain_outfoxed)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##    year season  rain
##   &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt;
## 1  1862 aut     456.
## 2  1863 aut     494 
## 3  1864 aut     434.
## 4  1865 aut     322.
## 5  1866 aut     483 
## 6  1867 aut     353.</code></pre>
</div>
<div class="info">
<p>
<code>spread()</code> is slowly getting replaced by a function called
<code>pivot_wider()</code> which again is intended to be more intuitive
as the arguments <code>key</code> and <code>value</code> were relabelled
<code>names_from</code> and <code>values_from</code> respectively. As
weâ€™ve seen with <code>gather()</code> and <code>pivot_longer()</code>,
<code>spread()</code> and <code>pivot_wider()</code> pretty much do the
same job.
</p>
</div>
<p>Just as an example, we reshaped the <code>sun_fail</code> data from long to wide format with <code>spread()</code>â€¦</p>
<div class="sourceCode" id="cb282"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb282-1"><a href="data-transformation-3-tidy-data.html#cb282-1" aria-hidden="true" tabindex="-1"></a>sun_outfoxed <span class="ot">&lt;-</span> <span class="fu">spread</span>(sun_fail, <span class="at">key =</span> col_names, <span class="at">value =</span> values)</span>
<span id="cb282-2"><a href="data-transformation-3-tidy-data.html#cb282-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb282-3"><a href="data-transformation-3-tidy-data.html#cb282-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(sun_outfoxed)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   season     n   sun  year
##   &lt;chr&gt;  &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 aut      307  257.  1919
## 2 aut      308  219.  1920
## 3 aut      309  222.  1921
## 4 aut      310  252.  1922
## 5 aut      311  245.  1923
## 6 aut      312  221.  1924</code></pre>
<p>Using <code>pivot_wider()</code> will get you the same result, but the data is arranged slightly differently.</p>
<div class="sourceCode" id="cb284"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb284-1"><a href="data-transformation-3-tidy-data.html#cb284-1" aria-hidden="true" tabindex="-1"></a>sun_outfoxed_piv <span class="ot">&lt;-</span> <span class="fu">pivot_wider</span>(sun_fail, <span class="at">names_from =</span> col_names, <span class="at">values_from =</span> values)</span>
<span id="cb284-2"><a href="data-transformation-3-tidy-data.html#cb284-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb284-3"><a href="data-transformation-3-tidy-data.html#cb284-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(sun_outfoxed_piv)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   season     n  year   sun
##   &lt;chr&gt;  &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 win        1  1919  NA  
## 2 win        2  1920 111. 
## 3 win        3  1921 104. 
## 4 win        4  1922 102. 
## 5 win        5  1923  77.2
## 6 win        6  1924 117.</code></pre>
<div class="danger">
<p>
When using <code>pivot_wider()</code>, make sure you do not surround
the <code>names_from</code> and <code>values_from</code> arguments with
quotation marks. They refer to existing columns rather than column names
we have to create when using <code>pivot_longer()</code>.
</p>
</div>
</div>
</div>
<div id="separate-and-unite" class="section level2 hasAnchor" number="5.4">
<h2><span class="header-section-number">5.4</span> separate() and unite()<a href="data-transformation-3-tidy-data.html#separate-and-unite" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><code>separate()</code> turns a single character column into multiple columns, whereas <code>unite()</code> combines the values of multiple columns into one column.</p>
<div id="separate" class="section level3 hasAnchor" number="5.4.1">
<h3><span class="header-section-number">5.4.1</span> separate()<a href="data-transformation-3-tidy-data.html#separate" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Take a look at <code>table3</code>.</p>
<div class="sourceCode" id="cb286"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb286-1"><a href="data-transformation-3-tidy-data.html#cb286-1" aria-hidden="true" tabindex="-1"></a>table3</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   country      year rate             
## * &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;            
## 1 Afghanistan  1999 745/19987071     
## 2 Afghanistan  2000 2666/20595360    
## 3 Brazil       1999 37737/172006362  
## 4 Brazil       2000 80488/174504898  
## 5 China        1999 212258/1272915272
## 6 China        2000 213766/1280428583</code></pre>
<p>In <code>table3</code>, two out of three principles of tidy data are violated. There are multiple values stored in column <code>rate</code> (rule 3) but these multiple values also belong to two different variables - <code>cases</code> and <code>population</code> respectively (rule 1).</p>
<center>
<img src="images/tidy_3_1.png" >
</center>
<p>Here, we would use <code>separate()</code> to split the column <code>rate</code> into two columns <code>cases</code> and <code>population</code>.</p>
<center>
<img src="images/tidy_3.png" >
</center>
<p>The function <code>separate()</code> is structured like this:</p>
<p><br></p>
<center>
<img src="images/separate.PNG" >
</center>
<p><br></p>
<p>We would need</p>
<ul>
<li>the data in which the column to separate is located -&gt; <code>table3</code>,</li>
<li>the actual column we want to separate -&gt; <code>rate</code>,</li>
<li>the into argument asking into how many columns we want to separate the old column and what we want to call these new columns -&gt; <code>c("cases", "population")</code>, and</li>
<li>a separator argument -&gt; <code>"/"</code>.</li>
</ul>
<div class="sourceCode" id="cb288"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb288-1"><a href="data-transformation-3-tidy-data.html#cb288-1" aria-hidden="true" tabindex="-1"></a><span class="fu">separate</span>(table3, rate, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;cases&quot;</span>, <span class="st">&quot;population&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   country      year cases  population
##   &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;  &lt;chr&gt;     
## 1 Afghanistan  1999 745    19987071  
## 2 Afghanistan  2000 2666   20595360  
## 3 Brazil       1999 37737  172006362 
## 4 Brazil       2000 80488  174504898 
## 5 China        1999 212258 1272915272
## 6 China        2000 213766 1280428583</code></pre>
<p>R has put all cell information before the <code>/</code> into a column we named <code>cases</code>, and everything after the <code>/</code> into the column we decided to call <code>population</code>. <code>/</code> will not appear in either column <code>cases</code> or <code>population</code>. The data is now in a tidy format.</p>
<div class="info">
<p>
By the way, the separator argument <code>sep =</code> can be any
non-alphanumeric character, for example:
</p>
<ul>
<li>
underscore (â€œ_â€œ),
</li>
<li>
comma (â€œ,â€),
</li>
<li>
semi-colon (â€œ;â€),
</li>
<li>
colon (â€œ:â€),
</li>
<li>
forward-slash (â€œ/â€),
</li>
<li>
space (â€ â€œ) or
</li>
<li>
nothing (â€œâ€œ).
</li>
</ul>
<p>
But watch out! When the separator is a <code>full stop</code>, you
would need to add a double backward slash in front of it
(<code>sep = â€œ\\.â€</code>).
</p>
</div>
</div>
<div id="additional-arguments-for-separate" class="section level3 hasAnchor" number="5.4.2">
<h3><span class="header-section-number">5.4.2</span> additional arguments for separate()<a href="data-transformation-3-tidy-data.html#additional-arguments-for-separate" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="retaining-the-original-column" class="section level4 hasAnchor" number="5.4.2.1">
<h4><span class="header-section-number">5.4.2.1</span> Retaining the original column<a href="data-transformation-3-tidy-data.html#retaining-the-original-column" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>If for some reason, you wanted to keep the original column, you can set an additional argument <code>remove</code> to <code>FALSE</code>.</p>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb290-1"><a href="data-transformation-3-tidy-data.html#cb290-1" aria-hidden="true" tabindex="-1"></a><span class="fu">separate</span>(table3, rate, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;cases&quot;</span>, <span class="st">&quot;population&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>, <span class="at">remove =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 5
##   country      year rate              cases  population
##   &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;             &lt;chr&gt;  &lt;chr&gt;     
## 1 Afghanistan  1999 745/19987071      745    19987071  
## 2 Afghanistan  2000 2666/20595360     2666   20595360  
## 3 Brazil       1999 37737/172006362   37737  172006362 
## 4 Brazil       2000 80488/174504898   80488  174504898 
## 5 China        1999 212258/1272915272 212258 1272915272
## 6 China        2000 213766/1280428583 213766 1280428583</code></pre>
</div>
<div id="dropping-parts-of-the-original-column" class="section level4 hasAnchor" number="5.4.2.2">
<h4><span class="header-section-number">5.4.2.2</span> Dropping parts of the original column<a href="data-transformation-3-tidy-data.html#dropping-parts-of-the-original-column" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>What if we were just interested retaining part of the data in the cell, for example keeping the column <code>cases</code> but not <code>population</code>. The solution would be to work with an <code>NA</code> argument. Defining the new columns as <code>cases</code> and <code>NA</code> will keep everything before the separator in the column <code>cases</code>, and drops everything after the separator.</p>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb292-1"><a href="data-transformation-3-tidy-data.html#cb292-1" aria-hidden="true" tabindex="-1"></a><span class="fu">separate</span>(table3, rate, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;cases&quot;</span>, <span class="cn">NA</span>), <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   country      year cases 
##   &lt;chr&gt;       &lt;int&gt; &lt;chr&gt; 
## 1 Afghanistan  1999 745   
## 2 Afghanistan  2000 2666  
## 3 Brazil       1999 37737 
## 4 Brazil       2000 80488 
## 5 China        1999 212258
## 6 China        2000 213766</code></pre>
<div class="task">
<p>
<strong>Your turn</strong>
</p>
<p>
Separate the column <code>rate</code> in <code>table3</code> to keep
only the values after the separator in a column called
<code>population</code>. Drop the values in front of the separator.
Retain the column <code>rate</code> as well.
</p>
</div>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb294"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb294-1"><a href="data-transformation-3-tidy-data.html#cb294-1" aria-hidden="true" tabindex="-1"></a><span class="fu">separate</span>(table3, rate, <span class="at">into =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="st">&quot;population&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>, <span class="at">remove =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   country      year rate              population
##   &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;             &lt;chr&gt;     
## 1 Afghanistan  1999 745/19987071      19987071  
## 2 Afghanistan  2000 2666/20595360     20595360  
## 3 Brazil       1999 37737/172006362   172006362 
## 4 Brazil       2000 80488/174504898   174504898 
## 5 China        1999 212258/1272915272 1272915272
## 6 China        2000 213766/1280428583 1280428583</code></pre>
</div>
</div>
<div id="separating-by-position" class="section level4 hasAnchor" number="5.4.2.3">
<h4><span class="header-section-number">5.4.2.3</span> Separating by position<a href="data-transformation-3-tidy-data.html#separating-by-position" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>It is also possible to separate by position. <code>sep = 2</code> would split the column between the second and third character/ number etc.</p>
<p>Letâ€™s try that the separation by position. We will keep 4 letters from each <code>country</code> name rather than the whole word, and drop the rest.</p>
<div class="sourceCode" id="cb296"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb296-1"><a href="data-transformation-3-tidy-data.html#cb296-1" aria-hidden="true" tabindex="-1"></a><span class="fu">separate</span>(table3, country, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;country&quot;</span>, <span class="cn">NA</span>), <span class="at">sep =</span> <span class="dv">4</span>)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   country  year rate             
##   &lt;chr&gt;   &lt;int&gt; &lt;chr&gt;            
## 1 Afgh     1999 745/19987071     
## 2 Afgh     2000 2666/20595360    
## 3 Braz     1999 37737/172006362  
## 4 Braz     2000 80488/174504898  
## 5 Chin     1999 212258/1272915272
## 6 Chin     2000 213766/1280428583</code></pre>
</div>
<div id="separating-into-more-than-2-columns" class="section level4 hasAnchor" number="5.4.2.4">
<h4><span class="header-section-number">5.4.2.4</span> Separating into more than 2 columns<a href="data-transformation-3-tidy-data.html#separating-into-more-than-2-columns" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Special case. Letâ€™s modify <code>table3</code> a little bit by adding a new column with a value of 200 and unite that column with column <code>rate</code>.</p>
<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb298-1"><a href="data-transformation-3-tidy-data.html#cb298-1" aria-hidden="true" tabindex="-1"></a>table3_mod <span class="ot">&lt;-</span> table3 <span class="sc">%&gt;%</span> </span>
<span id="cb298-2"><a href="data-transformation-3-tidy-data.html#cb298-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">new =</span> <span class="dv">200</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb298-3"><a href="data-transformation-3-tidy-data.html#cb298-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unite</span>(rate, rate, new, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>)</span></code></pre></div>
<p>Now column <code>rate</code> has 3 sets of numbers, separated by two <code>/</code>. If we define we want to split the data into 2 columns, the first 2 sets of numbers are kept, and the third one is dropped with a warning. The code is still executed but the warning indicates that it might not have gone as planned. Hence, it is always good to check that the data object in the <code>Global Environment</code> looks exactly as what you have intended.</p>
<div class="sourceCode" id="cb299"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb299-1"><a href="data-transformation-3-tidy-data.html#cb299-1" aria-hidden="true" tabindex="-1"></a><span class="fu">separate</span>(table3_mod, rate, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;cases&quot;</span>, <span class="st">&quot;population&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>)</span></code></pre></div>
<pre><code>## Warning: Expected 2 pieces. Additional pieces discarded in 6 rows [1, 2, 3, 4,
## 5, 6].</code></pre>
<pre><code>## # A tibble: 6 x 4
##   country      year cases  population
##   &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;  &lt;chr&gt;     
## 1 Afghanistan  1999 745    19987071  
## 2 Afghanistan  2000 2666   20595360  
## 3 Brazil       1999 37737  172006362 
## 4 Brazil       2000 80488  174504898 
## 5 China        1999 212258 1272915272
## 6 China        2000 213766 1280428583</code></pre>
<p>If we are separating the columns and wanted to keep all sets of numbers, one in each column, we would use an into argument that includes 3 new columns.</p>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb302-1"><a href="data-transformation-3-tidy-data.html#cb302-1" aria-hidden="true" tabindex="-1"></a><span class="fu">separate</span>(table3_mod, rate, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;cases&quot;</span>, <span class="st">&quot;population&quot;</span>, <span class="st">&quot;200&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 5
##   country      year cases  population `200`
##   &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;  &lt;chr&gt;      &lt;chr&gt;
## 1 Afghanistan  1999 745    19987071   200  
## 2 Afghanistan  2000 2666   20595360   200  
## 3 Brazil       1999 37737  172006362  200  
## 4 Brazil       2000 80488  174504898  200  
## 5 China        1999 212258 1272915272 200  
## 6 China        2000 213766 1280428583 200</code></pre>
<div class="funfact">
<p>
Technically, you would not need a separator argument in the case
above, as <code>separate()</code> splits the data whenever it detects a
non-alphanumeric character (i.e.Â a character that isnâ€™t a number or
letter). Saying that, the separator argument is needed when your column
contains non-alphanumeric characters as part of your cell values.
</p>
</div>
<p>If the values in <code>population</code> and <code>200</code> (separated by a <code>/</code>) were some sort of <code>ID_code</code>, <strong>AND</strong> we wanted to split the data into 2 columns, after the first <code>/</code> only, we would have to include an <code>extra</code> argument, and set it to <code>"merge"</code>.</p>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb304-1"><a href="data-transformation-3-tidy-data.html#cb304-1" aria-hidden="true" tabindex="-1"></a><span class="fu">separate</span>(table3_mod, rate, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;cases&quot;</span>, <span class="st">&quot;ID_code&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>, <span class="at">extra =</span> <span class="st">&quot;merge&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   country      year cases  ID_code       
##   &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;  &lt;chr&gt;         
## 1 Afghanistan  1999 745    19987071/200  
## 2 Afghanistan  2000 2666   20595360/200  
## 3 Brazil       1999 37737  172006362/200 
## 4 Brazil       2000 80488  174504898/200 
## 5 China        1999 212258 1272915272/200
## 6 China        2000 213766 1280428583/200</code></pre>
<div class="question">
<p>
There is still a tiny bit off in data above. Can you spot what it is?
* Hint: Think about if you wanted to sum up all the TB cases occurred in
the 3 countries within the years 1999, and 2000.
</p>
</div>
<div class="webex-solution">
<button>
Solution
</button>
<div class="solved">
<p>
The new columns <code>ID_code</code> and <code>cases</code> are
<code>character</code> columns. Whilst this is fine for
<code>ID_code</code>, it is less beneficial for <code>cases.</code> If
we wanted to sum up the cases column, values would need to be
<code>numerical</code>. We could use the converting function
<code>as.integer()</code>.
</p>
</div>
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb306-1"><a href="data-transformation-3-tidy-data.html#cb306-1" aria-hidden="true" tabindex="-1"></a>table3_mod <span class="sc">%&gt;%</span> </span>
<span id="cb306-2"><a href="data-transformation-3-tidy-data.html#cb306-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(rate, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;cases&quot;</span>, <span class="st">&quot;ID_code&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>, <span class="at">extra =</span> <span class="st">&quot;merge&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb306-3"><a href="data-transformation-3-tidy-data.html#cb306-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cases =</span> <span class="fu">as.integer</span>(cases))</span></code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   country      year  cases ID_code       
##   &lt;chr&gt;       &lt;int&gt;  &lt;int&gt; &lt;chr&gt;         
## 1 Afghanistan  1999    745 19987071/200  
## 2 Afghanistan  2000   2666 20595360/200  
## 3 Brazil       1999  37737 172006362/200 
## 4 Brazil       2000  80488 174504898/200 
## 5 China        1999 212258 1272915272/200
## 6 China        2000 213766 1280428583/200</code></pre>
</div>
</div>
<div id="converting-data-types" class="section level4 hasAnchor" number="5.4.2.5">
<h4><span class="header-section-number">5.4.2.5</span> Converting data types<a href="data-transformation-3-tidy-data.html#converting-data-types" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The slightly quicker and perhaps more elegant solution would be to add another argument <code>convert</code> to <code>separate()</code> and set it to <code>TRUE</code>. This will convert <code>cases</code> to <code>integer</code> and leave <code>ID_code</code> as <code>character</code> due to the non-numerical <code>/</code>.</p>
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb308-1"><a href="data-transformation-3-tidy-data.html#cb308-1" aria-hidden="true" tabindex="-1"></a>table3_mod <span class="sc">%&gt;%</span> </span>
<span id="cb308-2"><a href="data-transformation-3-tidy-data.html#cb308-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(rate, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;cases&quot;</span>, <span class="st">&quot;ID_code&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>, <span class="at">extra =</span> <span class="st">&quot;merge&quot;</span>, <span class="at">convert =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   country      year  cases ID_code       
##   &lt;chr&gt;       &lt;int&gt;  &lt;int&gt; &lt;chr&gt;         
## 1 Afghanistan  1999    745 19987071/200  
## 2 Afghanistan  2000   2666 20595360/200  
## 3 Brazil       1999  37737 172006362/200 
## 4 Brazil       2000  80488 174504898/200 
## 5 China        1999 212258 1272915272/200
## 6 China        2000 213766 1280428583/200</code></pre>
</div>
</div>
<div id="unite" class="section level3 hasAnchor" number="5.4.3">
<h3><span class="header-section-number">5.4.3</span> unite()<a href="data-transformation-3-tidy-data.html#unite" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Take a look at <code>table5</code>.</p>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb310-1"><a href="data-transformation-3-tidy-data.html#cb310-1" aria-hidden="true" tabindex="-1"></a>table5</span></code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   country     century year  rate             
## * &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;            
## 1 Afghanistan 19      99    745/19987071     
## 2 Afghanistan 20      00    2666/20595360    
## 3 Brazil      19      99    37737/172006362  
## 4 Brazil      20      00    80488/174504898  
## 5 China       19      99    212258/1272915272
## 6 China       20      00    213766/1280428583</code></pre>
<p>Here the values in column <code>year</code> are split into <code>century</code> and <code>year</code> which is not very useful. Best to merge the 2 columns together as shown in the image below.</p>
<center>
<img src="images/tidy_5.png" >
</center>
<p><code>unite()</code> (the inverse of separate) can help to combine the values of <code>century</code> and <code>year</code> into a single column. It is used less frequently than itâ€™s counterpart, but is still a useful function to know.</p>
<p>The function <code>unite()</code> is structured like this:</p>
<p><br></p>
<center>
<img src="images/unite.PNG" >
</center>
<p><br></p>
<p>We would need the data <code>table5</code>, a new column we want to create <code>year</code>, the two columns we would like to combine (<code>century</code> and <code>year</code>), and define the separator as â€œnothingâ€ since the default is sep = â€œ_â€œ.</p>
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb312-1"><a href="data-transformation-3-tidy-data.html#cb312-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unite</span>(table5, year, century, year, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   country     year  rate             
##   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;            
## 1 Afghanistan 1999  745/19987071     
## 2 Afghanistan 2000  2666/20595360    
## 3 Brazil      1999  37737/172006362  
## 4 Brazil      2000  80488/174504898  
## 5 China       1999  212258/1272915272
## 6 China       2000  213766/1280428583</code></pre>
<p>Yay! The data of <code>table5</code> is in a tidier format now - at least for column <code>year</code>. Ah, but we didnâ€™t save the changes as an object in our <code>Global Environment</code>.</p>
<div class="task">
<p>
<strong>Your turn</strong>
</p>
<p>
Letâ€™s combine the two steps of tidying <code>table5</code> in a
single pipe <code>%&gt;%</code> - separate the <code>rate</code> column
into <code>cases</code> and <code>population</code>, and unite the
columns <code>year</code> and <code>century</code> into a new column
<code>year</code>. Store the new object as <code>tb_cases</code> in the
<code>Global Environment</code>. Make sure, the columns
<code>cases</code> and <code>population</code> are <code>integer</code>
values.
</p>
</div>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb314-1"><a href="data-transformation-3-tidy-data.html#cb314-1" aria-hidden="true" tabindex="-1"></a>tb_cases <span class="ot">&lt;-</span> table5 <span class="sc">%&gt;%</span> </span>
<span id="cb314-2"><a href="data-transformation-3-tidy-data.html#cb314-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(rate, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;cases&quot;</span>, <span class="st">&quot;population&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>, <span class="at">convert =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb314-3"><a href="data-transformation-3-tidy-data.html#cb314-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unite</span>(year, century, year, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb314-4"><a href="data-transformation-3-tidy-data.html#cb314-4" aria-hidden="true" tabindex="-1"></a>tb_cases</span></code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   country     year   cases population
##   &lt;chr&gt;       &lt;chr&gt;  &lt;int&gt;      &lt;int&gt;
## 1 Afghanistan 1999     745   19987071
## 2 Afghanistan 2000    2666   20595360
## 3 Brazil      1999   37737  172006362
## 4 Brazil      2000   80488  174504898
## 5 China       1999  212258 1272915272
## 6 China       2000  213766 1280428583</code></pre>
</div>
<div class="info">
<p>
The year column is still a <code>character</code> column. In this
case, it does not matter too much, as 1999 and 2000 are levels of the
column <code>year</code> and very unlikely to be involved in any
calculations. In case we are dealing with actual numerical value and
have the need to convert the data type, we need to use the function
<code>as.integer()</code> as unite does not have a <code>convert</code>
argument available.
</p>
</div>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb316-1"><a href="data-transformation-3-tidy-data.html#cb316-1" aria-hidden="true" tabindex="-1"></a>tb_cases_converted <span class="ot">&lt;-</span> tb_cases <span class="sc">%&gt;%</span> </span>
<span id="cb316-2"><a href="data-transformation-3-tidy-data.html#cb316-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">as.integer</span>(year))</span>
<span id="cb316-3"><a href="data-transformation-3-tidy-data.html#cb316-3" aria-hidden="true" tabindex="-1"></a>tb_cases_converted</span></code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   country      year  cases population
##   &lt;chr&gt;       &lt;int&gt;  &lt;int&gt;      &lt;int&gt;
## 1 Afghanistan  1999    745   19987071
## 2 Afghanistan  2000   2666   20595360
## 3 Brazil       1999  37737  172006362
## 4 Brazil       2000  80488  174504898
## 5 China        1999 212258 1272915272
## 6 China        2000 213766 1280428583</code></pre>
</div>
<div id="additional-arguments-for-unite" class="section level3 hasAnchor" number="5.4.4">
<h3><span class="header-section-number">5.4.4</span> additional arguments for unite()<a href="data-transformation-3-tidy-data.html#additional-arguments-for-unite" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="retaining-the-original-column-1" class="section level4 hasAnchor" number="5.4.4.1">
<h4><span class="header-section-number">5.4.4.1</span> Retaining the original column<a href="data-transformation-3-tidy-data.html#retaining-the-original-column-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Similarly to <code>separate()</code>, unite also comes with a remove statement, so if you wanted to keep the original columns before merging them together, you would code</p>
<div class="sourceCode" id="cb318"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb318-1"><a href="data-transformation-3-tidy-data.html#cb318-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unite</span>(table5, year_combined, century, year, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>, <span class="at">remove =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 5
##   country     year_combined century year  rate             
##   &lt;chr&gt;       &lt;chr&gt;         &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;            
## 1 Afghanistan 1999          19      99    745/19987071     
## 2 Afghanistan 2000          20      00    2666/20595360    
## 3 Brazil      1999          19      99    37737/172006362  
## 4 Brazil      2000          20      00    80488/174504898  
## 5 China       1999          19      99    212258/1272915272
## 6 China       2000          20      00    213766/1280428583</code></pre>
</div>
<div id="removing-missing-values-before-uniting-columns" class="section level4 hasAnchor" number="5.4.4.2">
<h4><span class="header-section-number">5.4.4.2</span> Removing missing values before uniting columns<a href="data-transformation-3-tidy-data.html#removing-missing-values-before-uniting-columns" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><code>unite()</code> also comes with an <code>na.rm</code> statement that will remove missing values prior to uniting the values of a column (actually, the values have to be a â€œcharacterâ€ column). Let me modify <code>table5</code> a wee bit to make that point.</p>
<div class="sourceCode" id="cb320"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb320-1"><a href="data-transformation-3-tidy-data.html#cb320-1" aria-hidden="true" tabindex="-1"></a>table5_mod <span class="ot">&lt;-</span> table5 <span class="sc">%&gt;%</span> </span>
<span id="cb320-2"><a href="data-transformation-3-tidy-data.html#cb320-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">new =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;200&quot;</span>, <span class="cn">NA</span>), <span class="dv">3</span>))</span>
<span id="cb320-3"><a href="data-transformation-3-tidy-data.html#cb320-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb320-4"><a href="data-transformation-3-tidy-data.html#cb320-4" aria-hidden="true" tabindex="-1"></a>table5_mod</span></code></pre></div>
<pre><code>## # A tibble: 6 x 5
##   country     century year  rate              new  
##   &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;             &lt;chr&gt;
## 1 Afghanistan 19      99    745/19987071      200  
## 2 Afghanistan 20      00    2666/20595360     &lt;NA&gt; 
## 3 Brazil      19      99    37737/172006362   200  
## 4 Brazil      20      00    80488/174504898   &lt;NA&gt; 
## 5 China       19      99    212258/1272915272 200  
## 6 China       20      00    213766/1280428583 &lt;NA&gt;</code></pre>
<p>If we wanted to combine the values of <code>rate</code> and <code>new</code>, we would code</p>
<div class="sourceCode" id="cb322"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb322-1"><a href="data-transformation-3-tidy-data.html#cb322-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unite</span>(table5_mod, rate, rate, new, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   country     century year  rate                 
##   &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;                
## 1 Afghanistan 19      99    745/19987071/200     
## 2 Afghanistan 20      00    2666/20595360/NA     
## 3 Brazil      19      99    37737/172006362/200  
## 4 Brazil      20      00    80488/174504898/NA   
## 5 China       19      99    212258/1272915272/200
## 6 China       20      00    213766/1280428583/NA</code></pre>
<p>See how R adds the missing values onto rate, which we do not want. To avoid that happening, we can use the <code>na.rm</code> statement which removes missing values in columns of data type character before merging the columns.</p>
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb324-1"><a href="data-transformation-3-tidy-data.html#cb324-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unite</span>(table5_mod, rate, rate, new, <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   country     century year  rate                 
##   &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;                
## 1 Afghanistan 19      99    745/19987071/200     
## 2 Afghanistan 20      00    2666/20595360        
## 3 Brazil      19      99    37737/172006362/200  
## 4 Brazil      20      00    80488/174504898      
## 5 China       19      99    212258/1272915272/200
## 6 China       20      00    213766/1280428583</code></pre>
</div>
</div>
</div>
<div id="bonus-materials-mutate-row-names-from-the-mtcars" class="section level2 hasAnchor" number="5.5">
<h2><span class="header-section-number">5.5</span> Bonus materials: mutate row names from the <code>mtcars</code><a href="data-transformation-3-tidy-data.html#bonus-materials-mutate-row-names-from-the-mtcars" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Remember, in lecture 2 when we were talking about the <code>mtcars</code> dataset and how the car types were not in listed as a separate column but rather row names? Letâ€™s just read in the data and have another quick look to jog our memoriesâ€¦</p>
<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb326-1"><a href="data-transformation-3-tidy-data.html#cb326-1" aria-hidden="true" tabindex="-1"></a>df_mtcars <span class="ot">&lt;-</span> mtcars</span>
<span id="cb326-2"><a href="data-transformation-3-tidy-data.html#cb326-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb326-3"><a href="data-transformation-3-tidy-data.html#cb326-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df_mtcars)</span></code></pre></div>
<pre><code>##                    mpg cyl disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
## Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
## Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
## Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
## Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</code></pre>
<p>You can see much better what Iâ€™m talking about when you view your <code>df_mtcars</code>.</p>
<p>Now, that we have learnt about the <code>mutate()</code> function, we can attempt to get all of these row names into a new column. All we have to do is combining a function called <code>rownames()</code> with <code>mutate()</code>. We also could use some more of these handy pipes <code>%&gt;%</code> you learnt about last week.</p>
<div class="sourceCode" id="cb328"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb328-1"><a href="data-transformation-3-tidy-data.html#cb328-1" aria-hidden="true" tabindex="-1"></a>df_mtcars <span class="ot">&lt;-</span> mtcars <span class="sc">%&gt;%</span> </span>
<span id="cb328-2"><a href="data-transformation-3-tidy-data.html#cb328-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Car_type =</span> <span class="fu">rownames</span>(mtcars))</span></code></pre></div>
<p>In this example, we have taken the dataset <code>mtcars</code>, then added a new column called <code>Car_type</code> with <code>mutate()</code>. The column <code>Car_type</code> should then hold all the values that were previously listed as the row names in the original <code>mtcars</code> data.</p>
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb329-1"><a href="data-transformation-3-tidy-data.html#cb329-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df_mtcars)</span></code></pre></div>
<pre><code>##                    mpg cyl disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
## Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
## Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
## Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
## Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1
##                            Car_type
## Mazda RX4                 Mazda RX4
## Mazda RX4 Wag         Mazda RX4 Wag
## Datsun 710               Datsun 710
## Hornet 4 Drive       Hornet 4 Drive
## Hornet Sportabout Hornet Sportabout
## Valiant                     Valiant</code></pre>
<div class="question">
<p>
We can now look at the data <code>df_mtcars</code>, and see that the
new column was added at the end of the dataset. What would we have to do
to make <code>Car_type</code> the first column in the dataframe?
</p>
</div>
<div class="webex-solution">
<button>
Answer
</button>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="data-transformation-3-tidy-data.html#cb331-1" aria-hidden="true" tabindex="-1"></a><span class="co"># We could use the fuction select()</span></span>
<span id="cb331-2"><a href="data-transformation-3-tidy-data.html#cb331-2" aria-hidden="true" tabindex="-1"></a>df_mtcars <span class="ot">&lt;-</span> mtcars <span class="sc">%&gt;%</span> </span>
<span id="cb331-3"><a href="data-transformation-3-tidy-data.html#cb331-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Car_type =</span> <span class="fu">rownames</span>(mtcars)) <span class="sc">%&gt;%</span> </span>
<span id="cb331-4"><a href="data-transformation-3-tidy-data.html#cb331-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Car_type, mpg<span class="sc">:</span>carb)</span>
<span id="cb331-5"><a href="data-transformation-3-tidy-data.html#cb331-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb331-6"><a href="data-transformation-3-tidy-data.html#cb331-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df_mtcars)</span></code></pre></div>
<pre><code>##                            Car_type  mpg cyl disp  hp drat    wt  qsec vs am
## Mazda RX4                 Mazda RX4 21.0   6  160 110 3.90 2.620 16.46  0  1
## Mazda RX4 Wag         Mazda RX4 Wag 21.0   6  160 110 3.90 2.875 17.02  0  1
## Datsun 710               Datsun 710 22.8   4  108  93 3.85 2.320 18.61  1  1
## Hornet 4 Drive       Hornet 4 Drive 21.4   6  258 110 3.08 3.215 19.44  1  0
## Hornet Sportabout Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0
## Valiant                     Valiant 18.1   6  225 105 2.76 3.460 20.22  1  0
##                   gear carb
## Mazda RX4            4    4
## Mazda RX4 Wag        4    4
## Datsun 710           4    1
## Hornet 4 Drive       3    1
## Hornet Sportabout    3    2
## Valiant              3    1</code></pre>
</div>
</div>
<div id="additional-information-1" class="section level2 hasAnchor" number="5.6">
<h2><span class="header-section-number">5.6</span> Additional information<a href="data-transformation-3-tidy-data.html#additional-information-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>More information on stuff we covered today and beyond can be found here:</p>
<ul>
<li><a href="https://r4ds.had.co.nz" class="uri">https://r4ds.had.co.nz</a> â€œR 4 Data Scienceâ€ by Garrett Grolemund and Hadley Wickham is the official guidebook for R</li>
<li><a href="https://suzan.rbind.io/categories/tutorial/" class="uri">https://suzan.rbind.io/categories/tutorial/</a> She has some pretty cool tutorials on data wrangling</li>
</ul>
</div>
<div id="formative-homework-2" class="section level2 hasAnchor" number="5.7">
<h2><span class="header-section-number">5.7</span> Formative Homework<a href="data-transformation-3-tidy-data.html#formative-homework-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The formative assessment can now be downloaded from moodle. There is no need to submit your answers to moodle.</p>

</div>
</div>
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  if (t = document.getElementById("webex-total_correct")) {
    var correct = document.getElementsByClassName("webex-correct").length;
    var solvemes = document.getElementsByClassName("webex-solveme").length;
    var radiogroups = document.getElementsByClassName("webex-radiogroup").length;
    var selects = document.getElementsByClassName("webex-select").length;
    
    t.innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");
  
  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");
  
  var cl = this.classList
  
  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;
  
  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }
  
  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

window.onload = function() {
  console.log("onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;
  }
  
  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }
  
  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
  }

  update_total_correct();
}

</script>

            </section>

          </div>
        </div>
      </div>
<a href="data-transformation-2-more-one-and-two-table-verbs.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data-transformation-4-fine-tuned-data-manipulation.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
